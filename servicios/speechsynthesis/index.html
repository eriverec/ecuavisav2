<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>
<body>
<script type="text/javascript">
	// Hacer una solicitud a la ruta /audio en Express para obtener el audio en base64
	fetch('https://aws-polly.vercel.app/speechsynthesis?idArticle=5154428')
	  .then(response => response.text())
	  .then(audioBase64 => {
	    // Decodificar el audio base64 en un blob
	    const audioBlob = base64toBlob(audioBase64, 'audio/mp3');

	    // Crear una URL del blob para reproducir el audio
	    const audioUrl = URL.createObjectURL(audioBlob);

	    // Reproducir el audio en una etiqueta <audio>
	    const audioElement = document.createElement('audio');
	    audioElement.src = audioUrl;
	    audioElement.controls = true;
	    document.body.appendChild(audioElement);
	  })
	  .catch(err => {
	    console.error('Error al obtener el audio:', err);
	  });

	// Función para convertir una cadena base64 en un blob
	function base64toBlob(base64, contentType) {
	  const byteCharacters = atob(base64);
	  const byteNumbers = new Array(byteCharacters.length);
	  for (let i = 0; i < byteCharacters.length; i++) {
	    byteNumbers[i] = byteCharacters.charCodeAt(i);
	  }
	  const byteArray = new Uint8Array(byteNumbers);
	  return new Blob([byteArray], { type: contentType });
	}
</script>
</body>
</html>