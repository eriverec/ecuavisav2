import{d as W}from"./vuedraggable.umd.b90335ae.js";import{M as Y,r as f,v as ee,Q as ae,as as te,av as le,o,x as v,a,w as t,q as g,t as r,f as se,h as z,b as i,n as L,aT as oe,aM as D,g as U,e as ne,aQ as re,p as B,N as x,aR as ie,u as _,a2 as E,a$ as de,c as u,Z as F,F as I,C as M,$ as P,X as q,a0 as A,aq as J,a1 as Q,a3 as k,b0 as ue,bb as ce}from"./index.88d3c7f5.js";import{V as j}from"./VSpacer.2a3e77c9.js";import{V as R}from"./VTooltip.2d0a8708.js";import{V as me,a as pe}from"./VToolbar.19b789c8.js";const fe={class:"d-flex align-center flex-wrap gap-4"},ve={class:"d-flex align-center drag-handle cursor-move"},ge={class:"d-flex align-center gap-2"},xe={key:0,class:"d-flex justify-center py-4"},ye={key:1,class:"text-center py-4"},_e={class:"text-xs"},Ve={class:"expanded-article-content"},ke={class:"d-flex align-center mb-2"},be={key:0,class:"mb-0"},he={__name:"index",setup(we){const X=[{key:"el-comercio",title:"El Comercio",data:[],search:"",loading:!1},{key:"el-universo",title:"El Universo",data:[],search:"",loading:!1},{key:"primicias",title:"Primicias",data:[],search:"",loading:!1},{key:"el-telegrafo",title:"El Tel\xE9grafo",data:[],search:"",loading:!1}],c=f(G()||X),w=f(""),N=f("--:--"),b=f(60),C=f(!1),m=f(null),T=f(!1),Z=[{title:"30 segundos",value:30},{title:"1 minuto",value:60},{title:"2 minutos",value:120},{title:"5 minutos",value:300}],y=f({show:!1,text:"",color:"success",timeout:3e3});let S=null;function G(){try{const n=localStorage.getItem("newsBoards");return n?JSON.parse(n):null}catch(n){return console.error("Error loading boards order:",n),null}}function H(){try{localStorage.setItem("newsBoards",JSON.stringify(c.value))}catch(n){console.error("Error saving boards order:",n)}}const V=ee(()=>n=>{const l=c.value.find(s=>s.key===n);if(!l)return[];let e=l.data;if(w.value){const s=w.value.toLowerCase();e=e.filter(p=>{var d,h;return((d=p.title)==null?void 0:d.toLowerCase().includes(s))||((h=p.excerpt)==null?void 0:h.toLowerCase().includes(s))})}if(l.search){const s=l.search.toLowerCase();e=e.filter(p=>{var d,h;return((d=p.title)==null?void 0:d.toLowerCase().includes(s))||((h=p.excerpt)==null?void 0:h.toLowerCase().includes(s))})}return e}),$=async()=>{try{c.value=c.value.map(l=>({...l,loading:!0}));const n=await ce.get("https://estadisticas.ecuavisa.com/sites/gestor/Tools/competencias/config.php?api=all");c.value=c.value.map(l=>{const e=n.data.find(s=>s.key===l.key);return{...l,data:(e==null?void 0:e.estructura.articles)||[],loading:!1}}),N.value=new Date().toLocaleTimeString()}catch(n){console.error("Error fetching news:",n),y.value={show:!0,text:"Error al actualizar las noticias",color:"error"}}},O=()=>{clearInterval(S),S=setInterval($,b.value*1e3)},K=n=>{m.value=n,C.value=!0};return ae(b,()=>{O(),y.value={show:!0,text:`Intervalo actualizado a ${b.value} segundos`,color:"success"}}),te(()=>{$(),O()}),le(()=>{clearInterval(S)}),(n,l)=>(o(),v("section",null,[a(se,{modelValue:y.value.show,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value.show=e),color:y.value.color,timeout:y.value.timeout,location:"top end"},{default:t(()=>[g(r(y.value.text),1)]),_:1},8,["modelValue","color","timeout"]),a(U,{class:"mb-4"},{default:t(()=>[a(z,null,{default:t(()=>[i("div",fe,[a(L,{modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=e=>w.value=e),label:"Buscar en todas las noticias","prepend-inner-icon":"tabler-search",density:"compact",style:{"max-width":"300px"},clearable:""},null,8,["modelValue"]),a(oe,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=e=>b.value=e),items:Z,label:"Intervalo de actualizaci\xF3n",style:{"max-width":"200px"},density:"compact"},null,8,["modelValue"]),a(j),a(D,{color:"primary",size:"small","prepend-icon":"tabler-clock"},{default:t(()=>[g(" \xDAltima actualizaci\xF3n: "+r(N.value),1)]),_:1})])]),_:1})]),_:1}),a(_(W),{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),"component-data":{type:"transition-group",name:T.value?null:"flip-list"},"item-key":"key",class:"row d-flex flex-wrap",handle:".drag-handle",onStart:l[4]||(l[4]=e=>T.value=!0),onEnd:l[5]||(l[5]=e=>T.value=!1),onChange:H},{item:t(({element:e})=>[a(ne,{cols:"12",md:"4",class:"board-container d-flex"},{default:t(()=>[a(U,{loading:e.loading},{default:t(()=>[a(re,null,{append:t(()=>[i("div",ge,[a(L,{modelValue:e.search,"onUpdate:modelValue":s=>e.search=s,label:"Buscar en este panel",density:"compact","hide-details":"",style:{"max-width":"200px"},clearable:""},null,8,["modelValue","onUpdate:modelValue"]),a(B,{icon:"",variant:"text",onClick:s=>K(e)},{default:t(()=>[a(x,{icon:"tabler-maximize"})]),_:2},1032,["onClick"])])]),default:t(()=>[i("div",ve,[a(x,{icon:"tabler-grip-vertical",class:"me-2"}),a(ie,null,{default:t(()=>[g(r(e.title)+" ",1),a(D,{class:"ml-2",size:"small",color:"primary"},{default:t(()=>[g(r(_(V)(e.key).length),1)]),_:2},1024)]),_:2},1024)])]),_:2},1024),a(E),a(z,{class:"board-content"},{default:t(()=>[e.loading?(o(),v("div",xe,[a(de,{indeterminate:""})])):_(V)(e.key).length?(o(),u(F,{key:2,lines:"two"},{default:t(()=>[(o(!0),v(I,null,M(_(V)(e.key),(s,p)=>(o(),v(I,{key:p},[a(P,null,{prepend:t(()=>[s.image?(o(),u(q,{key:0,image:s.image,size:"48",rounded:""},null,8,["image"])):(o(),u(x,{key:1,icon:"tabler-news",size:"32"}))]),append:t(()=>[a(B,{href:s.link,target:"_blank",icon:"",variant:"text",size:"small"},{default:t(()=>[a(x,{icon:"tabler-external-link"})]),_:2},1032,["href"])]),default:t(()=>[a(R,{location:"top"},{activator:t(({props:d})=>[a(A,J(d,{class:"text-truncate"}),{default:t(()=>[g(r(s.title),1)]),_:2},1040)]),default:t(()=>[i("span",null,r(s.title),1)]),_:2},1024),a(Q,null,{default:t(()=>[i("span",_e,r(s.timestamp||"Sin fecha"),1),s.excerpt?(o(),u(R,{key:0,location:"bottom"},{activator:t(({props:d})=>[i("span",J(d,{class:"d-block text-truncate"}),r(s.excerpt),17)]),default:t(()=>[i("span",null,r(s.excerpt),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1024),p!==_(V)(e.key).length-1?(o(),u(E,{key:0})):k("",!0)],64))),128))]),_:2},1024)):(o(),v("div",ye," No se encontraron art\xEDculos "))]),_:2},1024)]),_:2},1032,["loading"])]),_:2},1024)]),_:1},8,["modelValue","component-data"]),a(ue,{modelValue:C.value,"onUpdate:modelValue":l[8]||(l[8]=e=>C.value=e),fullscreen:"",scrim:!0,transition:"dialog-bottom-transition"},{default:t(()=>[a(U,null,{default:t(()=>[a(me,{color:"primary"},{default:t(()=>[a(B,{icon:"",variant:"text",onClick:l[6]||(l[6]=e=>C.value=!1)},{default:t(()=>[a(x,{icon:"tabler-x"})]),_:1}),a(pe,null,{default:t(()=>{var e;return[g(r((e=m.value)==null?void 0:e.title),1)]}),_:1}),a(j),m.value?(o(),u(L,{key:0,modelValue:m.value.search,"onUpdate:modelValue":l[7]||(l[7]=e=>m.value.search=e),label:"Buscar",density:"compact","hide-details":"",class:"expanded-search",clearable:""},null,8,["modelValue"])):k("",!0)]),_:1}),a(z,{class:"expanded-container pa-6"},{default:t(()=>[a(F,{lines:"two"},{default:t(()=>[m.value?(o(!0),v(I,{key:0},M(_(V)(m.value.key),(e,s)=>(o(),v(I,{key:s},[a(P,null,{prepend:t(()=>[e.image?(o(),u(q,{key:0,image:e.image,size:"64",rounded:""},null,8,["image"])):(o(),u(x,{key:1,icon:"tabler-news",size:"48"}))]),append:t(()=>[a(B,{href:e.link,target:"_blank",color:"primary",variant:"tonal"},{default:t(()=>[g(" Leer m\xE1s "),a(x,{end:"",icon:"tabler-external-link"})]),_:2},1032,["href"])]),default:t(()=>[i("div",Ve,[a(A,{class:"text-h6 mb-2"},{default:t(()=>[g(r(e.title),1)]),_:2},1024),a(Q,null,{default:t(()=>[i("div",ke,[a(x,{icon:"tabler-clock",size:"small",class:"me-2"}),i("span",null,r(e.timestamp||"Sin fecha"),1)]),e.excerpt?(o(),v("p",be,r(e.excerpt),1)):k("",!0)]),_:2},1024)])]),_:2},1024),s!==_(V)(m.value.key).length-1?(o(),u(E,{key:0})):k("",!0)],64))),128)):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},ze=Y(he,[["__scopeId","data-v-1ba34336"]]);export{ze as default};
