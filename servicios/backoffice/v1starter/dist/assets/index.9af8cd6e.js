import{M as Q,R as X,S as Z,U as J,r as e,as as K,v as Y,Q as ee,z as te,o as _,x as y,a as t,w as a,q as g,t as m,u as l,f as ae,e as R,g as se,h as le,b9 as oe,i as N,ba as ne,b as n,aR as ie,b2 as de,V as B,X as re,N as L,aT as ue,$ as k,aU as ce,aV as _e,a1 as me,c as C,Z as M,a0 as U,a3 as I,F as E,C as pe,p as $,a2 as fe,bd as ve,be as ge}from"./index.88d3c7f5.js";const P=V=>(ve("data-v-81b81b50"),V=V(),ge(),V),be={class:"d-flex flex-wrap py-4 gap-4 align-items-center",style:{"justify-content":"space-between"}},he={class:"px-4"},ye=P(()=>n("div",{class:"loading"},null,-1)),Ve={key:0},we={class:"nombre-desafio d-flex flex-column"},xe=P(()=>n("small",null,"Semana",-1)),Se={style:{"margin-top":"-5px"}},ke={class:"content-items d-flex"},Ce={class:"content-video pt-0"},Ie={class:"pt-1 pl-2"},De={key:1,class:"pt-2 pl-2"},Te={class:"d-flex flex-column flex-wrap gap-0 align-items-center text-center"},Le=["href"],Ue=["src"],$e={class:"p-0 m-0",style:{"margin-top":"-10px"}},Pe=P(()=>n("small",{style:{"font-size":"10px"}},"Sello logrado",-1)),je={class:"d-flex align-center justify-space-between botonescurrentPage"},ze={__name:"index",setup(V){X.exports.extendMoment(Z).locale("es",[J]);const D=e("tab-lista"),T=e([]),w=e([]),b=e(!0),p=e(""),j=e([]);e(1);const f=e([]),H=e(1);e(1),e(""),e(!1);const q=e(!1);e(!1),e(!1),e(null),e(!1),e(""),e(""),e(""),e(""),e(""),e(!0),e(""),e(""),e(""),e(""),e(""),e([]);const h=e({message:"Datos guardados",type:"success",model:!1});K(async()=>{await F(),await z()});async function z(u={}){try{const{page:i=1,limit:r=200,idSemanaDesafio:S=""}=u;b.value=!0,d.value=1;var o=new Headers;o.append("Content-Type","application/json");var c={method:"GET",headers:o,redirect:"follow"},s=await fetch(`https://servicio-niveles-puntuacion.vercel.app/historico-sello/all?limit=${r}&page=${i}&idSemanaDesafio=${S}`,c);const v=await s.json();f.value=v.data,H.value=Math.ceil(v.total/v.limit),b.value=!1}catch(i){return console.error(i.message)}}async function F(u=1,o=10){try{d.value=1;var c=new Headers;c.append("Content-Type","application/json");var s={method:"GET",headers:c,redirect:"follow"},i=await fetch("https://servicio-desafios.vercel.app/semana/all/get",s);const r=await i.json();j.value=r.data.reduce((S,v)=>(S.push({title:`${v.titulo}`,value:v._id}),S),[])}catch(r){return console.error(r.message)}}const x=8,d=e(1),G=Y(()=>{const u=(d.value-1)*x,o=u+x;return f.value.slice(u,o)}),W=()=>{d.value*x<f.value.length&&d.value++},A=()=>{d.value>1&&d.value--};e(!1),e("");async function O(u){const o=u.userId;if(!o)return null;w.value[o.toString()]=!0;var c=new Headers;c.append("Content-Type","application/json");var s={method:"GET",headers:c,redirect:"follow"},i=await fetch(`https://data.mongodb-api.com/app/backoffice1-usyys/endpoint/id?id=${o}`,s);const r=await i.json();T.value[o.toString()]=`${r.first_name} ${r.last_name} (${r.email})`,w.value[o.toString()]=!1}return ee(()=>p.value,async(u,o)=>{p.value&&await z({idSemanaDesafio:p.value})}),(u,o)=>{const c=te("v-list-item-content");return _(),y("section",null,[t(ae,{modelValue:l(h).model,"onUpdate:modelValue":o[0]||(o[0]=s=>l(h).model=s),location:"top end",variant:"flat",timeout:l(h).timeout||2e3,color:l(h).type},{default:a(()=>[g(m(l(h).message),1)]),_:1},8,["modelValue","timeout","color"]),t(B,null,{default:a(()=>[t(R,{class:"mt-0",cols:"12",md:"12",lg:"12"},{default:a(()=>[t(se,{class:"mt-5"},{default:a(()=>[t(le,null,{default:a(()=>[t(oe,{modelValue:l(D),"onUpdate:modelValue":o[2]||(o[2]=s=>N(D)?D.value=s:null)},{default:a(()=>[t(ne,{value:"tab-lista"},{default:a(()=>[n("div",be,[n("div",null,[t(ie,null,{default:a(()=>[g(" Sellos logrados de usuarios ")]),_:1}),t(de,null,{default:a(()=>[g(" Sellos Logrados por Usuarios: Detalles de los Sellos y Usuarios Correspondientes ")]),_:1})])]),n("div",he,[t(B,null,{default:a(()=>[t(R,{cols:"12",class:"mb-4 d-flex mt-4"},{default:a(()=>[t(re,null,{default:a(()=>[t(L,{color:"primary",size:"30",icon:"mdi-filter-outline"})]),_:1}),t(ue,{modelValue:l(p),"onUpdate:modelValue":o[1]||(o[1]=s=>N(p)?p.value=s:null),items:l(j),label:"Filtrar por semana",style:{"max-width":"400px",width:"auto"}},{selection:a(({item:s})=>[n("div",null,m(s.title),1)]),item:a(({item:s,props:i})=>[t(k,ce(_e(i)),{default:a(()=>[t(c,null,{default:a(()=>[t(me,null,{default:a(()=>[n("p",null,"_id: "+m(s.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),l(b)?(_(),C(M,{key:0,lines:"two",border:""},{default:a(()=>[t(k,null,{default:a(()=>[t(U,null,{default:a(()=>[ye]),_:1})]),_:1})]),_:1})):I("",!0),l(b)?I("",!0):(_(),C(M,{key:1,lines:"two",border:""},{default:a(()=>[l(f).length<1&&l(b)==!1?(_(),y("div",Ve,[t(k,null,{default:a(()=>[t(U,null,{default:a(()=>[g(" No hay datos que mostrar ")]),_:1})]),_:1})])):I("",!0),(_(!0),y(E,null,pe(l(G),(s,i)=>(_(),y(E,{key:i},[t(k,{disabled:l(q)},{append:a(()=>[n("div",Te,[n("a",{title:"Ver la imagen",target:"_blank",href:s.semanaDesafio[0].imagen_descriptiva},[n("img",{src:s.semanaDesafio[0].imagen_descriptiva,width:"65"},null,8,Ue)],8,Le),n("div",$e,[t(L,{size:"16",icon:"mdi-star-outline"}),Pe])])]),default:a(()=>[t(U,null,{default:a(()=>[n("div",we,[xe,n("label",Se,m(s.semanaDesafio[0].titulo),1),n("div",ke,[n("div",Ce,[t(L,{size:"20",icon:"tabler-user"}),n("label",Ie,m(s.userId),1),l(T)[s.userId.toString()]?(_(),y("label",De,[g("| "),n("strong",null,m(l(T)[s.userId.toString()]),1)])):(_(),C($,{key:0,title:"Ver el nombre del usuario",size:"small",loading:l(w)[s.userId.toString()],disabled:l(w)[s.userId.toString()],onClick:r=>O(s),icon:"tabler-eye",variant:"text"},null,8,["loading","disabled","onClick"]))])])])]),_:2},1024)]),_:2},1032,["disabled"]),i!==l(f).length-1?(_(),C(fe,{key:0})):I("",!0)],64))),128))]),_:1})),n("div",je,[t($,{icon:"tabler-arrow-big-left-lines",onClick:A,disabled:l(d)===1},null,8,["disabled"]),g(" P\xE1gina "+m(l(d))+" ",1),t($,{icon:"tabler-arrow-big-right-lines",onClick:W,disabled:l(d)*x>=l(f).length},null,8,["disabled"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})])}}},Be=Q(ze,[["__scopeId","data-v-81b81b50"]]);export{Be as default};
