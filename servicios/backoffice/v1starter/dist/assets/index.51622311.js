import{M as q,r as C,o as n,x as h,a as l,w as a,f as G,c as V,h as F,q as s,V as T,e as p,p as v,b7 as K,F as y,C as w,b8 as Q,t as z,b9 as X,ba as Y,g as x,aR as Z,N as E,n as m,c7 as P,a3 as $,a2 as ee,aT as le,b3 as ae,b4 as oe,b5 as te,aM as ue,b6 as ne,aW as de,b as d,bd as se,be as ie}from"./index.88d3c7f5.js";import{V as re}from"./VTextarea.86fae113.js";const I=U=>(se("data-v-cc06c27b"),U=U(),ie(),U),ce=I(()=>d("h3",null,"Se ha guardado la configuraci\xF3n correctamente",-1)),me=I(()=>d("h3",{class:"mb-5"},"Configuraci\xF3n de Horarios",-1)),fe=I(()=>d("thead",null,[d("tr",null,[d("th",null,"T\xEDtulo"),d("th",null,"Inicio"),d("th",null,"Fin"),d("th",null,"Acciones")])],-1)),Ve={__name:"index",setup(U){const _=C(!1),S=C(!1),i=C([]),f=C(0),b=C(""),A=[{title:"Lunes",value:1},{title:"Martes",value:2},{title:"Mi\xE9rcoles",value:3},{title:"Jueves",value:4},{title:"Viernes",value:5},{title:"S\xE1bado",value:6},{title:"Domingo",value:0}];function N(u){const t=u.horarios.map(e=>e.dia);return A.filter(e=>!t.includes(e.value))}function R(u){var t;return((t=A.find(e=>e.value===u))==null?void 0:t.title)||""}function B(){i.value.push({name:`Reproductor ${i.value.length+1}`,iframe:"",forzado:!1,tituloForzado:"",labelForzado:"",horarios:[]}),f.value=i.value.length-1}function H(u){i.value.splice(u,1),f.value>=i.value.length&&(f.value=i.value.length-1)}function L(u){b.value&&(u.horarios.push({dia:b.value,estadoDia:!0,horas:[]}),b.value="")}function M(u,t){u.horarios.splice(t,1)}function j(u,t){u.horarios[t].horas.push({tituloPrograma:"",inicio:"12:00",fin:"13:00"})}function O(u,t,e){u.horarios[t].horas.splice(e,1)}async function W(){_.value=!0;try{const t=await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/suscripciones/player/config2.php?api=web&key=premiunPlayerInternacional")).json();i.value=t.players||[],i.value.forEach(e=>{e.horarios||(e.horarios=[])})}catch(u){console.error("Error al cargar la configuraci\xF3n:",u)}finally{_.value=!1}}async function J(){_.value=!0;try{const u={players:i.value},e=await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/suscripciones/player/config2.php?api=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"premiunPlayerInternacional",estructura:u})})).json();console.log("result",e),e==="Configuraci\xF3n actualizada correctamente"&&(S.value=!0)}catch(u){console.error("Error al guardar la configuraci\xF3n:",u)}finally{_.value=!1}}return W(),(u,t)=>(n(),h("section",null,[l(G,{modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=e=>S.value=e),color:"success",transition:"scale-transition",location:"top center"},{default:a(()=>[ce]),_:1},8,["modelValue"]),l(x,{class:"mt-5",title:"Configuraci\xF3n de Reproductores Internacionales"},{default:a(()=>[_.value?(n(),V(F,{key:0},{default:a(()=>[s(" Cargando configuraci\xF3n... ")]),_:1})):(n(),V(F,{key:1,class:"py-4 gap-0 w-100"},{default:a(()=>[l(T,null,{default:a(()=>[l(p,{cols:"12"},{default:a(()=>[l(v,{color:"primary",onClick:B},{default:a(()=>[s(" A\xF1adir Reproductor ")]),_:1})]),_:1})]),_:1}),l(K,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e)},{default:a(()=>[(n(!0),h(y,null,w(i.value,(e,c)=>(n(),V(Q,{key:c,value:c},{default:a(()=>[s(z(e.name||`Reproductor ${c+1}`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(X,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value=e)},{default:a(()=>[(n(!0),h(y,null,w(i.value,(e,c)=>(n(),V(Y,{key:c,value:c},{default:a(()=>[l(x,{flat:""},{default:a(()=>[l(Z,null,{default:a(()=>[s(" Configuraci\xF3n de "+z(e.name||`Reproductor ${c+1}`)+" ",1),l(v,{icon:"",small:"",color:"error",class:"float-right",onClick:o=>H(c)},{default:a(()=>[l(E,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),l(F,null,{default:a(()=>[l(T,null,{default:a(()=>[l(p,{cols:"6"},{default:a(()=>[l(m,{class:"mb-5",modelValue:e.name,"onUpdate:modelValue":o=>e.name=o,label:"Nombre del reproductor"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{cols:"3"},{default:a(()=>[l(m,{class:"mb-5",modelValue:e.subtituloFecha,"onUpdate:modelValue":o=>e.subtituloFecha=o,label:"Subtitulo Fecha"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{cols:"3"},{default:a(()=>[l(m,{class:"mb-5",modelValue:e.subtituloHora,"onUpdate:modelValue":o=>e.subtituloHora=o,label:"Subtitulo Hora"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(re,{modelValue:e.iframe,"onUpdate:modelValue":o=>e.iframe=o,label:"C\xF3digo iframe",rows:"3"},null,8,["modelValue","onUpdate:modelValue"]),l(P,{modelValue:e.playerActivo,"onUpdate:modelValue":o=>e.playerActivo=o,label:"Activar Player"},null,8,["modelValue","onUpdate:modelValue"]),l(P,{modelValue:e.forzado,"onUpdate:modelValue":o=>e.forzado=o,label:"Activar forzado"},null,8,["modelValue","onUpdate:modelValue"]),e.forzado?(n(),V(m,{key:0,modelValue:e.tituloForzado,"onUpdate:modelValue":o=>e.tituloForzado=o,label:"T\xEDtulo forzado"},null,8,["modelValue","onUpdate:modelValue"])):$("",!0),e.forzado?(n(),V(m,{key:1,modelValue:e.labelForzado,"onUpdate:modelValue":o=>e.labelForzado=o,label:"Label forzado"},null,8,["modelValue","onUpdate:modelValue"])):$("",!0),l(ee,{class:"my-4"}),me,l(T,null,{default:a(()=>[l(p,{cols:"4"},{default:a(()=>[l(le,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=o=>b.value=o),items:N(e),label:"D\xEDa de la semana"},null,8,["modelValue","items"])]),_:2},1024),l(p,{cols:"8"},{default:a(()=>[l(v,{color:"primary",onClick:o=>L(e),disabled:!b.value},{default:a(()=>[s(" A\xF1adir d\xEDa ")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024),l(ae,null,{default:a(()=>[(n(!0),h(y,null,w(e.horarios,(o,k)=>(n(),V(oe,{key:k},{default:a(()=>[l(te,null,{default:a(()=>[s(z(R(o.dia))+" ",1),l(ue,{color:o.estadoDia?"success":"warning",class:"ml-2"},{default:a(()=>[s(z(o.estadoDia?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1024),l(ne,null,{default:a(()=>[l(P,{modelValue:o.estadoDia,"onUpdate:modelValue":r=>o.estadoDia=r,label:"Activar d\xEDa"},null,8,["modelValue","onUpdate:modelValue"]),l(v,{color:"primary",onClick:r=>j(e,k)},{default:a(()=>[s(" A\xF1adir hora ")]),_:2},1032,["onClick"]),l(v,{color:"error",onClick:r=>M(e,k)},{default:a(()=>[s(" Eliminar d\xEDa ")]),_:2},1032,["onClick"]),l(de,null,{default:a(()=>[fe,d("tbody",null,[(n(!0),h(y,null,w(o.horas,(r,D)=>(n(),h("tr",{key:D},[d("td",null,[l(m,{modelValue:r.tituloPrograma,"onUpdate:modelValue":g=>r.tituloPrograma=g},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[l(m,{modelValue:r.inicio,"onUpdate:modelValue":g=>r.inicio=g,type:"time"},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[l(m,{modelValue:r.fin,"onUpdate:modelValue":g=>r.fin=g,type:"time"},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[l(v,{icon:"",small:"",color:"error",onClick:g=>O(e,k,D)},{default:a(()=>[l(E,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(T,{class:"mt-4"},{default:a(()=>[l(p,{cols:"12"},{default:a(()=>[l(v,{color:"success",onClick:J,loading:_.value},{default:a(()=>[s(" Guardar Configuraci\xF3n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))]),_:1})]))}},_e=q(Ve,[["__scopeId","data-v-cc06c27b"]]);export{_e as default};
