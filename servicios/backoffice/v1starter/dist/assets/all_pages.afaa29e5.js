import{M as K,R as ee,S as se,U as te,r as i,bQ as ae,as as le,Q as x,v as P,o as n,x as f,a,w as l,q as _,t as u,f as oe,e as y,g as ce,aQ as ie,b as o,aM as A,u as S,a2 as T,h as ne,V as N,n as re,bC as H,Z as ue,F,C as de,$ as pe,c as w,X as me,N as Y,p as O,a0 as fe,aq as _e,a1 as he,a3 as E,bd as be,be as ve}from"./index.88d3c7f5.js";import{V as ge}from"./VTooltip.2d0a8708.js";const b=v=>(be("data-v-89911341"),v=v(),ve(),v),Ve={class:"sectionprimicias"},xe={class:"d-flex content-title flex-wrap"},ye={class:"d-flex gap-3"},Se={class:"d-flex flex-column",style:{"line-height":"1.3"}},we={class:"d-flex gap-2 align-center mt-2"},Ye=b(()=>o("small",{style:{"font-size":"10px"}},"Todas las p\xE1ginas",-1)),Ie={class:"w-100 mt-4"},De={class:"w-100 mt-4"},Me=b(()=>o("label",null,"Filtrar por sitio web",-1)),Ce={class:"w-100 mt-4"},ke=b(()=>o("label",null,"Filtrar por Secci\xF3n",-1)),Ae={class:"w-100 mt-4"},He=b(()=>o("label",null,"Filtrar por SubSecci\xF3n",-1)),Ee={key:0},Le={class:"d-flex gap-2 align-center"},Re={class:"text-xs",title:"Fecha de publicaci\xF3n"},qe={key:0,title:"Autor",class:"align-center mt-1",style:{"font-size":"12px"}},Ue={style:{"margin-top":"5px"}},ze={class:"d-flex align-center gap-2"},Be={key:1},Pe=b(()=>o("td",{colspan:"4",class:"no-results"},"No se encontraron resultados",-1)),Te=[Pe],Ne={__name:"all_pages",setup(v){const d=ee.exports.extendMoment(se);d.locale("es",[te]);const h=i({show:!1,text:"",color:"success",timeout:3e3}),c=ae({busqueda:null,sitio:null,seccion:null,subseccion:null,disabled:!1}),g=i([]);i(null),i(null);const L=i(["PRIMICIAS","EL UNIVERSO","EXPRESO","ECUAVISA"]);i(null);const I=i([]);i(null);const D=i([]);i(null),d(),i("--:--"),i(300),i(!1),i({});function Q(s){return s.replace(/&amp;/g,"&")}const W=async function(){try{return(await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/competencias/radar-digital/primicias/listar.php")).json()).site}catch{return null}},X=async function(){try{return(await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/competencias/radar-digital/el-universo/listar.php")).json()).site}catch{return null}},Z=async function(){try{const s=await W()||[],t=await X()||[];for(let e=0;e<s.length;e++)s[e].sitio="PRIMICIAS",s[e].color="primary";for(let e=0;e<t.length;e++)t[e].sitio="EL UNIVERSO",t[e].color="info";return g.value=[...s,...t].sort((e,p)=>{const m=d(e.fechaPublicacion,"DD/MM/YYYY HH:mm:ss");return d(p.fechaPublicacion,"DD/MM/YYYY HH:mm:ss")-m}),!0}catch{return null}};function $(s=null){const t=new Set;return s?s.forEach(e=>{e.vertical&&t.add(e.vertical)}):g.value.forEach(e=>{e.vertical&&t.add(e.vertical)}),Array.from(t)}function j(s=null){const t=new Set;return s?s.forEach(e=>{e.subVertical&&t.add(e.subVertical)}):g.value.forEach(e=>{e.subVertical&&t.add(e.subVertical)}),Array.from(t)}le(async()=>{try{await Z(),I.value=$(),D.value=j(),U()}catch(s){console.error("Error fetching data:",s)}}),x(()=>c.seccion,s=>{s.length>0&&!I.value.includes(s.at(-1))&&s.pop()}),x(()=>c.subseccion,s=>{s.length>0&&!D.value.includes(s.at(-1))&&s.pop()}),x(()=>c.sitio,s=>{s.length>0&&!L.value.includes(s.at(-1))&&s.pop()});const R=P(()=>{const s=new Map;return g.value.forEach(t=>{const e=s.get(t.enlace);(!e||e.picture===null&&t.picture!==null)&&s.set(t.enlace,{...t,subVertical:t.subVertical==="NN"?"":t.subVertical,isDuplicate:!1})}),Array.from(s.values())});let M=i([]);const q=i(null);x(c,U);function U(){clearTimeout(q.value),q.value=setTimeout(()=>{var m;const s=((m=c.busqueda)==null?void 0:m.toLowerCase())||"",t=c.sitio||[],e=c.seccion||[],p=c.subseccion||[];!s&&t.length===0&&e.length===0&&p.length===0?M.value=R.value:M.value=R.value.filter(r=>{var B;const C=!s||r.vertical.toLowerCase().includes(s)||((B=r.autor)==null?void 0:B.toLowerCase().includes(s))||r.titulo.toLowerCase().includes(s),k=t.length===0||t.includes(r.sitio),z=e.length===0||e.includes(r.vertical),J=p.length===0||p.includes(r.subVertical);return C&&k&&z&&J}).sort((r,C)=>{const k=d(r.fechaPublicacion,"DD/MM/YYYY HH:mm:ss");return d(C.fechaPublicacion,"DD/MM/YYYY HH:mm:ss")-k})},300)}const V=P(()=>M.value),G=s=>d(s,"DD/MM/YYYY HH:mm:ss").format("DD/MM/YYYY HH:mm");return(s,t)=>(n(),f("section",Ve,[a(oe,{modelValue:h.value.show,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value.show=e),color:h.value.color,timeout:h.value.timeout,location:"top end"},{default:l(()=>[_(u(h.value.text),1)]),_:1},8,["modelValue","color","timeout"]),a(N,null,{default:l(()=>[a(y,{cols:"12",md:"12",lg:12},{default:l(()=>[a(ce,null,{default:l(()=>[a(ie,null,{default:l(()=>[o("div",xe,[o("div",ye,[o("div",Se,[_(" \xDAltimas noticias "),o("div",we,[Ye,a(A,{size:"x-small",color:"primary"},{default:l(()=>[_(u(S(V).length)+" Art\xEDculo(s) ",1)]),_:1})])])])])]),_:1}),a(T),a(ne,null,{default:l(()=>[a(N,{class:"mb-4"},{default:l(()=>[a(y,{cols:"12",md:"12",lg:12,class:"pb-0"},{default:l(()=>[o("div",Ie,[a(re,{modelValue:c.busqueda,"onUpdate:modelValue":t[1]||(t[1]=e=>c.busqueda=e),label:"Buscar por, t\xEDtulo, autor, secci\xF3n, subsecci\xF3n","prepend-inner-icon":"tabler-search",density:"compact",style:{padding:"0px 0"},clearable:""},null,8,["modelValue"])]),o("div",De,[Me,a(H,{modelValue:c.sitio,"onUpdate:modelValue":t[2]||(t[2]=e=>c.sitio=e),items:L.value,multiple:"",chips:"","menu-props":{maxHeight:"300"}},null,8,["modelValue","items"])])]),_:1}),a(y,{cols:"12",md:"12",lg:6},{default:l(()=>[o("div",Ce,[ke,a(H,{modelValue:c.seccion,"onUpdate:modelValue":t[3]||(t[3]=e=>c.seccion=e),items:I.value,multiple:"",chips:"","menu-props":{maxHeight:"300"}},null,8,["modelValue","items"])])]),_:1}),a(y,{cols:"12",md:"12",lg:6},{default:l(()=>[o("div",Ae,[He,a(H,{modelValue:c.subseccion,"onUpdate:modelValue":t[4]||(t[4]=e=>c.subseccion=e),items:D.value,multiple:"",chips:"","menu-props":{maxHeight:"300"}},null,8,["modelValue","items"])])]),_:1})]),_:1}),a(ue,{lines:"two",class:"board-content",disabled:c.disabled},{default:l(()=>[S(V).length?(n(),f("div",Ee,[(n(!0),f(F,null,de(S(V),(e,p)=>(n(),f(F,null,[a(pe,{class:"py-4"},{prepend:l(()=>[e.picture?(n(),w(me,{key:0,image:Q(e.picture),size:"64",rounded:""},null,8,["image"])):(n(),w(Y,{key:1,icon:"tabler-news",size:"32"}))]),append:l(()=>[o("div",ze,[a(O,{href:e.enlace,target:"_blank",icon:"",variant:"text",size:"small"},{default:l(()=>[a(Y,{icon:"tabler-external-link"})]),_:2},1032,["href"]),a(O,{class:"d-none",title:"Click para ver el contenido de la nota",disabled:e.sitio!="PRIMICIAS",href:e.enlace,target:"_blank",icon:"",variant:"tonal",size:"small"},{default:l(()=>[a(Y,{icon:"tabler-list"})]),_:2},1032,["disabled","href"])])]),default:l(()=>[a(A,{class:"mb-2",size:"x-small",label:"",color:e.color,style:{"font-size":"10px"}},{default:l(()=>[_(u(e.sitio),1)]),_:2},1032,["color"]),a(ge,{location:"top"},{activator:l(({props:m})=>[a(fe,_e(m,{class:"text-truncate"}),{default:l(()=>[_(u(e.titulo),1)]),_:2},1040)]),default:l(()=>[o("span",null,u(e.titulo),1)]),_:2},1024),a(he,null,{default:l(()=>[o("div",Le,[o("span",Re,u(G(e.fechaPublicacion)||"Sin fecha"),1),e.subVertical?(n(),w(A,{key:0,class:"ml-2",size:"small",color:"success"},{default:l(()=>[_(u(e.subVertical),1)]),_:2},1024)):E("",!0)]),e.autor?(n(),f("div",qe,[a(Y,{icon:"tabler-user",size:"15"}),o("small",Ue,u(e.autor),1)])):E("",!0)]),_:2},1024)]),_:2},1024),p!==S(V).length-1?(n(),w(T,{key:0})):E("",!0)],64))),256))])):(n(),f("div",Be,Te))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},Qe=K(Ne,[["__scopeId","data-v-89911341"]]);export{Qe as a};
