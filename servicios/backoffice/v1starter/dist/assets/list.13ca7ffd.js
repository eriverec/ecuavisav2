import{M as G,R as J,S as X,U as Z,r,as as K,z as Q,o as c,x as y,a as e,w as t,u as l,g as j,h as I,q as n,p as f,i as k,b0 as aa,e as ea,b7 as ta,b8 as P,b9 as sa,ba as la,b as i,aR as ia,b2 as oa,N as C,c as T,Z as M,$ as N,a0 as B,a3 as b,F as H,C as na,t as u,X as ra,a1 as da,c7 as ca,aM as ua,a2 as pa,V as ma,bc as _a,bd as ga,be as va}from"./index.88d3c7f5.js";import{g as fa}from"./config.e41fa6da.js";import{V as ba}from"./VPagination.9412c3b8.js";const O=w=>(ga("data-v-95e6d8b7"),w=w(),va(),w),ha={class:"d-flex flex-wrap py-4 gap-4 align-items-center",style:{"justify-content":"space-between"}},Va={class:"px-4"},ya=O(()=>i("div",{class:"loading"},null,-1)),Ca={class:"nombre-campania"},wa={key:0},xa={class:"text-xs text-disabled"},ka=O(()=>i("b",null,"Sector: ",-1)),Ta={class:"switch-estatus",style:{"margin-bottom":"-10px"}},Sa={style:{"font-weight":"medium"}},La={key:1,title:"Publicidad activa, iniciada",color:"success"},za={style:{"font-weight":"medium"}},Ia={class:"text-xs text-disabled"},Da={class:"text-xs text-primary pl-2"},Ra={class:"espacio-right-2"},Ea={class:"text-sm text-disabled"},Ua={__name:"list",setup(w){const D=J.exports.extendMoment(X);D.locale("es",[Z]);const g=r("tab-lista"),p=r(!1);r(1);const v=r([]),h=r(1),R=r(1),E=r(1),U=r(""),S=r(!1),L=r(!1),x=r(!1);K(z);async function z(d=1,s=10){try{var m=new Headers;m.append("Content-Type","application/json");var _={method:"GET",headers:m,redirect:"follow"},a=await fetch(`https://ads-service.vercel.app/campaign/get/all?page=${d}&limit=${s}`,_);const o=await a.json();v.value=o.data,E.value=o.total,R.value=Math.ceil(o.total/o.limit)}catch(o){return console.error(o.message)}}const Y=async()=>{S.value=!0,await z(h.value),S.value=!1},q=async d=>{p.value=!0,U.value=d},A=async()=>{try{p.value=!1,L.value=!0;var d=new Headers;d.append("Content-Type","application/json");var s={method:"DELETE",headers:d,redirect:"follow"},m=await fetch(`https://ads-service.vercel.app/campaign/delete/${U.value}`,s);const _=await m.json();L.value=!1,await z(h.value)}catch(_){return console.error(_.message)}},F=async d=>{const s=v.value[d],m=s._id,_=s.statusCampaign;x.value=!0;var a={status:_},o=new Headers;o.append("Content-Type","application/json");var V={method:"POST",headers:o,body:JSON.stringify(a),redirect:"follow"},W=await fetch(`https://ads-service.vercel.app/campaign/update/status/${m}`,V);const $=await W.json();$.resp||(alert("Un error se present\xF3: "+$.error),s.statusCampaign=!s.statusCampaign),x.value=!1};return(d,s)=>{const m=_a,_=Q("RouterLink");return c(),y("section",null,[e(aa,{modelValue:l(p),"onUpdate:modelValue":s[2]||(s[2]=a=>k(p)?p.value=a:null),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(m,{onClick:s[0]||(s[0]=a=>p.value=!l(p))}),e(j,{title:"Eliminar registro"},{default:t(()=>[e(I,null,{default:t(()=>[n(" \xBFDesea eliminar el registro? ")]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(f,{color:"secondary",variant:"tonal",onClick:s[1]||(s[1]=a=>p.value=!1)},{default:t(()=>[n(" No, Cerrar ")]),_:1}),e(f,{onClick:A},{default:t(()=>[n(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ma,null,{default:t(()=>[e(ea,{class:"mt-0",cols:"12",md:"12",lg:"12"},{default:t(()=>[e(ta,{modelValue:l(g),"onUpdate:modelValue":s[3]||(s[3]=a=>k(g)?g.value=a:null),class:"v-tabs-pill d-none"},{default:t(()=>[e(P,{value:"tab-lista",class:"d-none"},{default:t(()=>[n(" Listado ")]),_:1}),e(P,{value:"tab-agregar",class:"d-none"},{default:t(()=>[n(" Estad\xEDsticas ")]),_:1})]),_:1},8,["modelValue"]),e(j,{class:"mt-5"},{default:t(()=>[e(I,null,{default:t(()=>[e(sa,{modelValue:l(g),"onUpdate:modelValue":s[5]||(s[5]=a=>k(g)?g.value=a:null)},{default:t(()=>[e(la,{value:"tab-lista"},{default:t(()=>[i("div",ha,[i("div",null,[e(ia,null,{default:t(()=>[n(" Listado de campa\xF1as existentes ")]),_:1}),e(oa,null,{default:t(()=>[n(" Elige la campa\xF1a sobre la que necesites informaci\xF3n ")]),_:1})])]),i("div",Va,[e(f,{color:"primary",class:"mb-4",to:{name:"apps-campaigns-create"}},{default:t(()=>[n(" Crear campa\xF1a "),e(C,{size:22,icon:"tabler-plus"})]),_:1}),l(v).length<1?(c(),T(M,{key:0,lines:"two",border:""},{default:t(()=>[e(N,null,{default:t(()=>[e(B,null,{default:t(()=>[ya]),_:1})]),_:1})]),_:1})):b("",!0),l(v).length>0?(c(),T(M,{key:1,lines:"two",border:""},{default:t(()=>[(c(!0),y(H,null,na(l(v),(a,o)=>(c(),y(H,{key:o},[e(N,{disabled:l(L)},{append:t(()=>[i("div",Ra,[e(f,{icon:"",size:"x-small",color:"info",variant:"text"},{default:t(()=>[e(_,{to:{name:"apps-campaigns-edit-id",params:{id:a._id}},class:"font-weight-medium user-list-name"},{default:t(()=>[e(C,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"])]),_:2},1024),e(f,{icon:"",size:"x-small",color:"error",variant:"text",onClick:V=>q(a._id)},{default:t(()=>[e(C,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(f,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-campaigns-view-id",params:{id:a._id}}},{default:t(()=>[e(C,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"])])]),default:t(()=>[e(B,null,{default:t(()=>[i("div",Ca,[n(u(a.campaignTitle)+" ",1),a.criterial.country!=null&&a.criterial.country!=-1?(c(),y("div",wa,[e(ra,{title:"Ubicaci\xF3n: "+a.criterial.country+", "+a.criterial.city,class:"ava",size:"24",image:"https://flagcdn.com/w320/"+l(fa)(a.criterial.country)["alpha-2"].toLowerCase()+".png"},null,8,["title","image"]),i("span",xa,[ka,n(" "+u(a.criterial.country)+u(a.criterial.city=="0"?"":", "+a.criterial.city),1)])])):b("",!0)])]),_:2},1024),e(da,{class:"mt-1",title:"Estado de campa\xF1a"},{default:t(()=>[i("div",Ta,[e(ca,{disabled:l(x),loading:l(x)?"warning":!1,color:a.statusCampaign?"success":"error",modelValue:a.statusCampaign,"onUpdate:modelValue":V=>a.statusCampaign=V,size:"x-small",class:"custom-vswitch",onChange:V=>F(o)},null,8,["disabled","loading","color","modelValue","onUpdate:modelValue","onChange"]),a.statusCampaign!=!0?(c(),T(ua,{key:0,title:"Publicidad pausada",size:"x-small",label:"",color:"error"},{default:t(()=>[i("span",Sa,u(a.statusCampaign?"Activo":"Inactivo"),1)]),_:2},1024)):b("",!0),a.statusCampaign==!0?(c(),y("small",La,[i("span",za,u(a.statusCampaign?"Activo":"Inactivo"),1)])):b("",!0)]),i("span",Ia,[i("i",null,u(l(D)(a.created_at).format("YYYY-MM-DD, HH:mm:ss")),1),n(" | "),i("i",null,[n(" Tipo de contenido: "),i("b",null,u(a.type),1)])]),i("span",Da,[e(C,{icon:"mdi-account-group"}),n(": "+u(a.sizeUsersId),1)])]),_:2},1024)]),_:2},1032,["disabled"]),o!==l(v).length-1?(c(),T(pa,{key:0})):b("",!0)],64))),128))]),_:1})):b("",!0),i("span",Ea," Total de registros "+u(l(E)),1),e(ba,{disabled:l(S),modelValue:l(h),"onUpdate:modelValue":s[4]||(s[4]=a=>k(h)?h.value=a:null),length:l(R),class:"mt-4",onClick:Y},null,8,["disabled","modelValue","length"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ma=G(Ua,[["__scopeId","data-v-95e6d8b7"]]);export{Ma as default};
