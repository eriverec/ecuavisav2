import{r as l,v as D,o as t,x as n,b as o,a as s,w as r,e as B,g as R,h as S,n as F,b1 as K,p as O,aW as P,F as V,C as T,L,t as k,c as $,u as A,a3 as b,V as M,q as j,f as z}from"./index.88d3c7f5.js";import{V as W}from"./VPagination.9412c3b8.js";const G={class:"d-flex gap-4"},H={key:0,style:{height:"400px"},class:"d-flex align-center justify-center"},J={key:1},Q=o("thead",null,[o("tr",null,[o("th",{scope:"col"},"USUARIO"),o("th",{scope:"col"},"CORREO")])],-1),X=["onClick"],Y={class:"text-medium-emphasis"},Z={key:0,class:"d-flex align-center justify-center"},ee={key:1},ae={key:2},oe={__name:"index",setup(le){const p=l(""),c=l([]),f=l(!1),_=l(!1),d=l(1),h=l(10),v=l(0),i=l(null),m=l([]),E=D(()=>Math.ceil(v.value/h.value)),y=l(!1),g=l(!1),x=l(!1),C=l(null),w=()=>{m.value[0]=!0,d.value=1,U()},U=async()=>{f.value=!0;try{const a=await(await fetch(`https://ads-service.vercel.app/busqueda/user/?s=${p.value}&page=${d.value}&limit=${h.value}`)).json();a.resp?(c.value=a.data,v.value=a.total):(c.value=[],v.value=0,console.log("no hay nada para mostrar"),y.value=!0)}catch(u){console.error("Error al realizar la b\xFAsqueda:",u)}finally{f.value=!1,m.value[0]=!1}},I=u=>{d.value=u,U()},q=async u=>{_.value=!0,x.value=!0,C.value=u;try{const e=await(await fetch(`https://servicio-de-actividad.vercel.app/recomendadasv2/${u}`)).json();e.resp&&e.data.length>0?i.value=e:(i.value=null,g.value=!0)}catch(a){console.error("Error al obtener detalles del usuario:",a),i.value=null}finally{_.value=!1}};return(u,a)=>(t(),n(V,null,[o("section",null,[s(M,null,{default:r(()=>[s(B,{cols:"7"},{default:r(()=>[s(R,{class:"mt-4",title:"Recompensas",style:{height:"100%"}},{default:r(()=>[s(S,null,{default:r(()=>[o("div",G,[s(F,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),onKeyup:K(w,["enter"]),style:{"max-width":"400px"},label:"Buscar..."},null,8,["modelValue","onKeyup"]),s(O,{loading:m.value[0],disabled:m.value[0],color:"primary",size:"small",icon:"tabler-search",onClick:w},null,8,["loading","disabled"])]),f.value?(t(),n("div",H,"Cargando...")):c.value.length>0?(t(),n("div",J,[s(P,{style:{width:"100%"},class:"text-no-wrap tableNavegacion mb-5 mt-5",hover:"true"},{default:r(()=>[Q,o("tbody",null,[(t(!0),n(V,null,T(c.value,e=>(t(),n("tr",{key:e._id,class:L({"opacity-50":x.value&&C.value===e.wylexId}),onClick:N=>q(e.wylexId)},[o("td",null,k((e.last_name+" "+e.first_name).length>25?(e.last_name+" "+e.first_name).substring(0,25)+"...":e.last_name+" "+e.first_name),1),o("td",Y,k(e.email),1)],10,X))),128))])]),_:1}),v.value>h.value?(t(),$(W,{key:0,modelValue:d.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>d.value=e),I],size:"small","total-visible":5,length:A(E)},null,8,["modelValue","length"])):b("",!0)])):b("",!0)]),_:1})]),_:1})]),_:1}),i.value?(t(),$(B,{key:0,cols:"5"},{default:r(()=>[s(R,{class:"mt-4",title:"Informaci\xF3n detalla",style:{height:"100%"}},{default:r(()=>[s(S,null,{default:r(()=>[_.value?(t(),n("div",Z,"Cargando...")):i.value?(t(),n("div",ee,[o("ul",null,[(t(!0),n(V,null,T(i.value.data,(e,N)=>(t(),n("li",{key:N},[o("p",null,k(e.title),1)]))),128))])])):(t(),n("div",ae,"No se encontro informaci\xF3n"))]),_:1})]),_:1})]),_:1})):b("",!0)]),_:1})]),s(z,{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value=e),location:"top",color:"error"},{default:r(()=>[j(" No se han encontrado resultados ")]),_:1},8,["modelValue"]),s(z,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value=e),location:"top",color:"error"},{default:r(()=>[j(" No se encontro informaci\xF3n ")]),_:1},8,["modelValue"])],64))}};export{oe as default};
