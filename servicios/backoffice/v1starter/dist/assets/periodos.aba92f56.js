import{r as i,bH as Z,o as A,x as k,a as e,w as l,e as m,g,a2 as D,h as y,b as u,p as r,q as n,aW as ee,F as le,C as oe,u as c,t as ae,N as j,b0 as F,aQ as S,aR as U,l as I,m as L,V as $,n as q,i as C,bC as H,bc as te}from"./index.88d3c7f5.js";import{u as se}from"./usePeriodosListStore.6f74ec61.js";import{V as de}from"./VSpacer.2a3e77c9.js";const ue={class:"d-flex align-center flex-wrap gap-2"},ie=u("thead",null,[u("tr",null,[u("th",{scope:"col"},"Periodo"),u("th",{scope:"col"},"Acciones")])],-1),ne={class:"d-flex align-center"},re={class:"d-flex flex-column"},ce={class:"text-base"},me={class:"text-center",style:{width:"5rem"}},Ve={__name:"periodos",setup(fe){const p=i(!1),_=i(!1),V=i(!1),x=se(),T=i([]);i(10);const f=i({_id:"",periodo:""}),v=i({periodo:""}),h=i(""),t=i(""),d=i(""),b=()=>{x.fetchPeriodos().then(o=>{T.value=o.data}).catch(o=>{console.error(o)})};Z(b);const M=o=>{d.value="",t.value="",x.fetchPeriodo(o).then(a=>{f.value._id=a.data._id;let s=a.data.periodo.split(" ");t.value=s[0];let w=s[1];w=="a\xF1o"||w=="a\xF1os"?d.value="a\xF1o(s)":d.value="mes(es)"}).catch(a=>{console.error(a)}),p.value=!0},R=()=>{let o=Number(t.value);o==1&&d.value=="a\xF1o(s)"?(v.value.periodo=t.value+" a\xF1o",f.value.periodo=t.value+" a\xF1o"):o!==1&&d.value=="a\xF1o(s)"?(v.value.periodo=t.value+" a\xF1os",f.value.periodo=t.value+" a\xF1os"):o==1&&d.value=="mes(es)"?(v.value.periodo=t.value+" mes",f.value.periodo=t.value+" mes"):(v.value.periodo=t.value+" meses",f.value.periodo=t.value+" meses"),t.value="",d.value=""},Q=o=>{R(),x.updatePeriodo(o,f.value).catch(a=>{console.error(a)}),window.setTimeout(b,900),p.value=!1},W=()=>{p.value=!1},B=o=>{p.value=o},G=()=>{_.value=!0,t.value="",d.value=""},J=()=>{R(),x.addPeriodo(v.value).catch(o=>{console.log(o)}),v.value.periodo="",_.value=!1,window.setTimeout(b,900)},K=()=>{v.value.periodo="",_.value=!1},E=o=>{_.value=o},O=o=>{h.value=o,V.value=!0},X=()=>{x.deletePeriodo(h.value).catch(o=>{console.error(o)}),window.setTimeout(b,900),h.value="",V.value=!1},Y=()=>{V.value=!1},N=o=>{V.value=o},z=["a\xF1o(s)","mes(es)"];return(o,a)=>{const P=te;return A(),k("section",null,[e($,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(g,{title:"Periodos"},{default:l(()=>[e(D),e(y,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[e(de),u("div",ue,[e(r,{"prepend-icon":"tabler-plus",onClick:G},{default:l(()=>[n(" Agregar un Periodo ")]),_:1})])]),_:1}),e(D),e(ee,{class:"text-no-wrap"},{default:l(()=>[ie,u("tbody",null,[(A(!0),k(le,null,oe(c(T),s=>(A(),k("tr",{key:s._id,style:{height:"3.75rem"}},[u("td",null,[u("div",ne,[u("div",re,[u("h6",ce,ae(s.periodo),1)])])]),u("td",me,[e(r,{icon:"",size:"x-small",color:"default",variant:"text",onClick:w=>M(s._id)},{default:l(()=>[e(j,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(r,{icon:"",size:"x-small",color:"error",variant:"text",onClick:w=>O(s._id)},{default:l(()=>[e(j,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e(D),e(F,{width:o.$vuetify.display.smAndDown?"auto":500,"model-value":c(p),"onUpdate:modelValue":B},{default:l(()=>[e(P,{onClick:a[0]||(a[0]=s=>B(!1))}),e(g,{class:"pa-sm-14 pa-5"},{default:l(()=>[e(S,{class:"text-center"},{default:l(()=>[e(U,{class:"text-h5 mb-3"},{default:l(()=>[n(" Editar el periodo ")]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(I,{class:"mt-6",onSubmit:a[3]||(a[3]=L(s=>Q(c(f)._id),["prevent"]))},{default:l(()=>[e($,null,{default:l(()=>[e(m,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:c(t),"onUpdate:modelValue":a[1]||(a[1]=s=>C(t)?t.value=s:null),label:"Periodo",type:"number"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(H,{modelValue:c(d),"onUpdate:modelValue":a[2]||(a[2]=s=>C(d)?d.value=s:null),items:z},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(r,{type:"submit"},{default:l(()=>[n(" Enviar ")]),_:1}),e(r,{color:"secondary",variant:"tonal",onClick:W},{default:l(()=>[n(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(F,{width:o.$vuetify.display.smAndDown?"auto":500,"model-value":c(_),"onUpdate:modelValue":E},{default:l(()=>[e(P,{onClick:a[4]||(a[4]=s=>E(!1))}),e(g,{class:"pa-sm-14 pa-5"},{default:l(()=>[e(S,{class:"text-center"},{default:l(()=>[e(U,{class:"text-h5 mb-3"},{default:l(()=>[n(" Agregar un nuevo periodo ")]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(I,{class:"mt-6",onSubmit:L(J,["prevent"])},{default:l(()=>[e($,null,{default:l(()=>[e(m,{cols:"12",md:"6"},{default:l(()=>[e(q,{modelValue:c(t),"onUpdate:modelValue":a[5]||(a[5]=s=>C(t)?t.value=s:null),label:"Periodo",type:"number"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(H,{modelValue:c(d),"onUpdate:modelValue":a[6]||(a[6]=s=>C(d)?d.value=s:null),items:z},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(r,{type:"submit"},{default:l(()=>[n(" Aceptar ")]),_:1}),e(r,{color:"secondary",variant:"tonal",onClick:K},{default:l(()=>[n(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(F,{width:o.$vuetify.display.smAndDown?"auto":700,"model-value":c(V),"onUpdate:modelValue":N},{default:l(()=>[e(P,{onClick:a[7]||(a[7]=s=>N(!1))}),e(g,{class:"pa-sm-14 pa-5"},{default:l(()=>[e(S,{class:"text-center"},{default:l(()=>[e(U,{class:"text-h5 mb-3"},{default:l(()=>[n(" \xBFDesea eliminar el periodo? ")]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(m,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(r,{onClick:X},{default:l(()=>[n(" Aceptar ")]),_:1}),e(r,{color:"secondary",variant:"tonal",onClick:Y},{default:l(()=>[n(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])]),_:1})]),_:1})]),_:1})])}}};export{Ve as default};
