import{M as X,r as g,o as d,x as h,a as e,w as a,f as Y,c as _,h as y,q as s,V as k,e as m,p as f,g as E,F as S,C as F,b4 as $,b5 as I,N,t as T,b6 as R,aR as Z,n as c,c7 as P,a3 as B,a2 as ee,aT as le,b3 as H,aM as ae,aW as oe,b as n,bd as te,be as ue}from"./index.88d3c7f5.js";import{V as ne}from"./VTextarea.86fae113.js";const x=C=>(te("data-v-2163220d"),C=C(),ue(),C),se=x(()=>n("h3",null,"Se ha guardado la configuraci\xF3n exitosamente",-1)),de=x(()=>n("h3",{class:"mb-5"},"Configuraci\xF3n de Horarios",-1)),ie=x(()=>n("thead",null,[n("tr",null,[n("th",null,"T\xEDtulo"),n("th",null,"Inicio"),n("th",null,"Fin"),n("th",null,"Acciones")])],-1)),re={__name:"indexnew",setup(C){const V=g(!1),w=g(!1),i=g([]),z=g(0),p=g(""),A=[{title:"Lunes",value:1},{title:"Martes",value:2},{title:"Mi\xE9rcoles",value:3},{title:"Jueves",value:4},{title:"Viernes",value:5},{title:"S\xE1bado",value:6},{title:"Domingo",value:0}];function L(t){const u=t.horarios.map(l=>l.dia);return A.filter(l=>!u.includes(l.value))}function M(t){var u;return((u=A.find(l=>l.value===t))==null?void 0:u.title)||""}function j(){i.value.push({name:`Reproductor ${i.value.length+1}`,iframe:"",forzado:!1,tituloForzado:"",labelForzado:"",horarios:[]}),z.value=i.value.length-1}function O(t){i.value.splice(t,1),z.value>=i.value.length&&(z.value=i.value.length-1)}function J(t){p.value&&(t.horarios.push({dia:p.value,estadoDia:!0,horas:[]}),p.value="")}function q(t,u){t.horarios.splice(u,1)}function G(t,u){t.horarios[u].horas.push({tituloPrograma:"",inicio:"12:00",fin:"13:00"})}function W(t,u,l){t.horarios[u].horas.splice(l,1)}async function K(){V.value=!0;try{const u=await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/suscripciones/player/config2.php?api=web&key=premiunPlayer1")).json();i.value=u.players||[],i.value.forEach(l=>{l.horarios||(l.horarios=[])})}catch(t){console.error("Error al cargar la configuraci\xF3n:",t)}finally{V.value=!1}}async function Q(){V.value=!0;try{const t={players:i.value},l=await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/suscripciones/player/config2.php?api=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"premiunPlayer1",estructura:t})})).json();console.log("result",l),l==="Configuraci\xF3n actualizada correctamente"&&(w.value=!0)}catch(t){console.error("Error al guardar la configuraci\xF3n:",t)}finally{V.value=!1}}return K(),(t,u)=>(d(),h("section",null,[e(Y,{modelValue:w.value,"onUpdate:modelValue":u[0]||(u[0]=l=>w.value=l),color:"success",transition:"scale-transition",location:"top center"},{default:a(()=>[se]),_:1},8,["modelValue"]),e(E,{class:"mt-5",title:"Configuraci\xF3n de Reproductores"},{default:a(()=>[V.value?(d(),_(y,{key:0},{default:a(()=>[s(" Cargando configuraci\xF3n... ")]),_:1})):(d(),_(y,{key:1,class:"py-4 gap-0 w-100"},{default:a(()=>[e(k,null,{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(f,{color:"primary",onClick:j},{default:a(()=>[s(" A\xF1adir Reproductor ")]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(H,{class:"mt-5"},{default:a(()=>[(d(!0),h(S,null,F(i.value,(l,b)=>(d(),_($,{key:b,value:b},{default:a(()=>[e(I,null,{default:a(()=>[e(f,{icon:"",size:"small",color:"error",class:"float-right mb-0",onClick:o=>O(b)},{default:a(()=>[e(N,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"]),s(" "+T(l.name||`Reproductor ${b+1}`),1)]),_:2},1024),e(R,null,{default:a(()=>[e(E,{flat:""},{default:a(()=>[e(Z,null,{default:a(()=>[s(" Configuraci\xF3n de "+T(l.name||`Reproductor ${b+1}`),1)]),_:2},1024),e(y,null,{default:a(()=>[e(k,null,{default:a(()=>[e(m,{cols:"6"},{default:a(()=>[e(c,{class:"mb-5",modelValue:l.name,"onUpdate:modelValue":o=>l.name=o,label:"Nombre del reproductor"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"3"},{default:a(()=>[e(c,{class:"mb-5",modelValue:l.subtituloFecha,"onUpdate:modelValue":o=>l.subtituloFecha=o,label:"Subtitulo Fecha"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"3"},{default:a(()=>[e(c,{class:"mb-5",modelValue:l.subtituloHora,"onUpdate:modelValue":o=>l.subtituloHora=o,label:"Subtitulo Hora"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(ne,{modelValue:l.iframe,"onUpdate:modelValue":o=>l.iframe=o,label:"C\xF3digo iframe",rows:"3"},null,8,["modelValue","onUpdate:modelValue"]),e(P,{modelValue:l.playerActivo,"onUpdate:modelValue":o=>l.playerActivo=o,label:"Activar Player"},null,8,["modelValue","onUpdate:modelValue"]),e(P,{modelValue:l.forzado,"onUpdate:modelValue":o=>l.forzado=o,label:"Activar forzado"},null,8,["modelValue","onUpdate:modelValue"]),l.forzado?(d(),_(c,{key:0,modelValue:l.tituloForzado,"onUpdate:modelValue":o=>l.tituloForzado=o,label:"T\xEDtulo forzado"},null,8,["modelValue","onUpdate:modelValue"])):B("",!0),l.forzado?(d(),_(c,{key:1,modelValue:l.labelForzado,"onUpdate:modelValue":o=>l.labelForzado=o,label:"Label forzado"},null,8,["modelValue","onUpdate:modelValue"])):B("",!0),e(ee,{class:"my-4"}),de,e(k,null,{default:a(()=>[e(m,{cols:"4"},{default:a(()=>[e(le,{modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=o=>p.value=o),items:L(l),label:"D\xEDa de la semana"},null,8,["modelValue","items"])]),_:2},1024),e(m,{cols:"8"},{default:a(()=>[e(f,{color:"primary",onClick:o=>J(l),disabled:!p.value},{default:a(()=>[s(" A\xF1adir d\xEDa ")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024),e(H,null,{default:a(()=>[(d(!0),h(S,null,F(l.horarios,(o,U)=>(d(),_($,{key:U},{default:a(()=>[e(I,null,{default:a(()=>[s(T(M(o.dia))+" ",1),e(ae,{color:o.estadoDia?"success":"warning",class:"ml-2"},{default:a(()=>[s(T(o.estadoDia?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1024),e(R,null,{default:a(()=>[e(P,{modelValue:o.estadoDia,"onUpdate:modelValue":r=>o.estadoDia=r,label:"Activar d\xEDa"},null,8,["modelValue","onUpdate:modelValue"]),e(f,{color:"primary",onClick:r=>G(l,U)},{default:a(()=>[s(" A\xF1adir hora ")]),_:2},1032,["onClick"]),e(f,{color:"error",onClick:r=>q(l,U)},{default:a(()=>[s(" Eliminar d\xEDa ")]),_:2},1032,["onClick"]),e(oe,null,{default:a(()=>[ie,n("tbody",null,[(d(!0),h(S,null,F(o.horas,(r,D)=>(d(),h("tr",{key:D},[n("td",null,[e(c,{modelValue:r.tituloPrograma,"onUpdate:modelValue":v=>r.tituloPrograma=v},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[e(c,{modelValue:r.inicio,"onUpdate:modelValue":v=>r.inicio=v,type:"time"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[e(c,{modelValue:r.fin,"onUpdate:modelValue":v=>r.fin=v,type:"time"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[e(f,{icon:"",small:"",color:"error",onClick:v=>W(l,U,D)},{default:a(()=>[e(N,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),e(k,{class:"m-5 d-inline"},{default:a(()=>[e(m,{cols:"12",class:"text-end"},{default:a(()=>[e(f,{color:"success",onClick:Q,loading:V.value},{default:a(()=>[s(" Guardar Configuraci\xF3n ")]),_:1},8,["loading"])]),_:1})]),_:1})]))}},fe=X(re,[["__scopeId","data-v-2163220d"]]);export{fe as default};
