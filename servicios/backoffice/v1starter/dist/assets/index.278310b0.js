/* empty css              */import{r as n,as as G,v as H,o as u,x as m,a as i,w as t,e as P,V as j,f as K,u as a,q as p,t as d,g as J,aR as S,c as f,aQ as y,aW as T,b as s,F as E,C as M,p as O,N as X,a3 as h,i as F}from"./index.88d3c7f5.js";import{V as q}from"./VPagination.9412c3b8.js";const Y=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"Usuario"),s("th",{scope:"col"},"Desaf\xEDo"),s("th",{scope:"col"},"Estado")])],-1),Z=["onClick"],ee={class:"text-medium-emphasis"},ae={class:"d-flex align-center gap-4 mt-6 ml-4 mb-2",style:{height:"20px",width:"200px"}},se={key:1,class:"ml-3"},te={class:"text-medium-emphasis"},oe={class:"text-medium-emphasis"},le=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"Desaf\xEDo"),s("th",{scope:"col"},"Estado")])],-1),ne={class:"text-medium-emphasis"},ie={class:"text-medium-emphasis"},fe={__name:"index",setup(ce){const _=n([]),r=n(!1);n("");const D=n(!1),$=n(1),v=n(1),g=n({message:"Datos guardados",type:"success",model:!1});async function I(l=1,o=10){try{r.value=!0;const c=await(await fetch(`https://servicio-niveles-puntuacion.vercel.app/historico-desafio-logrados/all?page=${l}&limit=${o}`)).json();_.value=c.data,$.value=Math.ceil(c.total/c.limit),r.value=!1}catch(e){console.error(e.message)}}G(async()=>{r.value=!0,await I(),r.value=!1});const w=n([]),x=n(!1),C=n(!1),V=n([]),k=n({nombre:"",id:0}),N=n(!1),B=n(1),U=n(1);async function z(l){if(!l)return null;const e=await(await fetch("https://data.mongodb-api.com/app/backoffice1-usyys/endpoint/id?id="+l)).json();k.value.nombre=e.first_name+" "+e.last_name,k.value.id=l,await L(l)}async function L(l,o=1,e=10){try{x.value=!0;const b=await(await fetch(`https://servicio-niveles-puntuacion.vercel.app/historico-desafio-logrados/userid?userId=${l}&page=${o}&Limit=${e}`)).json();V.value=b.data,B.value=Math.ceil(b.total/b.limit),C.value=!0,x.value=!1}catch(c){console.error(c.message),x.value=!1,C.value=!1}}const Q=async()=>{N.value=!0,await L(k.value.id,U.value),N.value=!1},W=async()=>{D.value=!0,w.value=[],await I(v.value),D.value=!1};async function A(l,o){if(!l)return null;const c=await(await fetch("https://data.mongodb-api.com/app/backoffice1-usyys/endpoint/id?id="+l)).json();_.value[o].nombre=c.first_name+" "+c.last_name,w.value.push(o)}const R=20;return H(()=>{const l=(v.value-1)*R,o=l+R;return dataTrivias.value.slice(l,o)}),(l,o)=>(u(),m("section",null,[i(j,null,{default:t(()=>[i(P,{class:"mt-6",cols:"12",md:"12",lg:"12"},{default:t(()=>[i(j,null,{default:t(()=>[i(P,{cols:"12",sm:"12",lg:"12"},{default:t(()=>[i(K,{modelValue:a(g).model,"onUpdate:modelValue":o[0]||(o[0]=e=>a(g).model=e),location:"top end",variant:"flat",timeout:a(g).timeout||2e3,color:a(g).type},{default:t(()=>[p(d(a(g).message),1)]),_:1},8,["modelValue","timeout","color"]),i(J,{class:"mt-4"},{default:t(()=>[i(S,{class:"pt-4 pl-6"},{default:t(()=>[p("Listado hist\xF3rico de desaf\xEDos")]),_:1}),a(r)?(u(),f(y,{key:0},{default:t(()=>[p(" Cargando datos... ")]),_:1})):!a(r)&&a(_).length>0?(u(),f(y,{key:1},{default:t(()=>[i(T,{class:"text-no-wrap tableNavegacion mb-5",hover:"true"},{default:t(()=>[Y,s("tbody",null,[(u(!0),m(E,null,M(a(_),(e,c)=>(u(),m("tr",{onClick:b=>z(e.userId),class:"clickable"},[s("td",ee,[s("div",ae,[s("div",null,[s("h4",null,d(e.userId),1)]),s("div",null,[a(w).includes(c)?h("",!0):(u(),f(O,{key:0,variant:"text",icon:"",onClick:b=>A(e.userId,c)},{default:t(()=>[i(X,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])),e.nombre?(u(),m("h4",se,"| \xA0\xA0\xA0 "+d(e.nombre),1)):h("",!0)])])]),s("td",te,d(e.idDesafio),1),s("td",oe,d(e.estadoDesafio),1)],8,Z))),256))])]),_:1}),i(q,{disabled:a(D),modelValue:a(v),"onUpdate:modelValue":o[1]||(o[1]=e=>F(v)?v.value=e:null),length:a($),class:"mt-4",onClick:W},null,8,["disabled","modelValue","length"])]),_:1})):h("",!0),!a(r)&&a(_).length===0?(u(),f(y,{key:2},{default:t(()=>[p(" No se han encontrado datos ")]),_:1})):h("",!0)]),_:1})]),_:1}),a(C)==!0?(u(),f(P,{key:0,cols:"12",sm:"12",lg:"12"},{default:t(()=>[i(J,null,{default:t(()=>[i(S,{class:"pt-4 pl-6"},{default:t(()=>[p("Desaf\xEDos de "+d(a(k).nombre),1)]),_:1}),a(V).length>0?(u(),f(y,{key:0},{default:t(()=>[i(T,{class:"text-no-wrap tableNavegacion mb-5"},{default:t(()=>[le,s("tbody",null,[(u(!0),m(E,null,M(a(V),(e,c)=>(u(),m("tr",null,[s("td",ne,d(e.idDesafio),1),s("td",ie,d(e.estadoDesafio),1)]))),256))])]),_:1}),i(q,{disabled:a(N),modelValue:a(U),"onUpdate:modelValue":o[2]||(o[2]=e=>F(U)?U.value=e:null),length:a(B),class:"mt-4",onClick:Q},null,8,["disabled","modelValue","length"])]),_:1})):a(V).length==0?(u(),f(y,{key:1},{default:t(()=>[p(" No se han encontrado datos ")]),_:1})):h("",!0)]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1})]))}};export{fe as default};
