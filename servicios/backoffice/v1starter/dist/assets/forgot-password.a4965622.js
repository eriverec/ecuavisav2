import{r as l,o as T,c as C,w as s,V as g,a,b as o,d as _,u as t,e as m,t as v,i as p,f as V,g as F,h as b,j as I,k as N,l as P,m as R,n as B,p as D,q as L}from"./index.88d3c7f5.js";import{u as w,b as k,m as M,a as U}from"./route-block.4e37cd7f.js";import{r as E,e as q}from"./validators.b5f8ddc5.js";const O="/assets/auth-v2-forgot-password-illustration-dark.ade65f2e.png",z="/assets/auth-v2-forgot-password-illustration-light.1ef614ab.png";const G={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},J={class:"d-flex align-center justify-center w-100 h-100"},A=o("h5",{class:"text-h5 font-weight-semibold mb-1"}," \xBFOlvid\xF3 su contrase\xF1a? \u{1F512} ",-1),H=o("p",{class:"mb-0"}," Introduzca su email y le enviaremos instrucciones para restablecer su contrase\xF1a ",-1),K={__name:"forgot-password",setup(Q){const x=w(z,O),y=w(U,M),n=l(""),c=l(!1),r=l(!1),h=l(),i=l(""),f=l(!1);async function j(){if(i.value){f.value=!0;const u=JSON.stringify({email:i.value});await fetch("https://gestores-flax.vercel.app/forgotPassword",{method:"PUT",headers:{"Content-Type":"application/json"},body:u}).then(e=>e.json()).then(e=>{if(e.mensaje=="Siga las instrucciones enviadas a su email")return n.value=e.mensaje,c.value=!0,!0;if(e.error=="El email no existe")return r.value=!0,n.value=e.error,!1}).catch(e=>{console.log(e)}),f.value=!1}else r.value=!0,n.value="Debe ingresar un email"}const S=()=>{var u;(u=h.value)==null||u.validate().then(({valid:e})=>{e&&j()})};return(u,e)=>(T(),C(g,{class:"auth-wrapper","no-gutters":""},{default:s(()=>[a(m,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[o("div",G,[o("div",J,[a(_,{"max-width":"368",src:t(x),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),a(_,{class:"auth-footer-mask",src:t(y)},null,8,["src"])])]),_:1}),a(V,{modelValue:t(c),"onUpdate:modelValue":e[0]||(e[0]=d=>p(c)?c.value=d:null),color:"primary",transition:"scale-transition",location:"top center"},{default:s(()=>[o("h3",null,v(t(n)),1)]),_:1},8,["modelValue"]),a(V,{modelValue:t(r),"onUpdate:modelValue":e[1]||(e[1]=d=>p(r)?r.value=d:null),color:"error",transition:"scale-transition",location:"top center"},{default:s(()=>[o("h3",null,v(t(n)),1)]),_:1},8,["modelValue"]),a(m,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:s(()=>[a(F,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[a(b,null,{default:s(()=>[a(t(I),{nodes:t(N).app.logo,class:"mb-6"},null,8,["nodes"]),A,H]),_:1}),a(b,null,{default:s(()=>[a(t(P),{ref_key:"refVForm",ref:h,onSubmit:R(S,["prevent"])},{default:s(()=>[a(g,null,{default:s(()=>[a(m,{cols:"12"},{default:s(()=>[a(B,{modelValue:t(i),"onUpdate:modelValue":e[2]||(e[2]=d=>p(i)?i.value=d:null),label:"Email",type:"email",rules:[t(E),t(q)]},null,8,["modelValue","rules"])]),_:1}),a(m,{cols:"12"},{default:s(()=>[a(D,{block:"",type:"submit",loading:t(f)},{default:s(()=>[L(" Enviar enlace de restablecimiento ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof k=="function"&&k(K);export{K as default};
