import{r as l,v as O,o as t,x as o,a as n,w as u,e as B,g as q,L as $,h as z,b as a,n as P,b1 as D,p as L,aW as E,F,C as S,t as f,c as T,u as A,a3 as x,V as M}from"./index.88d3c7f5.js";/* empty css              */import{V as W}from"./VPagination.9412c3b8.js";const G={class:"d-flex gap-4"},H={key:0,style:{height:"400px"},class:"d-flex align-center justify-center"},J={key:1},Q=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"USUARIO"),a("th",{scope:"col"},"CORREO")])],-1),X=["onClick"],Y={class:"text-medium-emphasis"},Z={key:2,class:"mt-4"},ee={key:0,class:"ml-4 mb-4"},ae={key:1},le=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Nombre de trivia"),a("th",{scope:"col"},"Respuesta")])],-1),te={class:"text-medium-emphasis"},se={class:"text-medium-emphasis"},oe={key:2,class:"ml-4 mb-4"},ie={__name:"trivia_usuario_busqueda",setup(ne){const g=l(""),i=l([]),y=l(!1),b=l(!1),d=l(1),m=l(10),v=l(0),c=l(null),p=l([]),j=O(()=>Math.ceil(v.value/m.value)),C=l(!1),w=l(null),U=l(""),V=l(!1),h=l(!1),N=()=>{h.value=!0,V.value=!1,c.value=null,p.value[0]=!0,d.value=1,R()},R=async()=>{y.value=!0;try{const s=await(await fetch(`https://ads-service.vercel.app/busqueda/user/?s=${g.value}&page=${d.value}&limit=${m.value}`)).json();s.resp?(i.value=s.data,v.value=s.total):(i.value=[],v.value=0,console.log("no hay nada para mostrar"))}catch(r){console.error("Error al realizar la b\xFAsqueda:",r)}finally{y.value=!1,p.value[0]=!1}},I=r=>{d.value=r,R()},K=async(r,s,e)=>{U.value=(e+" "+s).length>25?(e+" "+s).substring(0,25)+"...":e+" "+s,V.value=!0,b.value=!0,C.value=!0,w.value=r;try{const k=await(await fetch(`https://ecuavisa-desafio-trivias.vercel.app/triviaUsuario/get/usuario/${r}`)).json();k.resp&&k.data.length>0?c.value=k:c.value=null}catch(_){console.error("Error al obtener detalles del usuario:",_),c.value=null}finally{b.value=!1}};return(r,s)=>(t(),o("section",null,[n(M,null,{default:u(()=>[n(B,{cols:"7",class:"container"},{default:u(()=>[n(q,{class:$(["mt-4 px-2",v.value>m.value?"":"pb-4"]),title:"Buscar respuestas por usuario"},{default:u(()=>[n(z,null,{default:u(()=>[a("div",G,[n(P,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=e=>g.value=e),onKeyup:D(N,["enter"]),style:{"max-width":"400px"},label:"Buscar..."},null,8,["modelValue","onKeyup"]),n(L,{loading:p.value[0],disabled:p.value[0],color:"primary",size:"small",icon:"tabler-search",onClick:N},null,8,["loading","disabled"])]),h.value&&y.value?(t(),o("div",H,"Cargando...")):h.value&&i.value.length>0?(t(),o("div",J,[n(E,{style:{width:"100%"},class:"text-no-wrap tableNavegacion mb-5 mt-5",hover:"true"},{default:u(()=>[Q,a("tbody",null,[(t(!0),o(F,null,S(i.value,e=>(t(),o("tr",{key:e._id,class:$([{"opacity-50":C.value&&w.value===e.wylexId},"clickable"]),onClick:_=>K(e.wylexId,e.first_name,e.last_name)},[a("td",null,f((e.last_name+" "+e.first_name).length>25?(e.last_name+" "+e.first_name).substring(0,25)+"...":e.last_name+" "+e.first_name),1),a("td",Y,f(e.email),1)],10,X))),128))])]),_:1}),v.value>m.value?(t(),T(W,{key:0,modelValue:d.value,"onUpdate:modelValue":[s[1]||(s[1]=e=>d.value=e),I],size:"small","total-visible":5,length:A(j),class:"mb-4"},null,8,["modelValue","length"])):x("",!0)])):h.value&&i.value.length===0?(t(),o("div",Z,"No se han encontrado datos.")):x("",!0)]),_:1})]),_:1},8,["class"])]),_:1}),V.value?(t(),T(B,{key:0,cols:"5",class:"container"},{default:u(()=>[n(q,{class:"mt-4",title:c.value?"Resultados de "+U.value:"Resultados"},{default:u(()=>[n(z,null,{default:u(()=>[b.value?(t(),o("div",ee,"Cargando...")):c.value?(t(),o("div",ae,[n(E,{class:"text-no-wrap tableNavegacion mb-5"},{default:u(()=>[le,a("tbody",null,[(t(!0),o(F,null,S(c.value.data,(e,_)=>(t(),o("tr",{key:_},[a("td",te,f(e.nombre),1),a("td",se,f(e.respuesta),1)]))),128))])]),_:1})])):(t(),o("div",oe,"No se encontro informaci\xF3n"))]),_:1})]),_:1},8,["title"])]),_:1})):x("",!0)]),_:1})]))}};export{ie as default};
