import{M as ee,r as o,as as ae,v as te,o as p,x as T,a as e,w as a,q as r,t as x,u as s,f as O,e as h,V as j,g as P,aR as F,aQ as w,p as _,c as E,aW as le,b as u,F as se,C as oe,N as J,i as C,a3 as L,h as U,l as ne,m as ie,n as R,X as ue,d as de,b0 as M,bc as re,bd as ce,be as me}from"./index.88d3c7f5.js";/* empty css              */import{V as ve}from"./VPagination.9412c3b8.js";const fe=k=>(ce("data-v-be6d910e"),k=k(),me(),k),pe=fe(()=>u("thead",null,[u("tr",null,[u("th",{scope:"col"},"Titulo"),u("th",{scope:"col"},"Imagen"),u("th",{scope:"col"},"Acci\xF3n")])],-1)),ge={class:"text-medium-emphasis"},_e={class:"d-flex align-center gap-4 mt-6 ml-4 mb-2",style:{height:"20px"}},Ve={class:"text-medium-emphasis"},ye=["src","alt"],be={class:"text-medium-emphasis"},xe={key:1},he={__name:"index",setup(k){const V=o([]),g=o(!1);o("");const N=o(!1),A=o(1),y=o(1),n=o({message:"Datos guardados",type:"success",model:!1});async function D(i=1,l=5){try{g.value=!0;const t=await(await fetch(`https://servicio-niveles-puntuacion.vercel.app/categoria/all?page=${i}&limit=${l}`)).json();V.value=t.data,console.log(V.value),A.value=Math.ceil(t.total/t.limit),g.value=!1}catch(d){console.error(d.message)}}ae(async()=>{g.value=!0,await D(),g.value=!1});const q=o([]);o(!1),o(!1),o([]),o({nombre:"",id:0}),o(!1),o(1),o(1);const H=async()=>{N.value=!0,q.value=[],await D(y.value),N.value=!1},z=5;te(()=>{const i=(y.value-1)*z,l=i+z;return dataTrivias.value.slice(i,l)});const m=o(!1),b=o(""),$=o(""),v=o("");o(""),o("");const c=o("");o("");async function G(i){m.value=!0,b.value="editar";const t=(await(await fetch("https://servicio-niveles-puntuacion.vercel.app/categoria/get/"+i)).json()).data;$.value=t._id,v.value=t.title,c.value=t.image}async function Q(){b.value="agregar",v.value="",c.value="",m.value=!0}async function W(){var i=new Headers;if(i.append("Content-Type","application/json"),b.value==="agregar"){let t={title:v.value,image:c.value};var l=JSON.stringify(t),d={method:"POST",headers:i,body:l,redirect:"follow"};const S=await(await fetch("https://servicio-niveles-puntuacion.vercel.app/categoria/create",d)).json();S.resp?n.value={message:"Creado correctamente",type:"success",model:!0}:n.value={message:S.mensaje,type:"error",model:!0}}else if(b.value==="editar"){let t={id:$.value,title:v.value,image:c.value};var l=JSON.stringify(t),d={method:"POST",headers:i,body:l,redirect:"follow"};const I=await(await fetch(`https://servicio-niveles-puntuacion.vercel.app/categoria/update/${$.value}`,d)).json();console.log(I),I.resp?n.value={message:"Editado correctamente",type:"success",model:!0}:n.value={message:I.mensaje,type:"error",model:!0}}m.value=!1,await D()}function X(){m.value=!1,v.value="",c.value=""}const f=o(!1),B=o("");function K(i){f.value=!0,B.value=i}async function Y(){var i={method:"DELETE",redirect:"follow"};const d=await(await fetch("https://servicio-niveles-puntuacion.vercel.app/categoria/delete/"+B.value,i)).json();d.resp?n.value={message:"Eliminado correctamente",type:"success",model:!0}:n.value={message:d.mensaje,type:"error",model:!0},await D(),f.value=!1}return(i,l)=>{const d=re;return p(),T("section",null,[e(O,{modelValue:s(n).model,"onUpdate:modelValue":l[0]||(l[0]=t=>s(n).model=t),location:"top end",variant:"flat",color:s(n).type},{default:a(()=>[r(x(s(n).message),1)]),_:1},8,["modelValue","color"]),e(j,null,{default:a(()=>[e(h,{class:"",cols:"12",md:"12",lg:"12"},{default:a(()=>[e(j,null,{default:a(()=>[e(h,{cols:"12",sm:"12",lg:"12"},{default:a(()=>[e(O,{modelValue:s(n).model,"onUpdate:modelValue":l[1]||(l[1]=t=>s(n).model=t),location:"top end",variant:"flat",timeout:s(n).timeout||2e3,color:s(n).type},{default:a(()=>[r(x(s(n).message),1)]),_:1},8,["modelValue","timeout","color"]),e(P,{class:"mt-4"},{default:a(()=>[e(F,{class:"pt-4 pl-6"},{default:a(()=>[r("Listado Categorias")]),_:1}),e(w,null,{default:a(()=>[e(_,{"prepend-icon":"tabler-user-plus",color:"success",variant:"tonal",class:"ml-auto",onClick:Q},{default:a(()=>[r("Agregar")]),_:1})]),_:1}),s(g)?(p(),E(w,{key:0},{default:a(()=>[r(" Cargando datos... ")]),_:1})):!s(g)&&s(V).length>0?(p(),E(w,{key:1},{default:a(()=>[e(le,{class:"text-no-wrap tableNavegacion mb-5",hover:"true"},{default:a(()=>[pe,u("tbody",null,[(p(!0),T(se,null,oe(s(V),(t,Z)=>(p(),T("tr",null,[u("td",ge,[u("div",_e,[u("div",null,[u("h4",null,x(t.title),1)])])]),u("td",Ve,[u("img",{width:"50",src:`${t.image}`,alt:`${t.title}`},null,8,ye)]),u("td",be,[u("div",null,[e(_,{icon:"",size:"x-small",color:"default",variant:"text",onClick:S=>G(t._id)},{default:a(()=>[e(J,{size:"22",icon:"tabler-pencil"})]),_:2},1032,["onClick"]),e(_,{icon:"",size:"x-small",color:"default",variant:"text",onClick:S=>K(t._id)},{default:a(()=>[e(J,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])]),r(" "+x(t.estadoDesafio),1)])]))),256))])]),_:1}),e(ve,{size:"small",disabled:s(N),modelValue:s(y),"onUpdate:modelValue":l[2]||(l[2]=t=>C(y)?y.value=t:null),length:s(A),class:"mt-4",onClick:H},null,8,["disabled","modelValue","length"])]),_:1})):L("",!0),!s(g)&&s(V).length===0?(p(),E(w,{key:2},{default:a(()=>[r(" No se han encontrado datos ")]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{modelValue:s(m),"onUpdate:modelValue":l[6]||(l[6]=t=>C(m)?m.value=t:null),persistent:"","max-width":"600"},{default:a(()=>[e(d,{onClick:l[3]||(l[3]=t=>m.value=!s(m))}),e(P,{class:"pa-sm-14 pa-5"},{default:a(()=>[e(w,{class:"text-center"},{default:a(()=>[e(F,{class:"text-h5 mb-3"},{default:a(()=>[r(x(s(b)==="agregar"?"Agregar una categoria":"Editar "+s(v)),1)]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(ne,{class:"mt-6",onSubmit:ie(W,["prevent"])},{default:a(()=>[e(j,{class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(j,null,{default:a(()=>[e(h,{cols:"6"},{default:a(()=>[e(R,{modelValue:s(v),"onUpdate:modelValue":l[4]||(l[4]=t=>C(v)?v.value=t:null),label:"Nombre"},null,8,["modelValue"]),e(R,{class:"mt-4",modelValue:s(c),"onUpdate:modelValue":l[5]||(l[5]=t=>C(c)?c.value=t:null),label:"URL de la Im\xE1gen"},null,8,["modelValue"])]),_:1}),e(h,{cols:"6"},{default:a(()=>[e(ue,{rounded:"sm",class:"img-e-a"},{default:a(()=>[s(c)?(p(),E(de,{key:0,src:s(c)},null,8,["src"])):(p(),T("div",xe,"Previsualizar la Im\xE1gen"))]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(_,{type:"submit"},{default:a(()=>[r(" Guardar ")]),_:1}),e(_,{color:"secondary",variant:"tonal",onClick:X},{default:a(()=>[r(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:s(f),"onUpdate:modelValue":l[9]||(l[9]=t=>C(f)?f.value=t:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(d,{onClick:l[7]||(l[7]=t=>f.value=!s(f))}),e(P,{title:"Eliminar registro"},{default:a(()=>[e(U,null,{default:a(()=>[r(" \xBFDesea eliminar el registro? ")]),_:1}),e(U,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(_,{color:"secondary",variant:"tonal",onClick:l[8]||(l[8]=t=>f.value=!1)},{default:a(()=>[r(" No, Cerrar ")]),_:1}),e(_,{onClick:Y},{default:a(()=>[r(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Se=ee(he,[["__scopeId","data-v-be6d910e"]]);export{Se as default};
