import{r as p,as as S,v as j,o as v,x as h,a,w as t,e as C,b7 as F,u as e,i as y,b8 as T,q as d,b9 as K,ba as N,V as U,f as L,t as g,g as W,aR as $,aQ as V,b as i,n as D,b1 as J,p as b,c as w,aW as M,F as Q,C as A,N as G,a3 as P}from"./index.88d3c7f5.js";import H from"./trivia_usuario_busqueda.1b136ddf.js";/* empty css              */import"./VPagination.9412c3b8.js";const O={class:"d-flex gap-4 mt-2"},X=i("thead",null,[i("tr",null,[i("th",{scope:"col"},"Nombre"),i("th",{scope:"col"},"Id de regla"),i("th",{scope:"col"},"Endpoint")])],-1),Y={class:"text-medium-emphasis"},Z={class:"text-medium-emphasis"},aa={class:"text-medium-emphasis"},ea={class:"d-flex align-center justify-space-between botonescurrentPage"},ra={__name:"vista",setup(ta){const u=p([]),s=p(!1),c=p("tab-vista"),f=p(""),m=p({message:"Datos guardados",type:"success",model:!1});async function x(){try{s.value=!0;const l=await(await fetch("https://ecuavisa-desafio-trivias.vercel.app/trivia/all/get?limit=100")).json();u.value=l.data,s.value=!1}catch(o){console.error(o.message)}}S(async()=>{s.value=!0,await x(),s.value=!1});function B(o){navigator.clipboard.writeText("https://ecuavisa-desafio-trivias.vercel.app/trivia/get/"+o),m.value={message:"Enlace copiado en el portapapeles",timeout:1e3,type:"success",model:!0}}const q=async()=>{f.value="",await x()},k=()=>{r.value=1,z()},z=async()=>{s.value=!0;try{const l=await(await fetch(`https://ecuavisa-desafio-trivias.vercel.app/trivia/search/name?nombre=${f.value}`)).json();l.resp?u.value=l.data:(u.value=[],console.log("no hay nada para mostrar"))}catch(o){console.error("Error al realizar la b\xFAsqueda:",o)}finally{s.value=!1}},_=20,r=p(1),E=j(()=>{const o=(r.value-1)*_,l=o+_;return u.value.slice(o,l)}),I=()=>{r.value*_<u.value.length&&r.value++},R=()=>{r.value>1&&r.value--};return(o,l)=>(v(),h("section",null,[a(U,null,{default:t(()=>[a(C,{class:"mt-6",cols:"12",md:"12",lg:"12"},{default:t(()=>[a(F,{modelValue:e(c),"onUpdate:modelValue":l[0]||(l[0]=n=>y(c)?c.value=n:null),class:"v-tabs-pill"},{default:t(()=>[a(T,{value:"tab-vista"},{default:t(()=>[d("Vista")]),_:1}),a(T,{value:"tab-busquedaUsuario"},{default:t(()=>[d("Usuarios")]),_:1})]),_:1},8,["modelValue"]),a(K,{modelValue:e(c),"onUpdate:modelValue":l[3]||(l[3]=n=>y(c)?c.value=n:null)},{default:t(()=>[a(N,{value:"tab-vista"},{default:t(()=>[a(U,null,{default:t(()=>[a(C,{cols:"12",sm:"12",lg:"12"},{default:t(()=>[a(L,{modelValue:e(m).model,"onUpdate:modelValue":l[1]||(l[1]=n=>e(m).model=n),location:"top end",variant:"flat",timeout:e(m).timeout||2e3,color:e(m).type},{default:t(()=>[d(g(e(m).message),1)]),_:1},8,["modelValue","timeout","color"]),a(W,{class:"mt-4"},{default:t(()=>[a($,{class:"pt-4 pl-6"},{default:t(()=>[d("Listado de trivias")]),_:1}),a(V,null,{default:t(()=>[i("div",O,[a(D,{modelValue:e(f),"onUpdate:modelValue":l[2]||(l[2]=n=>y(f)?f.value=n:null),onKeyup:J(k,["enter"]),style:{"max-width":"400px"},label:"Buscar..."},null,8,["modelValue","onKeyup"]),a(b,{loading:e(s),disabled:e(s),color:"primary",size:"small",icon:"tabler-search",onClick:k},null,8,["loading","disabled"]),a(b,{disabled:e(s),color:"primary",size:"small",icon:"tabler-refresh",onClick:q},null,8,["disabled"])])]),_:1}),e(s)?(v(),w(V,{key:0},{default:t(()=>[d(" Cargando datos... ")]),_:1})):!e(s)&&e(u).length>0?(v(),w(V,{key:1},{default:t(()=>[a(M,{class:"text-no-wrap tableNavegacion mb-5"},{default:t(()=>[X,i("tbody",null,[(v(!0),h(Q,null,A(e(E),n=>(v(),h("tr",null,[i("td",Y,g(n.nombre),1),i("td",Z,g(n.idRegla),1),i("td",aa,[a(b,{variant:"text",icon:"",onClick:la=>B(n._id)},{default:t(()=>[a(G,{size:"22",icon:"tabler-clipboard"})]),_:2},1032,["onClick"])])]))),256))])]),_:1}),i("div",ea,[a(b,{icon:"tabler-arrow-big-left-lines",onClick:R,disabled:e(r)===1},null,8,["disabled"]),d(" P\xE1gina "+g(e(r))+" ",1),a(b,{icon:"tabler-arrow-big-right-lines",onClick:I,disabled:e(r)*_>=e(u).length},null,8,["disabled"])])]),_:1})):P("",!0),!e(s)&&e(u).length===0?(v(),w(V,{key:2},{default:t(()=>[d(" No se han encontrado datos ")]),_:1})):P("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),a(N,{value:"tab-busquedaUsuario"},{default:t(()=>[a(H)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{ra as default};
