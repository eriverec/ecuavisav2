import{r as n,as as Ze,v as el,o as v,x as f,a as e,w as t,q as V,t as Q,u as o,f as ll,e as i,g as ce,aR as we,h as te,b as c,p as G,c as oe,aQ as me,aW as al,F as Y,C as H,N as Pe,V as b,L as tl,n as P,i as r,a2 as qe,aT as X,a3 as xe,b0 as ke,bc as ol,aX as sl}from"./index.88d3c7f5.js";import{i as nl,l as Ie}from"./vue3-form-wizard.es.668eae1f.js";/* empty css              */import{V as K,a as Z}from"./VRadioGroup.4905b4ef.js";import{V as Ue}from"./VTextarea.86fae113.js";import{V as ul}from"./VCheckbox.50e352e3.js";const il={class:"d-flex flex-wrap gap-4 mt-10"},rl=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Nombre"),c("th",{scope:"col"},"C\xF3digo interno"),c("th",{scope:"col"},"Acciones")])],-1),dl={class:"text-medium-emphasis"},cl={class:"text-medium-emphasis"},ml={class:"text-medium-emphasis"},vl={class:"d-flex align-center justify-space-between botonescurrentPage"},pl=c("span",{class:"mt-4"},"Pagos",-1),fl=c("span",{class:"mt-4"},"Otras configuraci\xF3nes",-1),gl=c("span",null,"Visibilidad",-1),Vl=c("span",null,"\xBFEs un paquete internacional?",-1),bl=c("span",null,"Cambio de plan",-1),_l=c("span",null,"\xBFEs un paquete de cortes\xEDa?",-1),Cl=c("span",null,"\xBFSolicitar direcci\xF3n durante la compra?",-1),yl=c("p",null," Caracter\xEDsticas ",-1),wl={key:0,class:"loader"},jl={__name:"index",setup(Pl){const ee=n([]),se=n([]),ne=n(!1),De=n([]),ve=n([]),pe=n([]),fe=n([]),q=n(null),_="https://ecuavisa-suscripciones.vercel.app";async function ue(){try{ne.value=!0;const l=await(await fetch(_+"/paquete")).json();ee.value=l.data,ne.value=!1}catch(u){console.error(u.message)}}async function ie(){try{const l=await(await fetch(_+"/caracteristica")).json();se.value=l.data}catch(u){console.error(u.message)}}async function ge(){try{const l=await(await fetch(_+"/grupo")).json();De.value=l.data;let d=[];for(let s of l.data){let a={title:s.nombre,value:s._id};d.push(a)}d.push({title:"Sin grupo",value:"no aplica"}),ve.value=d}catch(u){console.error(u.message)}}async function Se(){try{const l=await(await fetch(_+"/sitio/all")).json();fe.value=l.data;let d=[];for(let s of l.data){let a={title:s.nombre,value:s._id};d.push(a)}pe.value=d}catch(u){console.error(u.message)}}Ze(async()=>{await ue(),await Se()});const le=8,C=n(1),je=el(()=>{const u=(C.value-1)*le,l=u+le;return ee.value.slice(u,l)}),Ne=()=>{C.value*le<ee.value.length&&C.value++},Te=()=>{C.value>1&&C.value--},he=["No aplica","Recomendado","Mejor precio","Oferta"],Ae=["No aplica","Diaria","Mensual","Bimestral","Trimestral","Cuatrimestral","5 Meses","Semestral","8 Meses","Anual","18 Meses","Bianual"],Be=[{title:"Pago \xFAnico",value:"pago unico"},{title:"Recursivo",value:"Recursivo"}],Ee=["Visible","Oculto"],Fe=[{title:"Bloquear cambio de plan",value:"bloquear"},{title:"Permitir cambio de plan",value:"permitir"}],Oe=[{title:"Si",value:!0},{title:"No",value:!1}],Re=[{title:"Si",value:!0},{title:"No",value:!1}],Je=[{title:"Solicitar direcci\xF3n completa",value:"completa"},{title:"Solicitar solamente localidad",value:"local"},{title:"No solicitar",value:"no solicitar"}],x=n(!1),W=n(""),g=n(""),y=n(""),k=n(""),I=n(0),U=n(""),D=n(0),S=n(0),j=n(""),N=n("no aplica"),T=n(""),h=n(""),A=n(""),ae=n(""),B=n("No aplica"),E=n(""),F=n(""),O=n(""),R=n(""),J=n(!1),M=n(!1),L=n(""),$=n(""),z=n([]),p=n({message:"Datos guardados",type:"success",model:!1}),Ve=n(!1),re=n([]);function be(u){return fe.value.find(d=>d._id==u)}function Me(){let u=Array.from(se.value),l=[];for(const d of u){let s={title:d.nombre,value:d._id};l.push(s)}re.value=l}function de(){g.value="",y.value="",k.value="",I.value=null,U.value="",D.value=null,S.value=null,j.value="",N.value="no aplica",T.value="",h.value="",A.value="",ae.value="",B.value="No aplica",E.value="",z.value=[],F.value="",q.value="",O.value="Visible",R.value="bloquear",J.value=!1,M.value="No",L.value="no solicitar",$.value=""}async function Le(u,l){return l==0&&u==!0&&re.value.length<1&&(se.value.length<1&&await ie(),Me()),!1}async function $e(u,l){return!1}async function ze(u){Ve.value=u}async function Ge(){let u=g.value;var l=y.value;return!u||u==""?(p.value={message:"Debe a\xF1adir un nombre",type:"error",model:!0},!1):!l||l==""?(p.value={message:"Debe a\xF1adir un c\xF3digo interno",type:"error",model:!0},!1):!0}function Ye(){de(),x.value=!1}async function He(){de(),W.value="add",await ie(),await ge(),x.value=!0}const _e=n("");async function We(u){de(),W.value="edit",await ie(),await ge();const s=(await(await fetch(_+"/paquete/"+u)).json()).data;_e.value=s._id,g.value=s.nombre,y.value=s.codigoInterno,k.value=s.tipoPago,I.value=s.precio,U.value=s.periodicidad,D.value=s.ciclosPromocion,S.value=s.precioPromocional,j.value=s.descripcionPrecios,N.value=s.grupo,T.value=s.sitio._id,h.value=s.activoDesde,A.value=s.activoHasta,ae.value=s.color,B.value=s.destaque,E.value=s.clasesCss,z.value=s.caracteristicas,F.value=s.url_imagen,q.value=s.url,O.value=s.visibilidad,R.value=s.cambioPlan,J.value=s.paqueteCortesia,M.value=s.paqueteInternacional,L.value=s.direccionCompra,$.value=s.descripcionCustom,x.value=!0}async function Qe(){try{var u=new Headers;if(u.append("Content-Type","application/json"),W.value==="add"){let s={nombre:g.value,codigoInterno:y.value,tipoPago:k.value,precio:I.value,periodicidad:U.value,ciclosPromocion:D.value,precioPromocional:S.value,descripcionPrecios:j.value,grupo:N.value,sitio:be(T.value),activoDesde:h.value,activoHasta:A.value,color:ae.value,destaque:B.value,clasesCss:E.value,caracteristicas:z.value,url_imagen:F.value,url:q.value,visibilidad:O.value,cambioPlan:R.value,paqueteCortesia:J.value,paqueteInternacional:M.value,direccionCompra:L.value,descripcionCustom:$.value};var l=JSON.stringify(s),d={method:"POST",headers:u,body:l,redirect:"follow"};const m=await(await fetch(_+"/paquete",d)).json();m.resp?p.value={message:"Paquete creado correctamente",type:"success",model:!0}:p.value={message:m.mensaje,type:"error",model:!0}}else if(W.value==="edit"){let s={id:_e.value,nombre:g.value,codigoInterno:y.value,tipoPago:k.value,precio:I.value,periodicidad:U.value,ciclosPromocion:D.value,precioPromocional:S.value,descripcionPrecios:j.value,grupo:N.value,sitio:be(T.value),activoDesde:h.value,activoHasta:A.value,color:ae.value,destaque:B.value,clasesCss:E.value,caracteristicas:z.value,url_imagen:F.value,url:q.value,visibilidad:O.value,cambioPlan:R.value,paqueteCortesia:J.value,paqueteInternacional:M.value,direccionCompra:L.value,descripcionCustom:$.value};var l=JSON.stringify(s),d={method:"PUT",headers:u,body:l,redirect:"follow"};const ye=await(await fetch(_+"/paquete",d)).json();ye.resp?p.value={message:"Paquete editado correctamente",type:"success",model:!0}:p.value={message:ye.mensaje,type:"error",model:!0}}await ue(),x.value=!1}catch(s){console.error(s.message)}}const w=n(!1),Ce=n("");function Xe(u){w.value=!0,Ce.value=u}async function Ke(){var u={method:"DELETE",redirect:"follow"};const d=await(await fetch(_+"/paquete/"+Ce.value,u)).json();d.resp?p.value={message:"Paquete eliminado correctamente",type:"success",model:!0}:p.value={message:d.mensaje,type:"error",model:!0},await ue(),w.value=!1}return(u,l)=>{const d=ol,s=sl;return v(),f("section",null,[e(ll,{modelValue:o(p).model,"onUpdate:modelValue":l[0]||(l[0]=a=>o(p).model=a),location:"top end",variant:"flat",color:o(p).type},{default:t(()=>[V(Q(o(p).message),1)]),_:1},8,["modelValue","color"]),e(b,null,{default:t(()=>[e(i,{cols:"12",sm:"12",lg:"12"},{default:t(()=>[e(ce,null,{default:t(()=>[e(we,{class:"pt-4 pl-6"},{default:t(()=>[V("Lista de paquetes")]),_:1}),e(te,{style:{"margin-bottom":"-2rem"}},{default:t(()=>[c("div",il,[e(G,{"prepend-icon":"tabler-user-plus",color:"success",variant:"tonal",class:"ml-auto",onClick:He},{default:t(()=>[V(" Crear paquete ")]),_:1})])]),_:1}),o(ne)?(v(),oe(me,{key:0},{default:t(()=>[V(" Cargando datos... ")]),_:1})):(v(),oe(me,{key:1},{default:t(()=>[e(al,{class:"text-no-wrap tableNavegacion mb-5"},{default:t(()=>[rl,c("tbody",null,[(v(!0),f(Y,null,H(o(je),a=>(v(),f("tr",null,[c("td",dl,Q(a.nombre),1),c("td",cl,Q(a.codigoInterno),1),c("td",ml,[e(G,{color:"success",variant:"text",icon:"",onClick:m=>We(a._id)},{default:t(()=>[e(Pe,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(G,{icon:"",color:"error",variant:"text",onClick:m=>Xe(a._id)},{default:t(()=>[e(Pe,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),256))])]),_:1}),c("div",vl,[e(G,{icon:"tabler-arrow-big-left-lines",onClick:Te,disabled:o(C)===1},null,8,["disabled"]),V(" P\xE1gina "+Q(o(C))+" ",1),e(G,{icon:"tabler-arrow-big-right-lines",onClick:Ne,disabled:o(C)*le>=o(ee).length},null,8,["disabled"])])]),_:1}))]),_:1})]),_:1})]),_:1}),e(ke,{modelValue:o(x),"onUpdate:modelValue":l[24]||(l[24]=a=>r(x)?x.value=a:null),persistent:"","no-click-animation":"","max-width":"800"},{default:t(()=>[e(d,{onClick:Ye}),e(ce,null,{default:t(()=>[e(me,{class:"text-center"},{default:t(()=>[e(we,{class:"text-h5 mb-3"},{default:t(()=>[V(Q(o(W)==="add"?"Crear un paquete":"Editar "+o(g)),1)]),_:1})]),_:1}),e(te,{class:"px-5 py-3"},{default:t(()=>[e(o(nl),{class:tl(u.loadingPanel?"disabled":""),onOnComplete:Qe,onOnLoading:ze,color:"#7367F0",onOnValidate:Le,onOnChange:$e,"validate-on-back":"true",nextButtonText:"Siguiente",backButtonText:"Anterior",finishButtonText:"Guardar paquete"},{default:t(()=>[e(o(Ie),{title:"Detalles del paquete","before-change":Ge},{default:t(()=>[e(b,{class:"pb-5"},{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{cols:"7",md:"7"},{default:t(()=>[e(P,{modelValue:o(g),"onUpdate:modelValue":l[1]||(l[1]=a=>r(g)?g.value=a:null),label:"Nombre"},null,8,["modelValue"])]),_:1}),e(i,{cols:"5",md:"5"},{default:t(()=>[e(P,{modelValue:o(y),"onUpdate:modelValue":l[2]||(l[2]=a=>r(y)?y.value=a:null),label:"C\xF3digo interno"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),pl,e(qe,{class:"my-2"}),e(i,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{cols:"6",md:"6"},{default:t(()=>[e(X,{modelValue:o(k),"onUpdate:modelValue":l[3]||(l[3]=a=>r(k)?k.value=a:null),label:"Tipo de pago",items:Be},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:t(()=>[e(P,{modelValue:o(I),"onUpdate:modelValue":l[4]||(l[4]=a=>r(I)?I.value=a:null),label:"Precio",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(b,{class:"d-flex flex-wrap"},{default:t(()=>[e(i,{cols:"4",md:"4",class:"mdContainer"},{default:t(()=>[e(X,{modelValue:o(U),"onUpdate:modelValue":l[5]||(l[5]=a=>r(U)?U.value=a:null),label:"Periodicidad",items:Ae},null,8,["modelValue"])]),_:1}),e(i,{cols:"4",md:"4",class:"mdContainer"},{default:t(()=>[e(P,{modelValue:o(D),"onUpdate:modelValue":l[6]||(l[6]=a=>r(D)?D.value=a:null),label:"Ciclos de Promoci\xF3n",type:"number"},null,8,["modelValue"])]),_:1}),e(i,{cols:"4",md:"4",class:"mdContainer"},{default:t(()=>[e(P,{modelValue:o(S),"onUpdate:modelValue":l[7]||(l[7]=a=>r(S)?S.value=a:null),label:"Precio promocional",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{modelValue:o(j),"onUpdate:modelValue":l[8]||(l[8]=a=>r(j)?j.value=a:null),label:"Descripci\xF3n de precios"},null,8,["modelValue"])]),_:1}),fl,e(qe,{class:"my-2"}),e(i,{cols:"12"},{default:t(()=>[e(b,{class:"mb-4"},{default:t(()=>[o(W)=="add"?(v(),oe(i,{key:0,cols:"6",md:"6"},{default:t(()=>[e(X,{modelValue:o(N),"onUpdate:modelValue":l[9]||(l[9]=a=>r(N)?N.value=a:null),label:"Grupo",items:o(ve)},null,8,["modelValue","items"])]),_:1})):xe("",!0),e(i,{cols:"6",md:"6"},{default:t(()=>[e(X,{modelValue:o(T),"onUpdate:modelValue":l[10]||(l[10]=a=>r(T)?T.value=a:null),label:"Sitio",items:o(pe)},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"6",md:"6",class:""},{default:t(()=>[e(P,{modelValue:o(q),"onUpdate:modelValue":l[11]||(l[11]=a=>r(q)?q.value=a:null),label:"Ingresa la url del paquete, si dispone"},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{class:"mb-4"},{default:t(()=>[e(i,{cols:"6",md:"6",class:"mdContainer"},{default:t(()=>[e(s,{"prepend-inner-icon":"tabler-calendar",density:"compact",modelValue:o(h),"onUpdate:modelValue":l[12]||(l[12]=a=>r(h)?h.value=a:null),"show-current":"true",label:"Activo desde",config:{position:"auto right",altFormat:"F j, Y",dateFormat:"d/m/Y",reactive:!0}},null,8,["modelValue","config"])]),_:1}),e(i,{cols:"6",md:"6",class:"mdContainer"},{default:t(()=>[e(s,{"prepend-inner-icon":"tabler-calendar",density:"compact",modelValue:o(A),"onUpdate:modelValue":l[13]||(l[13]=a=>r(A)?A.value=a:null),"show-current":"true",label:"Activo hasta",config:{position:"auto right",altFormat:"F j, Y",dateFormat:"d/m/Y",reactive:!0}},null,8,["modelValue","config"])]),_:1})]),_:1}),e(b,{class:"d-flex flex-wrap mb-4"},{default:t(()=>[e(i,{cols:"6",md:"6",class:"smContainer d-none"},{default:t(()=>[e(X,{modelValue:o(B),"onUpdate:modelValue":l[14]||(l[14]=a=>r(B)?B.value=a:null),label:"Destaque",items:he},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12",class:"mdContainer"},{default:t(()=>[e(P,{modelValue:o(E),"onUpdate:modelValue":l[15]||(l[15]=a=>r(E)?E.value=a:null),label:"Clases CSS"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer"},{default:t(()=>[gl,e(K,{modelValue:o(O),"onUpdate:modelValue":l[16]||(l[16]=a=>r(O)?O.value=a:null)},{default:t(()=>[(v(),f(Y,null,H(Ee,(a,m)=>e(Z,{key:m,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer"},{default:t(()=>[Vl,e(K,{modelValue:o(M),"onUpdate:modelValue":l[17]||(l[17]=a=>r(M)?M.value=a:null)},{default:t(()=>[(v(),f(Y,null,H(Oe,(a,m)=>e(Z,{key:m,label:a.title,value:a.title},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer d-none"},{default:t(()=>[bl,e(K,{modelValue:o(R),"onUpdate:modelValue":l[18]||(l[18]=a=>r(R)?R.value=a:null)},{default:t(()=>[(v(),f(Y,null,H(Fe,(a,m)=>e(Z,{key:m,label:a.title,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer d-none"},{default:t(()=>[_l,e(K,{modelValue:o(J),"onUpdate:modelValue":l[19]||(l[19]=a=>r(J)?J.value=a:null)},{default:t(()=>[(v(),f(Y,null,H(Re,(a,m)=>e(Z,{key:m,label:a.title,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer d-none"},{default:t(()=>[Cl,e(K,{modelValue:o(L),"onUpdate:modelValue":l[20]||(l[20]=a=>r(L)?L.value=a:null)},{default:t(()=>[(v(),f(Y,null,H(Je,(a,m)=>e(Z,{key:m,label:a.title,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:t(()=>[e(Ue,{rows:"1",modelValue:o(F),"onUpdate:modelValue":l[21]||(l[21]=a=>r(F)?F.value=a:null),label:"Url de im\xE1gen","auto-grow":""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:t(()=>[e(Ue,{rows:"2",modelValue:o($),"onUpdate:modelValue":l[22]||(l[22]=a=>r($)?$.value=a:null),label:"Descripci\xF3n personalizada","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o(Ie),{title:"Asignaci\xF3n de caracter\xEDsticas","before-change":u.validateAsyncInsercion},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{class:"mb-1",cols:"12"},{default:t(()=>[yl]),_:1}),e(i,{cols:"6"},{default:t(()=>[(v(!0),f(Y,null,H(o(re),a=>(v(),oe(i,{style:{"margin-top":"-1.5rem"},cols:"6"},{default:t(()=>[e(ul,{modelValue:o(z),"onUpdate:modelValue":l[23]||(l[23]=m=>r(z)?z.value=m:null),label:a.title,value:a.value},null,8,["modelValue","label","value"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1},8,["before-change"]),o(Ve)?(v(),f("div",wl)):xe("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ke,{modelValue:o(w),"onUpdate:modelValue":l[27]||(l[27]=a=>r(w)?w.value=a:null),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(d,{onClick:l[25]||(l[25]=a=>w.value=!o(w))}),e(ce,{title:"Eliminar registro"},{default:t(()=>[e(te,null,{default:t(()=>[V(" \xBFDesea eliminar el paquete? ")]),_:1}),e(te,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(G,{color:"secondary",variant:"tonal",onClick:l[26]||(l[26]=a=>w.value=!1)},{default:t(()=>[V(" No, Cerrar ")]),_:1}),e(G,{onClick:Ke},{default:t(()=>[V(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{jl as default};
