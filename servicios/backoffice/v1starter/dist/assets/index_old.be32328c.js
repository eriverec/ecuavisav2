import{r as n,as as Qe,v as Xe,o as v,x as g,a as e,w as t,q as V,t as W,u as o,f as Ke,e as i,g as re,aR as Ce,h as Z,b as c,p as z,c as ee,aQ as de,aW as Ze,F as Y,C as H,N as ye,V as b,L as ea,n as w,i as r,a2 as we,aT as Q,a3 as Pe,b0 as xe,bc as aa,aX as la}from"./index.88d3c7f5.js";import{i as ta,l as qe}from"./vue3-form-wizard.es.668eae1f.js";/* empty css              */import{V as ae,a as le}from"./VRadioGroup.4905b4ef.js";import{V as De}from"./VTextarea.86fae113.js";import{V as oa}from"./VCheckbox.50e352e3.js";const sa={class:"d-flex flex-wrap gap-4 mt-10"},ua=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Nombre"),c("th",{scope:"col"},"C\xF3digo interno"),c("th",{scope:"col"},"Acciones")])],-1),na={class:"text-medium-emphasis"},ia={class:"text-medium-emphasis"},ra={class:"text-medium-emphasis"},da={class:"d-flex align-center justify-space-between botonescurrentPage"},ca=c("span",{class:"mt-4"},"Pagos",-1),ma=c("span",{class:"mt-4"},"Otras configuraci\xF3nes",-1),va=c("span",null,"Visibilidad",-1),pa=c("span",null,"Cambio de plan",-1),fa=c("span",null,"\xBFEs un paquete de cortes\xEDa?",-1),ga=c("span",null,"\xBFSolicitar direcci\xF3n durante la compra?",-1),Va=c("p",null," Caracter\xEDsticas ",-1),ba={key:0,class:"loader"},ka={__name:"index_old",setup(_a){const X=n([]),te=n([]),oe=n(!1),ke=n([]),ce=n([]),me=n([]),ve=n([]),P="https://ecuavisa-suscripciones.vercel.app";async function se(){try{oe.value=!0;const a=await(await fetch(P+"/paquete")).json();X.value=a.data,oe.value=!1}catch(u){console.error(u.message)}}async function ue(){try{const a=await(await fetch(P+"/caracteristica")).json();te.value=a.data}catch(u){console.error(u.message)}}async function pe(){try{const a=await(await fetch(P+"/grupo")).json();ke.value=a.data;let d=[];for(let s of a.data){let l={title:s.nombre,value:s._id};d.push(l)}d.push({title:"Sin grupo",value:"no aplica"}),ce.value=d}catch(u){console.error(u.message)}}async function Ue(){try{const a=await(await fetch("https://ecuavisa-suscripciones.vercel.app/sitio/all")).json();ve.value=a.data;let d=[];for(let s of a.data){let l={title:s.nombre,value:s._id};d.push(l)}me.value=d}catch(u){console.error(u.message)}}Qe(async()=>{await se(),await Ue()});const K=8,_=n(1),Ie=Xe(()=>{const u=(_.value-1)*K,a=u+K;return X.value.slice(u,a)}),Se=()=>{_.value*K<X.value.length&&_.value++},je=()=>{_.value>1&&_.value--},Te=["No aplica","Recomendado","Mejor precio","Oferta"],he=["No aplica","Diaria","Mensual","Bimestral","Trimestral","Cuatrimestral","5 Meses","Semestral","8 Meses","Anual","18 Meses","Bianual"],Ne=[{title:"Pago \xFAnico",value:"pago unico"},{title:"Recursivo",value:"Recursivo"}],Ae=["Visible","Oculto"],Be=[{title:"Bloquear cambio de plan",value:"bloquear"},{title:"Permitir cambio de plan",value:"permitir"}],Fe=[{title:"Si",value:!0},{title:"No",value:!1}],Oe=[{title:"Solicitar direcci\xF3n completa",value:"completa"},{title:"Solicitar solamente localidad",value:"local"},{title:"No solicitar",value:"no solicitar"}],x=n(!1),G=n(""),f=n(""),C=n(""),q=n(""),D=n(0),k=n(""),U=n(0),I=n(0),S=n(""),j=n("no aplica"),T=n(""),h=n(""),N=n(""),A=n(""),B=n(""),F=n(""),O=n(""),E=n(""),R=n(""),J=n(!1),M=n(""),L=n(""),$=n([]),p=n({message:"Datos guardados",type:"success",model:!1}),fe=n(!1),ne=n([]);function ge(u){return ve.value.find(d=>d._id==u)}function Ee(){let u=Array.from(te.value),a=[];for(const d of u){let s={title:d.nombre,value:d._id};a.push(s)}ne.value=a}function ie(){f.value="",C.value="",q.value="",D.value=null,k.value="",U.value=null,I.value=null,S.value="",j.value="no aplica",T.value="",h.value="",N.value="",A.value="",B.value="",F.value="",$.value=[],O.value="",E.value="",R.value="",J.value=!1,M.value="",L.value=""}async function Re(u,a){return a==0&&u==!0&&ne.value.length<1&&(te.value.length<1&&await ue(),Ee()),!1}async function Je(u,a){return!1}async function Me(u){fe.value=u}async function Le(){let u=f.value;var a=C.value;return!u||u==""?(p.value={message:"Debe a\xF1adir un nombre",type:"error",model:!0},!1):!a||a==""?(p.value={message:"Debe a\xF1adir un c\xF3digo interno",type:"error",model:!0},!1):!0}function $e(){ie(),x.value=!1}async function ze(){ie(),G.value="add",await ue(),await pe(),x.value=!0}const Ve=n("");async function Ge(u){ie(),G.value="edit",await ue(),await pe();const s=(await(await fetch(P+"/paquete/"+u)).json()).data;Ve.value=s._id,f.value=s.nombre,C.value=s.codigoInterno,q.value=s.tipoPago,D.value=s.precio,k.value=s.periodicidad,U.value=s.ciclosPromocion,I.value=s.precioPromocional,S.value=s.descripcionPrecios,j.value=s.grupo,T.value=s.sitio._id,h.value=s.activoDesde,N.value=s.activoHasta,A.value=s.color,B.value=s.destaque,F.value=s.clasesCss,$.value=s.caracteristicas,O.value=s.url_imagen,E.value=s.visibilidad,R.value=s.cambioPlan,J.value=s.paqueteCortesia,M.value=s.direccionCompra,L.value=s.descripcionCustom,x.value=!0}async function Ye(){try{var u=new Headers;if(u.append("Content-Type","application/json"),G.value==="add"){let s={nombre:f.value,codigoInterno:C.value,tipoPago:q.value,precio:D.value,periodicidad:k.value,ciclosPromocion:U.value,precioPromocional:I.value,descripcionPrecios:S.value,grupo:j.value,sitio:ge(T.value),activoDesde:h.value,activoHasta:N.value,color:A.value,destaque:B.value,clasesCss:F.value,caracteristicas:$.value,url_imagen:O.value,visibilidad:E.value,cambioPlan:R.value,paqueteCortesia:J.value,direccionCompra:M.value,descripcionCustom:L.value};var a=JSON.stringify(s),d={method:"POST",headers:u,body:a,redirect:"follow"};const m=await(await fetch(P+"/paquete",d)).json();m.resp?p.value={message:"Paquete creado correctamente",type:"success",model:!0}:p.value={message:m.mensaje,type:"error",model:!0}}else if(G.value==="edit"){let s={id:Ve.value,nombre:f.value,codigoInterno:C.value,tipoPago:q.value,precio:D.value,periodicidad:k.value,ciclosPromocion:U.value,precioPromocional:I.value,descripcionPrecios:S.value,grupo:j.value,sitio:ge(T.value),activoDesde:h.value,activoHasta:N.value,color:A.value,destaque:B.value,clasesCss:F.value,caracteristicas:$.value,url_imagen:O.value,visibilidad:E.value,cambioPlan:R.value,paqueteCortesia:J.value,direccionCompra:M.value,descripcionCustom:L.value};var a=JSON.stringify(s),d={method:"PUT",headers:u,body:a,redirect:"follow"};const _e=await(await fetch(P+"/paquete",d)).json();_e.resp?p.value={message:"Paquete editado correctamente",type:"success",model:!0}:p.value={message:_e.mensaje,type:"error",model:!0}}await se(),x.value=!1}catch(s){console.error(s.message)}}const y=n(!1),be=n("");function He(u){y.value=!0,be.value=u}async function We(){var u={method:"DELETE",redirect:"follow"};const d=await(await fetch(P+"/paquete/"+be.value,u)).json();d.resp?p.value={message:"Paquete eliminado correctamente",type:"success",model:!0}:p.value={message:d.mensaje,type:"error",model:!0},await se(),y.value=!1}return(u,a)=>{const d=aa,s=la;return v(),g("section",null,[e(Ke,{modelValue:o(p).model,"onUpdate:modelValue":a[0]||(a[0]=l=>o(p).model=l),location:"top end",variant:"flat",color:o(p).type},{default:t(()=>[V(W(o(p).message),1)]),_:1},8,["modelValue","color"]),e(b,null,{default:t(()=>[e(i,{cols:"12",sm:"12",lg:"12"},{default:t(()=>[e(re,null,{default:t(()=>[e(Ce,{class:"pt-4 pl-6"},{default:t(()=>[V("Lista de paquetes")]),_:1}),e(Z,{style:{"margin-bottom":"-2rem"}},{default:t(()=>[c("div",sa,[e(z,{"prepend-icon":"tabler-user-plus",color:"success",variant:"tonal",class:"ml-auto",onClick:ze},{default:t(()=>[V(" Crear paquete ")]),_:1})])]),_:1}),o(oe)?(v(),ee(de,{key:0},{default:t(()=>[V(" Cargando datos... ")]),_:1})):(v(),ee(de,{key:1},{default:t(()=>[e(Ze,{class:"text-no-wrap tableNavegacion mb-5"},{default:t(()=>[ua,c("tbody",null,[(v(!0),g(Y,null,H(o(Ie),l=>(v(),g("tr",null,[c("td",na,W(l.nombre),1),c("td",ia,W(l.codigoInterno),1),c("td",ra,[e(z,{color:"success",variant:"text",icon:"",onClick:m=>Ge(l._id)},{default:t(()=>[e(ye,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(z,{icon:"",color:"error",variant:"text",onClick:m=>He(l._id)},{default:t(()=>[e(ye,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),256))])]),_:1}),c("div",da,[e(z,{icon:"tabler-arrow-big-left-lines",onClick:je,disabled:o(_)===1},null,8,["disabled"]),V(" P\xE1gina "+W(o(_))+" ",1),e(z,{icon:"tabler-arrow-big-right-lines",onClick:Se,disabled:o(_)*K>=o(X).length},null,8,["disabled"])])]),_:1}))]),_:1})]),_:1})]),_:1}),e(xe,{modelValue:o(x),"onUpdate:modelValue":a[23]||(a[23]=l=>r(x)?x.value=l:null),persistent:"","no-click-animation":"","max-width":"800"},{default:t(()=>[e(d,{onClick:$e}),e(re,{class:"pa-sm-14 pa-5"},{default:t(()=>[e(de,{class:"text-center"},{default:t(()=>[e(Ce,{class:"text-h5 mb-3"},{default:t(()=>[V(W(o(G)==="add"?"Crear un paquete":"Editar "+o(f)),1)]),_:1})]),_:1}),e(Z,null,{default:t(()=>[e(o(ta),{class:ea(u.loadingPanel?"disabled":""),onOnComplete:Ye,onOnLoading:Me,color:"#7367F0",onOnValidate:Re,onOnChange:Je,"validate-on-back":"true",nextButtonText:"Siguiente",backButtonText:"Anterior",finishButtonText:"Guardar paquete"},{default:t(()=>[e(o(qe),{title:"Detalles del paquete","before-change":Le},{default:t(()=>[e(b,{class:"pb-5"},{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{cols:"7",md:"7"},{default:t(()=>[e(w,{modelValue:o(f),"onUpdate:modelValue":a[1]||(a[1]=l=>r(f)?f.value=l:null),label:"Nombre"},null,8,["modelValue"])]),_:1}),e(i,{cols:"5",md:"5"},{default:t(()=>[e(w,{modelValue:o(C),"onUpdate:modelValue":a[2]||(a[2]=l=>r(C)?C.value=l:null),label:"C\xF3digo interno"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),ca,e(we,{class:"my-2"}),e(i,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{cols:"6",md:"6"},{default:t(()=>[e(Q,{modelValue:o(q),"onUpdate:modelValue":a[3]||(a[3]=l=>r(q)?q.value=l:null),label:"Tipo de pago",items:Ne},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:t(()=>[e(w,{modelValue:o(D),"onUpdate:modelValue":a[4]||(a[4]=l=>r(D)?D.value=l:null),label:"Precio",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(b,{class:"d-flex flex-wrap"},{default:t(()=>[e(i,{cols:"4",md:"4",class:"mdContainer"},{default:t(()=>[e(Q,{modelValue:o(k),"onUpdate:modelValue":a[5]||(a[5]=l=>r(k)?k.value=l:null),label:"Periodicidad",items:he},null,8,["modelValue"])]),_:1}),e(i,{cols:"4",md:"4",class:"mdContainer"},{default:t(()=>[e(w,{modelValue:o(U),"onUpdate:modelValue":a[6]||(a[6]=l=>r(U)?U.value=l:null),label:"Ciclos de Promoci\xF3n",type:"number"},null,8,["modelValue"])]),_:1}),e(i,{cols:"4",md:"4",class:"mdContainer"},{default:t(()=>[e(w,{modelValue:o(I),"onUpdate:modelValue":a[7]||(a[7]=l=>r(I)?I.value=l:null),label:"Precio promocional",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(w,{modelValue:o(S),"onUpdate:modelValue":a[8]||(a[8]=l=>r(S)?S.value=l:null),label:"Descripci\xF3n de precios"},null,8,["modelValue"])]),_:1}),ma,e(we,{class:"my-2"}),e(i,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[o(G)=="add"?(v(),ee(i,{key:0,cols:"6",md:"6"},{default:t(()=>[e(Q,{modelValue:o(j),"onUpdate:modelValue":a[9]||(a[9]=l=>r(j)?j.value=l:null),label:"Grupo",items:o(ce)},null,8,["modelValue","items"])]),_:1})):Pe("",!0),e(i,{cols:"6",md:"6"},{default:t(()=>[e(Q,{modelValue:o(T),"onUpdate:modelValue":a[10]||(a[10]=l=>r(T)?T.value=l:null),label:"Sitio",items:o(me)},null,8,["modelValue","items"])]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(i,{cols:"6",md:"6",class:"mdContainer"},{default:t(()=>[e(s,{"prepend-inner-icon":"tabler-calendar",density:"compact",modelValue:o(h),"onUpdate:modelValue":a[11]||(a[11]=l=>r(h)?h.value=l:null),"show-current":"true",label:"Activo desde",config:{position:"auto right",altFormat:"F j, Y",dateFormat:"d/m/Y",maxDate:new Date,reactive:!0}},null,8,["modelValue","config"])]),_:1}),e(i,{cols:"6",md:"6",class:"mdContainer"},{default:t(()=>[e(s,{"prepend-inner-icon":"tabler-calendar",density:"compact",modelValue:o(N),"onUpdate:modelValue":a[12]||(a[12]=l=>r(N)?N.value=l:null),"show-current":"true",label:"Activo hasta",config:{position:"auto right",altFormat:"F j, Y",dateFormat:"d/m/Y",maxDate:new Date,reactive:!0}},null,8,["modelValue","config"])]),_:1})]),_:1}),e(b,{class:"d-flex flex-wrap"},{default:t(()=>[e(i,{cols:"2",md:"2",class:"smContainer"},{default:t(()=>[e(w,{modelValue:o(A),"onUpdate:modelValue":a[13]||(a[13]=l=>r(A)?A.value=l:null),label:"Color"},null,8,["modelValue"])]),_:1}),e(i,{cols:"4",md:"4",class:"smContainer"},{default:t(()=>[e(Q,{modelValue:o(B),"onUpdate:modelValue":a[14]||(a[14]=l=>r(B)?B.value=l:null),label:"Destaque",items:Te},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"mdContainer"},{default:t(()=>[e(w,{modelValue:o(F),"onUpdate:modelValue":a[15]||(a[15]=l=>r(F)?F.value=l:null),label:"Clases CSS"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer"},{default:t(()=>[va,e(ae,{modelValue:o(E),"onUpdate:modelValue":a[16]||(a[16]=l=>r(E)?E.value=l:null)},{default:t(()=>[(v(),g(Y,null,H(Ae,(l,m)=>e(le,{key:m,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer"},{default:t(()=>[pa,e(ae,{modelValue:o(R),"onUpdate:modelValue":a[17]||(a[17]=l=>r(R)?R.value=l:null)},{default:t(()=>[(v(),g(Y,null,H(Be,(l,m)=>e(le,{key:m,label:l.title,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer"},{default:t(()=>[fa,e(ae,{modelValue:o(J),"onUpdate:modelValue":a[18]||(a[18]=l=>r(J)?J.value=l:null)},{default:t(()=>[(v(),g(Y,null,H(Fe,(l,m)=>e(le,{key:m,label:l.title,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6",class:"lgContainer"},{default:t(()=>[ga,e(ae,{modelValue:o(M),"onUpdate:modelValue":a[19]||(a[19]=l=>r(M)?M.value=l:null)},{default:t(()=>[(v(),g(Y,null,H(Oe,(l,m)=>e(le,{key:m,label:l.title,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:t(()=>[e(De,{rows:"1",modelValue:o(O),"onUpdate:modelValue":a[20]||(a[20]=l=>r(O)?O.value=l:null),label:"Url de im\xE1gen","auto-grow":""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:t(()=>[e(De,{rows:"2",modelValue:o(L),"onUpdate:modelValue":a[21]||(a[21]=l=>r(L)?L.value=l:null),label:"Descripci\xF3n personalizada","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o(qe),{title:"Asignaci\xF3n de caracter\xEDsticas","before-change":u.validateAsyncInsercion},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{class:"mb-1",cols:"12"},{default:t(()=>[Va]),_:1}),e(i,{cols:"6"},{default:t(()=>[(v(!0),g(Y,null,H(o(ne),l=>(v(),ee(i,{style:{"margin-top":"-1.5rem"},cols:"6"},{default:t(()=>[e(oa,{modelValue:o($),"onUpdate:modelValue":a[22]||(a[22]=m=>r($)?$.value=m:null),label:l.title,value:l.value},null,8,["modelValue","label","value"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1},8,["before-change"]),o(fe)?(v(),g("div",ba)):Pe("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(xe,{modelValue:o(y),"onUpdate:modelValue":a[26]||(a[26]=l=>r(y)?y.value=l:null),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(d,{onClick:a[24]||(a[24]=l=>y.value=!o(y))}),e(re,{title:"Eliminar registro"},{default:t(()=>[e(Z,null,{default:t(()=>[V(" \xBFDesea eliminar el paquete? ")]),_:1}),e(Z,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(z,{color:"secondary",variant:"tonal",onClick:a[25]||(a[25]=l=>y.value=!1)},{default:t(()=>[V(" No, Cerrar ")]),_:1}),e(z,{onClick:We},{default:t(()=>[V(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{ka as default};
