import{r as n,o as l,x as c,a as d,n as f,w as V,q as m,p as w,a3 as x,b as _,bb as y}from"./index.88d3c7f5.js";const g=_("br",null,null,-1),h={key:0,class:"mt-3"},j={__name:"index",setup(k){const r=n(!1),o=n(""),u=async()=>{if(!o.value){alert("Por favor ingrese la URL del endpoint.");return}r.value=!0;let t=[];try{if(t=(await y.get(o.value)).data.data,t.length===0){alert("No hay datos para exportar.");return}const a=i(t);p(a)}catch(e){console.error("Error al cargar los datos:",e),alert("Hubo un error al cargar los datos. Por favor, intenta de nuevo.")}finally{r.value=!1}},i=t=>{const e=Object.keys(t[0]),a=[];a.push(e.join(","));for(const s of t){const v=e.map(b=>`"${(""+s[b]).replace(/"/g,'\\"')}"`);a.push(v.join(","))}return a.join(`
`)},p=t=>{const e=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(e),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","data.csv"),s.click(),window.URL.revokeObjectURL(a)};return(t,e)=>(l(),c("div",null,[d(f,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),label:"Endpoint"},null,8,["modelValue"]),g,d(w,{color:"success",onClick:u,disabled:r.value||!o.value},{default:V(()=>[m("Exportar a CSV")]),_:1},8,["disabled"]),r.value?(l(),c("p",h,"Leyendo los datos para la descarga...")):x("",!0)]))}};export{j as default};
