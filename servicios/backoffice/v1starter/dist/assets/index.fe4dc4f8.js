import{M as A,R as F,S as W,U as G,r as o,as as J,o as r,x as h,a as t,w as a,u as l,g as j,h as S,q as m,p as D,i as C,b0 as Z,e as K,b7 as Q,b8 as $,b9 as X,ba as Y,b as i,aR as aa,b2 as ea,c as w,Z as R,$ as U,a0 as P,a3 as _,F as B,C as ta,t as y,a1 as sa,c7 as la,aM as na,a2 as oa,V as ia,bc as da,bd as ra,be as ua}from"./index.88d3c7f5.js";import{V as ca}from"./VPagination.9412c3b8.js";const pa=b=>(ra("data-v-f8f7b607"),b=b(),ua(),b),ma={class:"d-flex flex-wrap py-4 gap-4 align-items-center",style:{"justify-content":"space-between"}},fa={class:"px-4"},ga=pa(()=>i("div",{class:"loading"},null,-1)),va={class:"nombre-campania"},_a={class:"switch-estatus",style:{"margin-bottom":"-10px"}},ba={style:{"font-weight":"medium"}},Va={key:1,title:"Publicidad activa, iniciada",color:"success"},ha={style:{"font-weight":"medium"}},Ca={class:"text-sm text-disabled"},wa={__name:"index",setup(b){F.exports.extendMoment(W).locale("es",[G]);const f=o("tab-lista"),u=o(!1);o(1);const g=o([]),v=o(1),E=o(1),I=o(1),N=o(""),x=o(!1),k=o(!1),V=o(!1);J(T);async function T(c=1,s=10){try{var d=new Headers;d.append("Content-Type","application/json");var e={method:"GET",headers:d,redirect:"follow"},p=await fetch(`https://ads-service.vercel.app/campaign/get/all?page=${c}&limit=${s}`,e);const n=await p.json();g.value=n.data,I.value=n.total,E.value=Math.ceil(n.total/n.limit)}catch(n){return console.error(n.message)}}const M=async()=>{x.value=!0,await T(v.value),x.value=!1},O=async()=>{try{u.value=!1,k.value=!0;var c=new Headers;c.append("Content-Type","application/json");var s={method:"DELETE",headers:c,redirect:"follow"},d=await fetch(`https://ads-service.vercel.app/campaign/delete/${N.value}`,s);const e=await d.json();k.value=!1,await T(v.value)}catch(e){return console.error(e.message)}},q=async c=>{const s=g.value[c],d=s._id,e=s.statusCampaign;V.value=!0;var p={status:e},n=new Headers;n.append("Content-Type","application/json");var H={method:"POST",headers:n,body:JSON.stringify(p),redirect:"follow"},z=await fetch(`https://ads-service.vercel.app/campaign/update/status/${d}`,H);const L=await z.json();L.resp||(alert("Un error se present\xF3: "+L.error),s.statusCampaign=!s.statusCampaign),V.value=!1};return(c,s)=>{const d=da;return r(),h("section",null,[t(Z,{modelValue:l(u),"onUpdate:modelValue":s[2]||(s[2]=e=>C(u)?u.value=e:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[t(d,{onClick:s[0]||(s[0]=e=>u.value=!l(u))}),t(j,{title:"Eliminar registro"},{default:a(()=>[t(S,null,{default:a(()=>[m(" \xBFDesea eliminar el registro? ")]),_:1}),t(S,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[t(D,{color:"secondary",variant:"tonal",onClick:s[1]||(s[1]=e=>u.value=!1)},{default:a(()=>[m(" No, Cerrar ")]),_:1}),t(D,{onClick:O},{default:a(()=>[m(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ia,null,{default:a(()=>[t(K,{class:"mt-0",cols:"12",md:"12",lg:"12"},{default:a(()=>[t(Q,{modelValue:l(f),"onUpdate:modelValue":s[3]||(s[3]=e=>C(f)?f.value=e:null),class:"v-tabs-pill d-none"},{default:a(()=>[t($,{value:"tab-lista",class:"d-none"},{default:a(()=>[m(" Listado ")]),_:1}),t($,{value:"tab-agregar",class:"d-none"},{default:a(()=>[m(" Estad\xEDsticas ")]),_:1})]),_:1},8,["modelValue"]),t(j,{class:"mt-5"},{default:a(()=>[t(S,null,{default:a(()=>[t(X,{modelValue:l(f),"onUpdate:modelValue":s[5]||(s[5]=e=>C(f)?f.value=e:null)},{default:a(()=>[t(Y,{value:"tab-lista"},{default:a(()=>[i("div",ma,[i("div",null,[t(aa,null,{default:a(()=>[m(" Listado de reglas ")]),_:1}),t(ea,null,{default:a(()=>[m(" Elige la campa\xF1a sobre la que necesites informaci\xF3n ")]),_:1})])]),i("div",fa,[l(g).length<1?(r(),w(R,{key:0,lines:"two",border:""},{default:a(()=>[t(U,null,{default:a(()=>[t(P,null,{default:a(()=>[ga]),_:1})]),_:1})]),_:1})):_("",!0),l(g).length>0?(r(),w(R,{key:1,lines:"two",border:""},{default:a(()=>[(r(!0),h(B,null,ta(l(g),(e,p)=>(r(),h(B,{key:p},[t(U,{disabled:l(k)},{append:a(()=>[]),default:a(()=>[t(P,null,{default:a(()=>[i("div",va,y(e.campaignTitle)+" ",1)]),_:2},1024),t(sa,{class:"mt-1",title:"Estado de campa\xF1a"},{default:a(()=>[i("div",_a,[t(la,{disabled:l(V),loading:l(V)?"warning":!1,color:e.statusCampaign?"success":"error",modelValue:e.statusCampaign,"onUpdate:modelValue":n=>e.statusCampaign=n,size:"x-small",class:"custom-vswitch",onChange:n=>q(p)},null,8,["disabled","loading","color","modelValue","onUpdate:modelValue","onChange"]),e.statusCampaign!=!0?(r(),w(na,{key:0,title:"Publicidad pausada",size:"x-small",label:"",color:"error"},{default:a(()=>[i("span",ba,y(e.statusCampaign?"Activo":"Inactivo"),1)]),_:2},1024)):_("",!0),e.statusCampaign==!0?(r(),h("small",Va,[i("span",ha,y(e.statusCampaign?"Activo":"Inactivo"),1)])):_("",!0)])]),_:2},1024)]),_:2},1032,["disabled"]),p!==l(g).length-1?(r(),w(oa,{key:0})):_("",!0)],64))),128))]),_:1})):_("",!0),i("span",Ca," Total de registros: "+y(l(I)),1),t(ca,{disabled:l(x),modelValue:l(v),"onUpdate:modelValue":s[4]||(s[4]=e=>C(v)?v.value=e:null),length:l(E),class:"mt-4",onClick:M},null,8,["disabled","modelValue","length"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ta=A(wa,[["__scopeId","data-v-f8f7b607"]]);export{Ta as default};
