import{R as V,S as C,U as Y,r as i,ak as N,as as P,o as D,x as z,a,w as s,e as p,b as r,u as d,i as j,p as y,N as w,q as _,V as T,ao as A,ap as E,bx as O,h as M,L as U,F as q,bP as u,bb as Q,aX as X,c as G,g as H,aQ as J,aR as K,b2 as W,a2 as Z}from"./index.88d3c7f5.js";const ee={class:"date-picker-wrapper",style:{width:"100%"}},ae={class:"loaderText"},oe={class:"v-row"},se={class:"v-col-12"},te=r("div",{class:"d-none"},"No se encontraron datos, selecciona otros filtros",-1),re={__name:"ChartRecomendaciones",setup(R){const n=V.exports.extendMoment(C);n.locale("es",[Y]);const l=i(""),m=i(""),f=i(""),$=()=>{let e=n().subtract(2,"days").format("DD-MM-YYYY").toString(),o=n().format("DD-MM-YYYY").toString();m.value=e,f.value=o,l.value=e+" a "+o},k=e=>{const o=`rgba(${u(e.colors["on-surface"])},${e.variables["medium-emphasis-opacity"]})`,t=`rgba(${u(e.colors["on-surface"])},${e.variables["disabled-opacity"]})`,c=`rgba(${u(String(e.variables["border-color"]))},${e.variables["border-opacity"]})`,b=`rgba(${u(e.colors["on-surface"])},${e.variables["high-emphasis-opacity"]})`;return{themeSecondaryTextColor:o,themeDisabledTextColor:t,themeBorderColor:c,themePrimaryTextColor:b}},F=N(),{themeBorderColor:S,themeDisabledTextColor:h}=k(F.current.value),v=i({chart:{toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!1}},dataLabels:{enabled:!0},xaxis:{axisBorder:{show:!1},axisTicks:{color:S},labels:{style:{colors:h}},categories:[]},yaxis:{labels:{style:{colors:h}}},grid:{show:!0,borderColor:h,padding:{top:-10},xaxis:{lines:{show:!0}}}}),g=i([{name:"Total",data:[]}]),B=e=>e.map(o=>o.name),x=async()=>{const e=`https://servicio-de-actividad.vercel.app/grafico/metadato/seccion/10?fechai=${m.value}&fechaf=${f.value}`;console.log("obtenerFechaDispositivos:",e);try{const t=(await Q.get(e)).data.data,c=B(t),b=t.map(L=>L.total);v.value.xaxis.categories=c,g.value[0].data=b}catch(o){console.error("Error al obtener los datos de la API:",o)}};async function I(e){try{if(e.length>1){let o=n(e[0]).format("YYYY-MM-DD"),t=n(e[1]).format("YYYY-MM-DD");m.value=o,f.value=t,await x(o,t)}}catch(o){console.error(o)}}return P(async()=>{$(),await x()}),(e,o)=>{const t=X;return D(),z(q,null,[a(T,null,{default:s(()=>[a(p,{sm:"4",cols:"12"},{default:s(()=>[r("div",ee,[a(t,{"prepend-inner-icon":"tabler-calendar",density:"compact",modelValue:d(l),"onUpdate:modelValue":o[0]||(o[0]=c=>j(l)?l.value=c:null),"show-current":"true",onOnChange:I,config:{position:"auto right",mode:"range",altFormat:"F j, Y",dateFormat:"m-d-Y",maxDate:new Date,reactive:!0}},null,8,["modelValue","config"])])]),_:1}),a(p,{sm:"3",cols:"12"},{default:s(()=>[a(y,{color:"success",onClick:e.reset,disabled:e.isLoading},{default:s(()=>[a(w,{class:"mr-2",size:"20",icon:"tabler-refresh"}),_(" Reiniciar filtros ")]),_:1},8,["onClick","disabled"])]),_:1}),a(p,{sm:"3",cols:"12"},{default:s(()=>[a(y,{color:"primary"},{default:s(()=>[a(w,{class:"mr-2",size:"20",icon:"tabler-download"}),_(" Exportar ")]),_:1})]),_:1})]),_:1}),A(r("h3",ae,"Cargando...",512),[[E,e.isLoading]]),r("div",{class:U(e.classLoading)},[r("div",oe,[r("div",se,[a(M,null,{default:s(()=>[te,r("div",null,[a(d(O),{id:"crejemplo",type:"bar",height:"500",options:d(v),series:d(g)},null,8,["options","series"])])]),_:1})])])],2)],64)}}};const ne=V.exports.extendMoment(C);ne.locale("es",[Y]);const ce={__name:"index_old",setup(R){return(n,l)=>(D(),G(T,null,{default:s(()=>[a(p,{cols:"12"},{default:s(()=>[a(H,{class:"mt-3"},{default:s(()=>[a(M,{class:"flex-wrap justify-space-between gap-4"},{default:s(()=>[a(J,{class:"pt-0 pb-0"},{default:s(()=>[a(K,null,{default:s(()=>[_("Recomendaciones por navegaci\xF3n")]),_:1}),a(W,null,{default:s(()=>[_("Categor\xEDa de dispositivos de los \xFAltimos 7 d\xEDas")]),_:1})]),_:1}),a(Z),a(re)]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ce as default};
