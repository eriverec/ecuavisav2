import{R as k,S as E,U as C,bQ as j,r as L,as as B,v as O,u as w,o as u,c as f,w as l,a as o,aQ as D,b as t,aR as x,q as c,g as N,x as h,F as m,C as g,b4 as P,b5 as M,aM as R,t as d,b6 as F,p as y,aW as S,b3 as z}from"./index.88d3c7f5.js";const A={class:"d-flex justify-space-between"},I={class:"d-flex justify-space-between"},Q={class:"d-flex justify-end"},U=["href"],$=["href"],q=t("thead",null,[t("tr",null,[t("th",null,"NOMBRE"),t("th",null,"APELLIDO"),t("th",null,"TELEFONO"),t("th",null,"TOTAL")])],-1),W={class:"font-weight-thin"},G={class:"font-weight-thin"},H={class:"font-weight-thin"},J={class:"font-weight-thin"},Z={__name:"participantes",setup(K){k.exports.extendMoment(E).locale("es",[C]);const b="https://showandevents-service.vercel.app/all?fechai=2023-01-01&fechaf=2023-10-30",_=j([]),v=L(!0),T=async()=>{const n=(await(await fetch(b)).json()).data.map(e=>{const a=e.data[0].trivia.map(s=>({pregunta:s.pregunta,respuesta:s.respuesta}));return{name:e.data[0].name,lastname:e.data[0].lastname,telefono:e.data[0].telefono,idTrivia:e.idTrivia,pregunta:a[0].pregunta,answers:a.map(s=>s.respuesta),counts:{}}});_.push(...n),v.value=!1};B(async()=>{await T()});const V=O(()=>{const i=_.reduce((n,e)=>{const a=e.idTrivia;return n[a]||(n[a]=[]),n[a].push(e),n},{}),r={};for(const n in i)r[n]=i[n].reduce((e,a)=>{const s=`${a.name}_${a.lastname}`;return e[s]||(e[s]={name:a.name,lastname:a.lastname,telefono:a.telefono,answers:[],total:0,counts:{}},e[s].pregunta=a.pregunta),e[s].answers.push(...a.answers),e[s].total+=a.answers.length,a.answers.forEach(p=>{e[s].counts[p]?e[s].counts[p]+=1:e[s].counts[p]=1}),e},{}),r[n]=Object.values(r[n]);return r});return(i,r)=>w(v)?(u(),f(N,{key:0,class:"mt-6"},{default:l(()=>[o(D,null,{default:l(()=>[t("div",A,[o(x,null,{default:l(()=>[c("Cargando datos...")]),_:1})])]),_:1})]),_:1})):(u(),f(z,{key:1,multiple:"",class:"mt-6"},{default:l(()=>[(u(!0),h(m,null,g(w(V),(n,e)=>(u(),f(P,{class:"",key:e},{default:l(()=>[o(M,null,{default:l(()=>[t("div",I,[o(x,null,{default:l(()=>[t("div",null,[o(R,{label:"",class:"text-secundary"},{default:l(()=>[c("Trivia "+d(e),1)]),_:2},1024),c(" "+d(n[0].pregunta),1)])]),_:2},1024)])]),_:2},1024),o(F,null,{default:l(()=>[t("div",null,[t("aside",Q,[t("a",{href:"https://showandevents-service.vercel.app/export/excel?idTrivia="+e},[o(y,{size:"small",class:"me-3",variant:"text",color:"success","prepend-icon":"tabler-download"},{default:l(()=>[c(" Excel ")]),_:1})],8,U),t("a",{href:"https://showandevents-service.vercel.app/export/csv?idTrivia="+e},[o(y,{size:"small",variant:"text",color:"primary","prepend-icon":"tabler-download"},{default:l(()=>[c(" CSV ")]),_:1})],8,$)]),o(S,{class:"text-no-wrap w-100 px-4"},{default:l(()=>[q,t("tbody",null,[(u(!0),h(m,null,g(n,(a,s)=>(u(),h("tr",{key:s},[t("td",W,d(a.name),1),t("td",G,d(a.lastname),1),t("td",H,d(a.telefono),1),t("td",J,d(a.total),1)]))),128))])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1}))}};export{Z as default};
