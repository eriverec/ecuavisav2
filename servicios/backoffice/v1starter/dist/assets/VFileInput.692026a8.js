import{a7 as T,b_ as U,c8 as J,c9 as K,ai as Q,aG as W,v as c,ca as R,r as p,a9 as X,c1 as Y,c2 as Z,cb as ee,a as n,cc as le,aq as y,F as k,aM as te,cd as ne,c5 as ae,bO as ue,ce as $,bu as oe}from"./index.88d3c7f5.js";const re=T({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...U({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>J(e).every(f=>f!=null&&typeof f=="object")},...K({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,f){let{attrs:w,emit:A,slots:a}=f;const{t:h}=Q(),u=W(e,"modelValue"),V=c(()=>typeof e.showSize!="boolean"?e.showSize:void 0),I=c(()=>{var l;return((l=u.value)!=null?l:[]).reduce((t,o)=>{let{size:d=0}=o;return t+d},0)}),S=c(()=>R(I.value,V.value)),g=c(()=>{var l;return((l=u.value)!=null?l:[]).map(t=>{const{name:o="",size:d=0}=t;return e.showSize?`${o} (${R(d,V.value)})`:o})}),N=c(()=>{var o;var l;const t=(o=(l=u.value)==null?void 0:l.length)!=null?o:0;return e.showSize?h(e.counterSizeString,t,S.value):h(e.counterString,t)}),b=p(),F=p(),r=p(!1),i=p(),_=c(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function C(){if(i.value!==document.activeElement){var l;(l=i.value)==null||l.focus()}r.value||(r.value=!0)}function D(l){$(e["onClick:prepend"],l),z(l)}function z(l){var t;(t=i.value)==null||t.click(),A("click:control",l)}function j(l){l.stopPropagation(),C(),oe(()=>{u.value=[],i!=null&&i.value&&(i.value.value=""),$(e["onClick:clear"],l)})}return X(()=>{const l=!!(a.counter||e.counter),t=!!(l||a.details),[o,d]=Y(w),[{modelValue:ie,...x}]=Z(e),[E]=ee(e);return n(ae,y({ref:b,modelValue:u.value,"onUpdate:modelValue":v=>u.value=v,class:"v-file-input","onClick:prepend":D,"onClick:append":e["onClick:append"]},o,x,{focused:r.value,messages:_.value}),{...a,default:v=>{let{isDisabled:m,isDirty:P,isReadonly:H,isValid:M}=v;return n(le,y({ref:F,"prepend-icon":e.prependIcon,"onClick:control":z,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},E,{active:P.value||r.value,dirty:P.value,focused:r.value,error:M.value===!1}),{...a,default:q=>{let{props:{class:G,...L}}=q;return n(k,null,[n("input",y({ref:i,type:"file",readonly:H.value,disabled:m.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),C()},onChange:s=>{var B;if(!s.target)return;const O=s.target;u.value=[...(B=O.files)!=null?B:[]]},onFocus:C,onBlur:()=>r.value=!1},L,d),null),n("div",{class:G},[u.value.length>0&&(a.selection?a.selection({fileNames:g.value,totalBytes:I.value,totalBytesReadable:S.value}):e.chips?g.value.map(s=>n(te,{key:s,size:"small",color:e.color},{default:()=>[s]})):g.value.join(", "))])])}})},details:t?v=>{var m;return n(k,null,[(m=a.details)==null?void 0:m.call(a,v),l&&n(k,null,[n("span",null,null),n(ne,{active:!!u.value.length,value:N.value},a.counter)])])}:void 0})}),ue({},b,F,i)}});export{re as V};
