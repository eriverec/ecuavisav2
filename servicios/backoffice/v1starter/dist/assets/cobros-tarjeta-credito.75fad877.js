import{M as G,R as J,S as K,U as Q,ak as Z,r as n,as as ee,v as te,u as l,o as i,x as u,a as c,w as b,q as ae,aR as O,V as se,e as S,i as oe,b as s,L as P,N as R,bx as A,a3 as I,c as re,F as ne,C as le,t as C,aW as ce,bP as f,aX as ie,bd as de,be as ue}from"./index.88d3c7f5.js";import pe from"./pack.879db89a.js";const B=p=>(de("data-v-ed2afc97"),p=p(),ue(),p),be={key:0,class:"text-center py-3"},me={key:1},he={class:"tab-titles parentTabs"},fe={class:"tab-content"},ve={key:0,class:"tab-item"},_e={key:1,class:"tab-item"},ye={key:0,class:"text-center py-5"},ge=B(()=>s("thead",null,[s("tr",null,[s("th",null,"Tipo de Tarjeta"),s("th")])],-1)),Te=B(()=>s("td",null,"TOTAL",-1)),Ye={data(){return{selectedTab:0}},methods:{selectTab(p){this.selectedTab=p}}},xe=Object.assign(Ye,{__name:"cobros-tarjeta-credito",setup(p){const d=J.exports.extendMoment(K);d.locale("es",[Q]);const L=e=>{const t=`rgba(${f(e.colors["on-surface"])},${e.variables["medium-emphasis-opacity"]})`,r=`rgba(${f(e.colors["on-surface"])},${e.variables["disabled-opacity"]})`,a=`rgba(${f(String(e.variables["border-color"]))},${e.variables["border-opacity"]})`,o=`rgba(${f(e.colors["on-surface"])},${e.variables["high-emphasis-opacity"]})`;return{themeSecondaryTextColor:t,themeDisabledTextColor:r,themeBorderColor:a,themePrimaryTextColor:o}},N=Z(),v=n([]),{themeBorderColor:j,themeDisabledTextColor:k,themeSecondaryTextColor:z}=L(N.current.value),_=n([]),y=n(d().subtract(1,"days").format("DD-MM-YYYY").toString()+" a "+d().format("DD-MM-YYYY").toString()),g=n(!0),T=n({}),Y=n(d().format("YYYY-MM-DD")),x=n(d().subtract(1,"days").format("YYYY-MM-DD"));n(null);const q=n([]),w=n(0),M=n({chart:{type:"donut"},labels:[],legend:{position:"bottom",markers:{offsetX:-3},labels:{colors:z},itemMargin:{vertical:3,horizontal:10}}}),$=n([]);async function E(){const t=await(await fetch(`https://api-configuracion.vercel.app/web/suscriptores-conf?from=${Y.value}&to=${x.value}`)).json();if(t.status==="ok"){const a=t.resultForChart.mounts,o=Object.keys(a),D=Object.values(a);M.value.labels=o,$.value=D;const F=Object.entries(a).sort((m,h)=>h[1]-m[1]).reduce((m,[h,W])=>({...m,[h]:W}),{});t.value=F,T.value=F,w.value=Object.values(a).reduce((m,h)=>m+h,0)}else console.error("Error en la respuesta de la API")}async function H(){await fetch(`https://api-configuracion.vercel.app/web/suscriptores-conf?from=${Y.value}&to=${x.value}`).then(e=>e.json()).then(e=>{const t=e.resultForChart.mounts,r=Object.entries(t).sort((a,o)=>o[1]-a[1]).reduce((a,[o,D])=>({...a,[o]:D}),{});v.value=r,T.value=r,w.value=Object.values(t).reduce((a,o)=>a+o,0),g.value=!1})}async function U(){const t=await(await fetch("https://ecuavisa-modulos.vercel.app/paquete")).json();t.resp&&t.data&&t.data.length>0?q.value=t.data.map(r=>r.nombre):console.error("Error en la respuesta de la API")}ee(async()=>{await H(),await E(),await U()});const X=async e=>{if(e.length>1){_.value=e;let t=Array.from(_.value);Y.value=d(t[0]).format("YYYY-MM-DD"),x.value=d(t[1]).format("YYYY-MM-DD"),resolveDataRaw()}},V=te(()=>{let e;Array.from(_.value).length>0,e=v.value;const r={name:"Total",data:[]};var a=[];return a=Object.keys(e),r.data=Object.values(e),{series:[r],options:{chart:{parentHeightOffset:0,toolbar:{show:!1}},dataLabels:{enabled:!0},plotOptions:{bar:{borderRadius:8,barHeight:"60%",horizontal:!0,distributed:!0}},grid:{borderColor:j,xaxis:{lines:{show:!1}},padding:{top:-10}},yaxis:{labels:{style:{colors:k}}},xaxis:{axisBorder:{show:!1},axisTicks:{color:j},categories:a,labels:{style:{colors:k}}}}}});return(e,t)=>{const r=ie;return l(g)?(i(),u("div",be,"Cargando...")):(i(),u("div",me,[c(O,{class:"pt-4 pl-6"},{default:b(()=>[ae("Montos cobrados por tipo de tarjeta")]),_:1}),c(O,{class:"pt-4 pl-6"},{default:b(()=>[c(se,{class:"align-center"},{default:b(()=>[c(S,{cols:"4"},{default:b(()=>[c(r,{"prepend-inner-icon":"tabler-calendar",density:"compact",modelValue:l(y),"onUpdate:modelValue":t[0]||(t[0]=a=>oe(y)?y.value=a:null),"show-current":"true",onOnChange:X,config:{mode:"range",altFormat:"F j, Y",dateFormat:"d-m-Y",maxDate:new Date,position:"auto right",reactive:!0}},null,8,["modelValue","config"])]),_:1}),c(S,{cols:"8"},{default:b(()=>[c(pe)]),_:1})]),_:1})]),_:1}),s("div",he,[s("div",{class:P(["",{active:e.selectedTab===0}]),onClick:t[1]||(t[1]=a=>e.selectTab(0))},[c(R,{size:22,icon:"tabler-chart-bar"})],2),s("div",{onClick:t[2]||(t[2]=a=>e.selectTab(1)),class:P({active:e.selectedTab===1})},[c(R,{size:22,icon:"tabler-chart-pie"})],2)]),s("div",fe,[e.selectedTab===0?(i(),u("div",ve,[c(l(A),{type:"bar",height:"500",options:l(V).options,series:l(V).series},null,8,["options","series"])])):I("",!0),e.selectedTab===1?(i(),u("div",_e,[c(l(A),{type:"donut",height:"500",options:l(M),series:l($)},null,8,["options","series"])])):I("",!0)]),l(g)?(i(),u("div",ye,"Cargando...")):(i(),re(ce,{key:1,hover:"true",class:"text-no-wrap tableNavegacion mx-5 my-5"},{default:b(()=>[ge,s("tbody",null,[(i(!0),u(ne,null,le(l(T),(a,o)=>(i(),u("tr",{key:o},[s("td",null,C(o),1),s("td",null,C(a),1)]))),128)),s("tr",null,[Te,s("td",null,C(l(w)),1)])])]),_:1}))]))}}}),Ce=G(xe,[["__scopeId","data-v-ed2afc97"]]);export{Ce as default};
