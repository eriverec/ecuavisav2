import{r as u,as as K,v as X,o as C,x as D,a as e,w as a,q as r,t as y,u as l,f as Y,e as T,g as E,aR as $,h as x,b as c,p as m,c as q,aQ as N,aW as Z,F as ee,C as ae,N as L,V as P,l as te,m as se,n as le,i as S,b0 as A,bc as oe}from"./index.88d3c7f5.js";/* empty css              */const ne={class:"d-flex flex-wrap gap-4 mt-10"},re=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Id"),c("th",{scope:"col"},"Nombre"),c("th",{scope:"col"},"Acciones")])],-1),ce={class:"text-medium-emphasis"},ie={class:"text-medium-emphasis"},ue={class:"text-medium-emphasis"},de={class:"d-flex align-center justify-space-between botonescurrentPage"},_e={__name:"index",setup(me){const w=u([]),h=u(!1),g="https://ecuavisa-suscripciones.vercel.app";async function k(){try{h.value=!0;const t=await(await fetch(g+"/caracteristica")).json();w.value=t.data,h.value=!1}catch(o){console.error(o.message)}}K(async()=>{await k()});const V=8,f=u(1),I=X(()=>{const o=(f.value-1)*V,t=o+V;return w.value.slice(o,t)}),R=()=>{f.value*V<w.value.length&&f.value++},z=()=>{f.value>1&&f.value--},v=u(!1),_=u(""),d=u(""),n=u({message:"Datos guardados",type:"success",model:!1});function j(){d.value=""}function B(){j(),v.value=!1}async function H(){j(),_.value="add",v.value=!0}const F=u("");async function M(o){j(),_.value="edit";const s=(await(await fetch(g+"/caracteristica/"+o)).json()).data;F.value=s._id,d.value=s.nombre,v.value=!0}async function G(){let o=d.value;if(!o||o=="")return n.value={message:"Debe a\xF1adir un nombre",type:"error",model:!0},!1;var t=new Headers;if(t.append("Content-Type","application/json"),_.value==="add"){let b={nombre:d.value};var i=JSON.stringify(b),s={method:"POST",headers:t,body:i,redirect:"follow"};const O=await(await fetch(g+"/caracteristica",s)).json();O.resp?n.value={message:"Caracter\xEDstica creada correctamente",type:"success",model:!0}:n.value={message:O.mensaje,type:"error",model:!0}}else if(_.value==="edit"){let b={id:F.value,nombre:d.value};var i=JSON.stringify(b),s={method:"PUT",headers:t,body:i,redirect:"follow"};const U=await(await fetch(g+"/caracteristica",s)).json();U.resp?n.value={message:"Caracter\xEDstica editada correctamente",type:"success",model:!0}:n.value={message:U.mensaje,type:"error",model:!0}}await k(),v.value=!1}const p=u(!1),J=u("");function Q(o){p.value=!0,J.value=o}async function W(){var o={method:"DELETE",redirect:"follow"};const i=await(await fetch(g+"/caracteristica/"+J.value,o)).json();i.resp?n.value={message:"Caracter\xEDstica eliminado correctamente",type:"success",model:!0}:n.value={message:i.mensaje,type:"error",model:!0},await k(),p.value=!1}return(o,t)=>{const i=oe;return C(),D("section",null,[e(Y,{modelValue:l(n).model,"onUpdate:modelValue":t[0]||(t[0]=s=>l(n).model=s),location:"top end",variant:"flat",color:l(n).type},{default:a(()=>[r(y(l(n).message),1)]),_:1},8,["modelValue","color"]),e(P,null,{default:a(()=>[e(T,{cols:"12",sm:"12",lg:"12"},{default:a(()=>[e(E,null,{default:a(()=>[e($,{class:"pt-4 pl-6"},{default:a(()=>[r("Lista de caracter\xEDsticas")]),_:1}),e(x,{style:{"margin-bottom":"-2rem"}},{default:a(()=>[c("div",ne,[e(m,{"prepend-icon":"tabler-user-plus",color:"success",variant:"tonal",class:"ml-auto",onClick:H},{default:a(()=>[r(" Crear caracter\xEDstica ")]),_:1})])]),_:1}),l(h)?(C(),q(N,{key:0},{default:a(()=>[r(" Cargando datos... ")]),_:1})):(C(),q(N,{key:1},{default:a(()=>[e(Z,{class:"text-no-wrap tableNavegacion mb-5"},{default:a(()=>[re,c("tbody",null,[(C(!0),D(ee,null,ae(l(I),s=>(C(),D("tr",null,[c("td",ce,y(s._id),1),c("td",ie,y(s.nombre),1),c("td",ue,[e(m,{color:"success",variant:"text",icon:"",onClick:b=>M(s._id)},{default:a(()=>[e(L,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(m,{icon:"",color:"error",variant:"text",onClick:b=>Q(s._id)},{default:a(()=>[e(L,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),256))])]),_:1}),c("div",de,[e(m,{icon:"tabler-arrow-big-left-lines",onClick:z,disabled:l(f)===1},null,8,["disabled"]),r(" P\xE1gina "+y(l(f))+" ",1),e(m,{icon:"tabler-arrow-big-right-lines",onClick:R,disabled:l(f)*V>=l(w).length},null,8,["disabled"])])]),_:1}))]),_:1})]),_:1})]),_:1}),e(A,{modelValue:l(v),"onUpdate:modelValue":t[2]||(t[2]=s=>S(v)?v.value=s:null),persistent:"","max-width":"600"},{default:a(()=>[e(i,{onClick:B}),e(E,{class:"pa-sm-14 pa-5"},{default:a(()=>[e(N,{class:"text-center"},{default:a(()=>[e($,{class:"text-h5 mb-3"},{default:a(()=>[r(y(l(_)==="add"?"Crear una caracter\xEDstica":"Editar "+l(d)),1)]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(te,{class:"mt-6",onSubmit:se(G,["prevent"])},{default:a(()=>[e(P,{class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(P,null,{default:a(()=>[e(T,{cols:"12"},{default:a(()=>[e(le,{modelValue:l(d),"onUpdate:modelValue":t[1]||(t[1]=s=>S(d)?d.value=s:null),label:"Nombre"},null,8,["modelValue"])]),_:1})]),_:1}),e(T,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(m,{type:"submit"},{default:a(()=>[r(" Guardar ")]),_:1}),e(m,{color:"secondary",variant:"tonal",onClick:B},{default:a(()=>[r(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:l(p),"onUpdate:modelValue":t[5]||(t[5]=s=>S(p)?p.value=s:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(i,{onClick:t[3]||(t[3]=s=>p.value=!l(p))}),e(E,{title:"Eliminar registro"},{default:a(()=>[e(x,null,{default:a(()=>[r(" \xBFDesea eliminar la caracter\xEDstica? ")]),_:1}),e(x,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(m,{color:"secondary",variant:"tonal",onClick:t[4]||(t[4]=s=>p.value=!1)},{default:a(()=>[r(" No, Cerrar ")]),_:1}),e(m,{onClick:W},{default:a(()=>[r(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{_e as default};
