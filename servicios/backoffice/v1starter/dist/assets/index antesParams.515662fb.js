import{r as u,I as wa,Q as T,bu as De,as as xa,v as ee,o as g,x as M,a as e,w as a,a$ as Ca,a_ as Ia,p as V,q as p,t as _,f as xe,e as s,g as A,aR as W,aM as G,h as $,V as v,n as F,aT as ae,L as P,bC as ie,b as r,c7 as Ua,c as N,aW as Re,X as Me,N as I,u as J,Z as Ae,F as Ce,C as Ie,$ as $e,a0 as Fe,a1 as Be,b0 as He,a3 as qe,bR as ka,cG as We}from"./index.88d3c7f5.js";import{u as Ta}from"./useCategoriasListStore.d4fa8b94.js";/* empty css              */import{V as Ge}from"./VTextarea.86fae113.js";import{V as de}from"./VCheckbox.50e352e3.js";import{V as Sa}from"./VSpacer.2a3e77c9.js";import{V as Je}from"./VAlert.3e8ed100.js";const Ea={class:"position-relative"},La=r("label",{for:"nombreCampania"},"Nombre de la campa\xF1a",-1),Oa=r("label",{for:"tipocontenido"},"Tipo de contenido",-1),za=r("label",{for:"descripcionCampania"},"Descripci\xF3n de la campa\xF1a",-1),Pa=r("label",{for:"nombreCampania"},"Inserte el c\xF3digo",-1),Na=r("label",{for:"nombreCampania"},"Link del ads",-1),ja=r("label",{for:""},"URL imagen de escritorio",-1),Da=r("label",{for:""},"URL imagen de m\xF3vil",-1),Ra=r("label",{for:"tipocontenido"},"Escoge una secci\xF3n",-1),Ma=r("label",{for:"email"},"Posici\xF3n",-1),Aa={class:"d-flex justify-start mb-4"},$a=r("h3",{class:"text-h5"},"Filtrar en la plataforma",-1),Fa=r("p",{class:"mb-5"},"usuarios registrados en ecuavisa.com",-1),Ba={class:"border-transparent"},Ha={class:"border-transparent"},qa={class:"border-transparent"},Wa={class:"border-transparent"},Ga=r("label",{for:"metadatos"},"Metadatos",-1),Ja=r("label",{for:"email"},"Pa\xEDses",-1),Qa=r("label",{for:"email"},"Ciudades",-1),Xa=r("label",{for:"email"},"Dispositivos",-1),Za=r("label",{for:"navegador"},"Sistema operativo",-1),Ka=r("label",{for:"navegador"},"Navegador",-1),Ya=r("h3",{class:"text-h6 mb-4"},"Total de usuarios",-1),el={class:"d-flex align-center"},al={class:"text-h4 font-weight-bold text-center"},ll={class:"d-flex gap-3 flex-wrap"},tl={key:0},ol={class:"text-xs text-disabled"},sl={class:"d-flex justify-center mt-4"},ul={key:1,class:"text-center pa-4"},rl=r("p",{class:"text-medium-emphasis"},"No hay usuarios cargados. Por favor, importa un archivo CSV para comenzar.",-1),nl=[rl],il=r("thead",null,[r("tr",null,[r("th",null,"Nombre"),r("th",null,"Correo"),r("th",null,"Acciones")])],-1),dl={class:"text-xs text-disabled"},bl={__name:"index antesParams",setup(cl){const le=u(!1),Qe=wa();u(!1);const m=u(!1),te=u([]),S=u([]),ce=u([]),Q=u(!1),w=u(null),X=3e3,B=u(""),ve=u(""),me=u(""),pe=u(""),fe=u(""),Xe=u(""),E=u([]),f=u([]),H=u([]),L=u([]),y=u([]),h=u({}),oe=u(null),Ue=u([{title:"Otro",value:"Otro"},{title:"100",value:"100"}]),ge=u(1),_e=u(100),ke=u(null),U=u([]),Te=u([]),Se=u([]),Ee=u([]),Ze=u(null),Ke=Ta(),Ye=async()=>{try{return(await Ke.fetchCategorias()).data}catch(o){return console.error(o),o}},se=u(""),he=u([]),ea=u([{title:"Todo el sitio",value:"all",avatar:""},{title:"Lo-ultimo",value:"Lo-ultimo",avatar:""},{title:"Noticias",value:"Noticias",avatar:""},{title:"Mundo",value:"Mundo",avatar:""},{title:"Estadio",value:"Estadio",avatar:""},{title:"Entretenimiento",value:"Entretenimiento",avatar:""},{title:"Programas",value:"Programas",avatar:""},{title:"Tendencias",value:"Tendencias",avatar:""},{title:"La Noticia a Fondo",value:"la-noticia-a-fondo",avatar:""},{title:"Home",value:"Home",avatar:""}]),j=u([]),aa=u([{title:"Escritorio",value:"desktop",avatar:"mdi-laptop-chromebook"},{title:"M\xF3vil",value:"movil",avatar:"mdi-cellphone-android"}]),D=u([]),la=u([{title:"Chrome",value:"Chrome",avatar:""},{title:"Safari",value:"Safari",avatar:""},{title:"Firefox",value:"Firefox",avatar:""},{title:"Otro",value:"Otro",avatar:""}]),q=u([]),ta=u([{title:"Windows",value:"Windows",avatar:"tabler-brand-windows",navegador:[{title:"Chrome",value:"Chrome"},{title:"Firefox",value:"Firefox"}]},{title:"Mac OS",value:"Mac OS",avatar:"tabler-brand-apple",navegador:[{title:"Safari",value:"Safari"},{title:"Chrome",value:"Chrome"}]},{title:"Android",value:"Android",avatar:"tabler-brand-android",navegador:[{title:"Chrome",value:"Chrome"},{title:"Firefox",value:"Firefox"}]},{title:"Linux",value:"Linux",avatar:"mdi-linux",navegador:[{title:"Chrome",value:"Chrome"}]},{title:"Otro",value:"Otro",avatar:"mdi-account",navegador:[{title:"Chrome",value:"Chrome"}]}]),oa=[o=>!!o||"El n\xFAmero es requerido",o=>/^\d+$/.test(o)||"Ingrese solo n\xFAmeros",o=>o>=ge.value&&o<=_e.value||"Ingrese un n\xFAmero entre "+ge.value+" y "+_e.value],sa=[{title:"Im\xE1genes locales",value:"imagen"},{title:"C\xF3digo HTML",value:"html"},{title:"C\xF3digos ADS",value:"script"}],O=[{title:"Geolocalizaci\xF3n",value:"trazabilidads"},{title:"Dispositivos",value:"dispositivos"},{title:"Metadatos",value:"metadatos"},{title:"Plataforma",value:"plataforma"}],ua=["RDTop1","RDTop2","RDTop3","RDFloating"];T(H,o=>{o.length>1&&De(()=>H.value.pop())}),T(U,o=>{o.length>5&&De(()=>U.value.pop())}),xa(async()=>{await ra(),await ia()});async function ra(){try{m.value=!0;const o=await fetch("https://ecuavisa-suscripciones.vercel.app/otros/obtener-paises-ciudades",{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Error al obtener pa\xEDses");const l=await o.json();te.value=l;const t=l.map(n=>n.country);ce.value=t,console.log("Pa\xEDses cargados:",ce.value)}catch(o){console.error("Error al cargar pa\xEDses:",o),alert("Error al cargar la lista de pa\xEDses")}finally{m.value=!1}}function na(){b.value="",k.value=[],le.value=!0}T(()=>L.value,async o=>{if(o){y.value=[],oe.value=[];const l=[];l.push({title:"Todas las ciudades",value:"0"});const t=te.value.find(i=>i.country===o);t&&t.data&&t.data.forEach(i=>{l.push({title:i.city,value:i.city})}),l.sort(Oe);const n=[...new Set(l.map(i=>i.title))];S.value=n,console.log("Ciudades cargadas:",S.value)}else S.value=[],oe.value=[]});async function ia(){try{var o=await Ye(),l=[],t=[];for(var n in o)l.push({title:o[n].__text,value:o[n].__text}),t.push(o[n].__text);Ze.value=l,t.slice().sort();const i=t.filter((d,x,C)=>C.indexOf(d)===x);Te.value=i}catch{console.error("Error al listar todos los metadatos")}}async function Z(){var o=-1,l=-1,t=f.value,n=null,i=null,d=null,x=null;(t.includes("metadatos")||t.includes("trazabilidads"))&&(l=L.value.length>0?L.value:-1,o=y.value.length>0?y.value:-1,o=o=="Todas las ciudades"?-1:o),t.includes("metadatos")&&(x=U.value||null),t.includes("dispositivos")&&(i=j.value||null),t.includes("plataforma")&&(n=q.value||null,d=D.value||null);var C=new Headers;C.append("Content-Type","application/json");var R=JSON.stringify({metadato:x,criterio:t,pais:l,ciudad:o,navegador:d,os:n,dispositivo:i}),ne={method:"POST",headers:C,body:R,redirect:"follow"};const ya=await(await fetch("https://ads-service.vercel.app/campaign/v2/usuarios/get/user/total",ne)).json();h.value=ya,console.log("data total",h.value)}const da=ee(()=>{var l;const o=((l=h.value)==null?void 0:l.total)||0;return new Intl.NumberFormat("es-ES").format(o)});u(!1);function Le(o){return o.toString().toLowerCase().replace(/[áàâä]/g,"a").replace(/[éèêë]/g,"e").replace(/[íìîï]/g,"i").replace(/[óòôö]/g,"o").replace(/[úùûü]/g,"u").replace(/[ñ]/g,"n").replace(/[^a-z0-9\-]+/g,"-").replace(/\s+/g,"-").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function ca(){var o,l;return B.value?se.value?E.value?(o=H.value)!=null&&o.length?((l=f.value)!=null&&l.length,!0):(alert("Debe seleccionar al menos una posici\xF3n"),!1):(alert("El tipo de contenido es obligatorio"),!1):(alert("La descripci\xF3n de la campa\xF1a es obligatoria"),!1):(alert("El nombre de la campa\xF1a es obligatorio"),!1)}async function va(){var l,t,n,i,d,x,C,R;if(!ca())return;const o={campaignTitle:B.value,description:se.value,type:E.value,criterial:{visibilitySection:he.value,country:L.value||-1,city:(l=y.value)!=null&&l.includes("Todas las ciudades")?-1:((t=y.value)==null?void 0:t.length)>0?y.value.join(","):-1,so:((n=q.value)==null?void 0:n.length)>0?q.value.join(","):null,dispositivo:((i=j.value)==null?void 0:i.length)>0?j.value.join(","):null,metadato:((d=U.value)==null?void 0:d.length)>0?U.value.join(","):null,navegador:((x=D.value)==null?void 0:x.length)>0?D.value.join(","):null},coleccion:f.value.join(","),position:H.value.join(","),participantes:Q.value?"personalizado":"filtrado",otroValor:((C=h.value)==null?void 0:C.total)||0,userId:Q.value?Ve.value:((R=h.value)==null?void 0:R.userIds)||[],userIdRemove:[],userIdAdd:[],statusCampaign:!0,urls:{url:me.value||"#",img:{escritorio:pe.value||"",mobile:fe.value||""},html:ve.value||""},campaignSlug:Le(B.value)};try{m.value=!0;const we=await(await fetch("https://ads-service.vercel.app/campaign/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();we.resp?(c.value={show:!0,text:"Campa\xF1a creada exitosamente",color:"success"},setTimeout(()=>{Qe.push("/apps/campaigns/list")},2e3)):c.value={show:!0,text:"Error al crear la campa\xF1a: "+(we.error||"Error desconocido"),color:"error"}}catch(ne){console.error("Error al crear la campa\xF1a:",ne),c.value={show:!0,text:"Error al crear la campa\xF1a",color:"error"}}finally{m.value=!1}}ee(()=>oa.map(o=>o(Xe.value)).filter(Boolean));function Oe(o,l){return o.title==="Todas las ciudades"?-1:l.title==="Todas las ciudades"?1:o.title<l.title?-1:o.title>l.title?1:0}function ma(o){const l={};for(const n of o){const i=n.title;l[i]||(l[i]=[]),l[i].push(n.value)}const t=[];for(const n in l)l.hasOwnProperty(n)&&t.push({title:n,value:l[n][0]});return t}T(()=>L.value,(o,l)=>{if(L.value!=null){y.value=[],oe.value=[];var t=[];t.push({title:"Todas las ciudades",value:"0"});for(var n in te.value){var i=te.value[n];if(i.country==o)for(var d in i.data){var x=i.data[d];t.push({title:x.city,value:x.city})}}t.sort(Oe);var C=Object.values(ma(t)),R=[];for(var n in C)R.push(C[n].title);S.value=R,console.log(S.value)}else S.value=[],oe.value=[]});function pa(o,l,t){const n=[];for(let i=0;i<t;i++){let d=Math.floor(Math.random()*(l-o+1))+o;d%10!==0&&(d+=10-d%10),n.push(d)}return n}async function K(){if(_e.value=h.value.total,ge.value=1,h.value.total<100)Ue.value=[{title:"Todos",value:"Todos"},{title:"Otro valor",value:"Otro"}];else{var o=pa(100,h.value.total,3),l=[];if(l.push({title:"Otro valor",value:"Otro"}),h.value.total>110)for(var t in o)l.push({title:o[t],value:o[t]});l.push({title:"Todos",value:"Todos"}),Ue.value=l}return!0}T(async()=>y.value,async(o,l)=>{S.value.length>1&&(y.value!=null?(m.value=!0,clearTimeout(w.value),w.value=setTimeout(async()=>{await Z(),m.value=!1},X),await K()):h.value={})}),T(async()=>j.value,async(o,l)=>{j.value!=null?(m.value=!0,clearTimeout(w.value),w.value=setTimeout(async()=>{await Z(),m.value=!1},X),await K()):h.value={}}),T(async()=>q.value,async(o,l)=>{m.value=!0,clearTimeout(w.value),w.value=setTimeout(async()=>{await Z(),m.value=!1},X),await K()}),T(async()=>D.value,async(o,l)=>{D.value!=null?(m.value=!0,clearTimeout(w.value),w.value=setTimeout(async()=>{await Z(),m.value=!1},X),await K()):h.value={}}),T(async()=>U.value,async(o,l)=>{U.value!=null?(m.value=!0,clearTimeout(w.value),w.value=setTimeout(async()=>{await Z(),m.value=!1},X),await K()):h.value={}});const be=u(""),Y=u(1),z=u([]),Ve=u([]),ze=u(!1),b=u(""),k=u([]),ye=u(!1);u(null);const fa=u(!1),c=u({show:!1,text:"",color:"success"}),ga=u(!1),ue=u(null);async function Pe(){if(!(b.value.length<4)){m.value=!0;try{const l=await(await fetch(`https://ads-service.vercel.app/busqueda/user/?s=${encodeURIComponent(b.value)}`)).json();l.resp?(k.value=l.data,c.value={show:!0,text:`Se encontraron ${l.data.length} resultados`,color:"info"}):(k.value=[],c.value={show:!0,text:"No se encontraron resultados",color:"warning"})}catch(o){console.error("Error en b\xFAsqueda:",o),k.value=[],c.value={show:!0,text:"Error al realizar la b\xFAsqueda",color:"error"}}finally{m.value=!1}}}function Ne(o){z.value.some(l=>l.wylexId===o.wylexId)||(z.value.push(o),Ve.value.push(o.wylexId),c.value={show:!0,text:"Usuario agregado exitosamente",color:"success"})}const _a=ee(()=>Math.ceil(z.value.length/10)),ha=ee(()=>{const o=be.value.toLowerCase();let l=z.value;o&&(l=l.filter(n=>{const i=`${n.first_name||""} ${n.last_name||""}`.toLowerCase(),d=(n.email||"").toLowerCase();return i.includes(o)||d.includes(o)}));const t=(Y.value-1)*10;return l.slice(t,t+10)}),re=ee(()=>z.value&&z.value.length>0);function ba(){ue.value&&ue.value.click()}async function je(o){const l=o.target.files[0];if(!!l){if(!l.name.endsWith(".csv")){c.value={show:!0,text:"Por favor, selecciona un archivo CSV",color:"error"},o.target.value="";return}m.value=!0;try{(await We(()=>import("./papaparse.min.b6588840.js").then(n=>n.p),["assets/papaparse.min.b6588840.js","assets/index.88d3c7f5.js","assets/index.7a3da0b8.css"])).default.parse(l,{header:!0,complete:n=>{try{if(!n.data||!n.data.length)throw new Error("El archivo est\xE1 vac\xEDo");const i=n.data.filter(d=>d.id&&d.id.trim()!=="").map(d=>({wylexId:parseInt(d.id),firstname:d.firstname||"",last_name:d.last_name||"",email:d.email||""})).filter(d=>!isNaN(d.wylexId));if(i.length===0)throw new Error("No se encontraron usuarios v\xE1lidos");z.value=i,Ve.value=i.map(d=>d.wylexId),c.value={show:!0,text:`${i.length} usuarios cargados exitosamente`,color:"success"}}catch(i){c.value={show:!0,text:i.message,color:"error"}}}})}catch(t){c.value={show:!0,text:`Error: ${t.message}`,color:"error"}}finally{m.value=!1,o.target.value=""}}}async function Va(){if(!!re.value)try{m.value=!0;const l=(await We(()=>import("./papaparse.min.b6588840.js").then(d=>d.p),["assets/papaparse.min.b6588840.js","assets/index.88d3c7f5.js","assets/index.7a3da0b8.css"])).default.unparse({fields:["id","firstname","last_name","email"],data:z.value.map(d=>({id:d.wylexId,firstname:d.firstname||d.first_name||"",last_name:d.lastname||d.last_name||"",email:d.email||""}))}),t=new Blob([l],{type:"text/csv"}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`usuarios_campana_${Le(B.value)}_${new Date().toISOString()}.csv`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i),c.value={show:!0,text:"Usuarios exportados exitosamente",color:"success"}}catch{c.value={show:!0,text:"Error al exportar usuarios",color:"error"}}finally{m.value=!1}}return(o,l)=>(g(),M("div",Ea,[e(Ia,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=t=>m.value=t),class:"align-center justify-center",persistent:"",opacity:.8},{default:a(()=>[e(Ca,{indeterminate:"",color:"primary",size:"64"})]),_:1},8,["modelValue","opacity"]),e(xe,{modelValue:c.value.show,"onUpdate:modelValue":l[2]||(l[2]=t=>c.value.show=t),color:c.value.color,timeout:2e3,location:c.value.location||"top"},{actions:a(()=>[e(V,{color:"white",text:"",onClick:l[1]||(l[1]=t=>c.value.show=!1)},{default:a(()=>[p(" Cerrar ")]),_:1})]),default:a(()=>[p(_(c.value.text)+" ",1)]),_:1},8,["modelValue","color","location"]),e(v,null,{default:a(()=>[e(s,{cols:"12",md:"6"},{default:a(()=>[e(A,{class:"h-100"},{default:a(()=>[e(W,{class:"pa-4"},{default:a(()=>[e(G,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[p(" Detalles de Campa\xF1a ")]),_:1})]),_:1}),e($,null,{default:a(()=>[e(v,null,{default:a(()=>[e(s,{cols:"6"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[La]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(F,{id:"nombreCampania",modelValue:B.value,"onUpdate:modelValue":l[3]||(l[3]=t=>B.value=t),placeholder:"Nombre de la campa\xF1a","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"6"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Oa]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ae,{modelValue:E.value,"onUpdate:modelValue":l[4]||(l[4]=t=>E.value=t),items:sa,chips:"",clearable:"",label:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[za]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(Ge,{id:"descripcionCampania",modelValue:se.value,"onUpdate:modelValue":l[5]||(l[5]=t=>se.value=t),placeholder:"Ingrese una descripci\xF3n para la campa\xF1a","persistent-placeholder":"",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(A,{class:"h-100"},{default:a(()=>[e(W,{class:"pa-4"},{default:a(()=>[e(G,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[p(" Configuraci\xF3n de Contenido ")]),_:1})]),_:1}),e($,null,{default:a(()=>[e(v,{class:"pb-5"},{default:a(()=>[e(s,{cols:"12",class:P(E.value=="imagen"?"d-none":"")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Pa]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(Ge,{label:"C\xF3digo",modelValue:ve.value,"onUpdate:modelValue":l[6]||(l[6]=t=>ve.value=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"]),e(s,{cols:"12",class:P(E.value!="imagen"?"d-none":"")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Na]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(F,{id:"link",modelValue:me.value,"onUpdate:modelValue":l[7]||(l[7]=t=>me.value=t),placeholder:"Link del ads","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"]),e(s,{cols:"6",class:P(E.value!="imagen"?"d-none":"")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"6",md:"12"},{default:a(()=>[ja]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(F,{id:"linkImageEscritorio",modelValue:pe.value,"onUpdate:modelValue":l[8]||(l[8]=t=>pe.value=t),placeholder:"Link imagen de escritorio","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"]),e(s,{cols:"6",class:P(E.value!="imagen"?"d-none":"")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"6",md:"12"},{default:a(()=>[Da]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(F,{id:"linkImageEscritorio",modelValue:fe.value,"onUpdate:modelValue":l[9]||(l[9]=t=>fe.value=t),placeholder:"Link imagen de m\xF3vil","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(A,null,{default:a(()=>[e(W,{class:"pa-4"},{default:a(()=>[e(G,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[p(" Visibilidad en la web ")]),_:1})]),_:1}),e($,null,{default:a(()=>[e(v,null,{default:a(()=>[e(s,{cols:"6"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Ra]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ae,{modelValue:he.value,"onUpdate:modelValue":l[10]||(l[10]=t=>he.value=t),items:ea.value,chips:"",clearable:"",label:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"6"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Ma]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ie,{modelValue:H.value,"onUpdate:modelValue":l[11]||(l[11]=t=>H.value=t),multiple:"",chips:"",items:ua,variant:"outlined",label:"","persistent-hint":"","search-input":ke.value,"onUpdate:search-input":l[12]||(l[12]=t=>ke.value=t),"hide-selected":"","hide-no-data":!1,hint:""},null,8,["modelValue","search-input"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(A,null,{default:a(()=>[e(W,{class:"pa-4"},{default:a(()=>[e(G,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[p(" Target / Usuarios ")]),_:1})]),_:1}),e($,null,{default:a(()=>[r("div",Aa,[e(Ua,{modelValue:Q.value,"onUpdate:modelValue":l[13]||(l[13]=t=>Q.value=t),color:"primary",label:"Modo Personalizado","hide-details":""},null,8,["modelValue"])]),Q.value?(g(),N(v,{key:1},{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(xe,{modelValue:c.value.show,"onUpdate:modelValue":l[26]||(l[26]=t=>c.value.show=t),color:c.value.color,timeout:2e3,location:"top"},{default:a(()=>[p(_(c.value.text),1)]),_:1},8,["modelValue","color"]),e(v,{justify:"space-between",class:"mb-4"},{default:a(()=>[e(s,{cols:"4"},{default:a(()=>[e(F,{"append-inner-icon":"tabler-user-search",onInput:o.filtrarUsuarios,modelValue:be.value,"onUpdate:modelValue":l[27]||(l[27]=t=>be.value=t),label:"Buscar usuarios dentro del listado",density:"compact",disabled:!J(re)},null,8,["onInput","modelValue","disabled"])]),_:1}),e(s,{cols:"auto"},{default:a(()=>[r("div",ll,[e(V,{color:"info",onClick:Va,size:"small",disabled:!J(re)},{default:a(()=>[p(" Descargar Usuarios"),e(I,{end:"",icon:"tabler-download"})]),_:1},8,["disabled"]),e(V,{color:"success",onClick:na,size:"small"},{default:a(()=>[p(" A\xF1adir usuarios"),e(I,{end:"",icon:"mdi-account-plus"})]),_:1}),e(V,{color:"primary",onClick:ba,size:"small",loading:ga.value},{default:a(()=>[p(" Importar CSV"),e(I,{end:"",icon:"mdi-file-upload"})]),_:1},8,["loading"]),r("input",{ref_key:"fileInput",ref:ue,type:"file",accept:".csv",style:{display:"none"},onChange:je},null,544)])]),_:1})]),_:1}),J(re)?(g(),M("div",tl,[e(Ae,{lines:"two"},{default:a(()=>[(g(!0),M(Ce,null,Ie(J(ha),t=>(g(),N($e,{key:t.wylexId,border:""},{append:a(()=>[e(V,{icon:"",size:"x-small",color:"error",variant:"text",onClick:n=>o.handleDeleteUser(t.wylexId)},{default:a(()=>[e(I,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])]),default:a(()=>[e(Fe,null,{default:a(()=>[p(_(t.firstname||t.first_name)+" "+_(t.lastname||t.last_name),1)]),_:2},1024),e(Be,{class:"mt-1"},{default:a(()=>[r("span",ol,_(t.email),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),r("div",sl,[e(V,{variant:"tonal",onClick:l[28]||(l[28]=t=>Y.value--),disabled:Y.value<=1,size:"small",color:"primary"},{default:a(()=>[e(I,{start:"",icon:"tabler-arrow-left"}),p(" Anterior ")]),_:1},8,["disabled"]),e(V,{variant:"tonal",onClick:l[29]||(l[29]=t=>Y.value++),disabled:Y.value>=J(_a),size:"small",color:"primary",class:"ms-3"},{default:a(()=>[p(" Siguiente "),e(I,{end:"",icon:"tabler-arrow-right"})]),_:1},8,["disabled"])])])):(g(),M("div",ul,nl)),e(He,{modelValue:ze.value,"onUpdate:modelValue":l[31]||(l[31]=t=>ze.value=t),"max-width":"800px"},{default:a(()=>[e(A,null,{default:a(()=>[e(W,null,{default:a(()=>[p("Buscar Usuarios")]),_:1}),e($,null,{default:a(()=>[e(F,{modelValue:b.value,"onUpdate:modelValue":l[30]||(l[30]=t=>b.value=t),onInput:Pe,label:"Buscar por nombre, correo o tel\xE9fono (m\xEDnimo 4 caracteres)","append-inner-icon":"tabler-search",loading:ye.value},null,8,["modelValue","loading"]),k.value.length>0?(g(),N(Re,{key:0},{default:a(()=>[il,r("tbody",null,[(g(!0),M(Ce,null,Ie(k.value,t=>(g(),M("tr",{key:t.wylexId},[r("td",null,_(t.first_name)+" "+_(t.last_name),1),r("td",null,_(t.email),1),r("td",null,[e(V,{size:"small",color:"primary",onClick:n=>Ne(t),loading:fa.value},{default:a(()=>[p(" Agregar ")]),_:2},1032,["onClick","loading"])])]))),128))])]),_:1})):qe("",!0)]),_:1}),e(ka,null,{default:a(()=>[e(Sa),e(V,{color:"primary",text:"",onClick:o.closeSearchDialog},{default:a(()=>[p(" Cerrar ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(g(),N(v,{key:0},{default:a(()=>[e(s,{cols:"9"},{default:a(()=>[$a,Fa,e(Re,{density:"compact",class:"border-transparent mb-4"},{default:a(()=>[r("tbody",null,[r("tr",null,[r("td",Ba,[e(de,{modelValue:f.value,"onUpdate:modelValue":l[14]||(l[14]=t=>f.value=t),label:O[0].title,value:O[0].value},null,8,["modelValue","label","value"])]),r("td",Ha,[e(de,{modelValue:f.value,"onUpdate:modelValue":l[15]||(l[15]=t=>f.value=t),label:O[1].title,value:O[1].value},null,8,["modelValue","label","value"])])]),r("tr",null,[r("td",qa,[e(de,{modelValue:f.value,"onUpdate:modelValue":l[16]||(l[16]=t=>f.value=t),label:O[2].title,value:O[2].value},null,8,["modelValue","label","value"])]),r("td",Wa,[e(de,{modelValue:f.value,"onUpdate:modelValue":l[17]||(l[17]=t=>f.value=t),label:O[3].title,value:O[3].value},null,8,["modelValue","label","value"])])])])]),_:1}),e(s,{cols:"12",class:P(f.value.includes("metadatos")?"":"d-none")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Ga]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ie,{modelValue:U.value,"onUpdate:modelValue":l[18]||(l[18]=t=>U.value=t),multiple:"",chips:"",items:Te.value,variant:"outlined",label:"","persistent-hint":"","search-input":Se.value,"onUpdate:search-input":l[19]||(l[19]=t=>Se.value=t),"hide-selected":"","hide-no-data":!1,hint:""},null,8,["modelValue","items","search-input"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(s,{cols:"12",class:P(f.value.includes("trazabilidads")?"":"d-none")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"6"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Ja]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ie,{modelValue:L.value,"onUpdate:modelValue":l[20]||(l[20]=t=>L.value=t),items:ce.value,class:"pr-1",chips:"",clearable:"","menu-props":{maxHeight:"300"}},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"6"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Qa]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ie,{modelValue:y.value,"onUpdate:modelValue":l[21]||(l[21]=t=>y.value=t),multiple:"",chips:"",items:S.value,"search-input":Ee.value,"onUpdate:search-input":l[22]||(l[22]=t=>Ee.value=t),"hide-no-data":!1,"menu-props":{maxHeight:"300"},class:"custom-combobox-ciudad",disabled:m.value},null,8,["modelValue","items","search-input","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(s,{cols:"12",class:P(f.value.includes("dispositivos")?"":"d-none")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Xa]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ae,{modelValue:j.value,"onUpdate:modelValue":l[23]||(l[23]=t=>j.value=t),items:aa.value,"item-title":"title","item-value":"value",class:"pr-1",multiple:"",clearable:""},{selection:a(({item:t})=>[e(G,null,{default:a(()=>[e(Me,null,{default:a(()=>[e(I,{color:"",icon:t.raw.avatar},null,8,["icon"])]),_:2},1024),r("span",null,_(t.title),1)]),_:2},1024)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(s,{cols:"12",class:P(f.value.includes("plataforma")?"":"d-none")},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"6 pt-2"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Za]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ae,{modelValue:q.value,"onUpdate:modelValue":l[24]||(l[24]=t=>q.value=t),items:ta.value,"item-title":"title","item-value":"value",class:"pr-1",multiple:"",clearable:""},{selection:a(({item:t})=>[e(G,null,{default:a(()=>[e(Me,null,{default:a(()=>[e(I,{color:"",icon:t.raw.avatar},null,8,["icon"])]),_:2},1024),r("span",null,_(t.title),1)]),_:2},1024)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"6 pt-2"},{default:a(()=>[e(v,{"no-gutters":""},{default:a(()=>[e(s,{cols:"12",md:"12"},{default:a(()=>[Ka]),_:1}),e(s,{cols:"12",md:"12"},{default:a(()=>[e(ae,{modelValue:D.value,"onUpdate:modelValue":l[25]||(l[25]=t=>D.value=t),items:la.value,"item-title":"title","item-value":"value",class:"pr-1",chips:"",multiple:"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}),e(s,{cols:"3"},{default:a(()=>[e(A,{class:"bg-light-success"},{default:a(()=>[e($,null,{default:a(()=>[Ya,r("div",el,[e(I,{size:"32",icon:"mdi-account-group",color:"success",class:"me-2"}),r("div",null,[r("div",al,_(J(da)),1)])])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{class:"save-button",color:"success",icon:"mdi-check",size:"large",onClick:va,style:{position:"fixed",bottom:"2rem",right:"2rem"}},{default:a(()=>[e(I,{icon:"tabler-device-floppy"})]),_:1}),e(He,{modelValue:le.value,"onUpdate:modelValue":[l[34]||(l[34]=t=>le.value=t),l[35]||(l[35]=t=>t===!1&&(b.value="",k.value=[]))],"max-width":"800",persistent:!1},{default:a(()=>[e(A,null,{default:a(()=>[e(W,{class:"d-flex justify-space-between align-center pa-4"},{default:a(()=>[p(" Buscar usuarios "),e(V,{icon:"mdi-close",variant:"text",onClick:l[32]||(l[32]=t=>le.value=!1)})]),_:1}),e($,null,{default:a(()=>[e(F,{modelValue:b.value,"onUpdate:modelValue":l[33]||(l[33]=t=>b.value=t),label:"Buscar por nombre o email (m\xEDnimo 4 caracteres)","prepend-inner-icon":"mdi-magnify",loading:ye.value,clearable:"",class:"mb-4",onInput:Pe},null,8,["modelValue","loading"]),k.value.length>0?(g(),N(Ae,{key:0,lines:"two"},{default:a(()=>[(g(!0),M(Ce,null,Ie(k.value,t=>(g(),N($e,{key:t.wylexId,border:""},{append:a(()=>[e(V,{color:"primary",size:"small",onClick:n=>Ne(t)},{default:a(()=>[p(" Agregar ")]),_:2},1032,["onClick"])]),default:a(()=>[e(Fe,null,{default:a(()=>[p(_(t.first_name)+" "+_(t.last_name),1)]),_:2},1024),e(Be,{class:"mt-1"},{default:a(()=>[r("span",dl,_(t.email),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):b.value&&!ye.value&&b.value.length>=4?(g(),N(Je,{key:1,type:"info",class:"mt-4"},{default:a(()=>[p(" No se encontraron resultados ")]),_:1})):b.value&&b.value.length<4?(g(),N(Je,{key:2,type:"info",class:"mt-4"},{default:a(()=>[p(" Ingresa al menos 4 caracteres para buscar ")]),_:1})):qe("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("input",{ref_key:"fileInput",ref:ue,type:"file",accept:".csv",style:{display:"none"},onChange:je},null,544),e(xe,{modelValue:c.value.show,"onUpdate:modelValue":l[36]||(l[36]=t=>c.value.show=t),color:c.value.color,timeout:2e3,location:"top"},{default:a(()=>[p(_(c.value.text),1)]),_:1},8,["modelValue","color"])]))}};export{bl as default};
