import{r as c,R as ke,S as Te,U as Fe,v as ce,as as Se,ak as sa,o as g,x as M,a as t,w as s,h as j,a$ as Ie,u as p,i as fe,b0 as xe,g as ae,n as Ue,aW as _e,b as a,a3 as K,F as te,C as ue,t as d,aQ as ge,aR as ee,q as m,b2 as J,a2 as Ne,p as P,bx as oa,bP as me,bc as na,aX as ia,M as ra,bA as Ye,bB as ua,Q as ca,f as da,b8 as Ce,b7 as va,ba as $e,V as fa,e as pe,bC as ma,L as he,bD as be,ao as ye,N as De,ap as we,c as re,b9 as pa,a4 as ha,bd as _a,be as ga}from"./index.88d3c7f5.js";import{a as Ya}from"./apexcharts.common.8ef5f801.js";import{V as ba,a as ya}from"./VTimelineItem.36b36f8a.js";const Da=a("br",null,null,-1),wa=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Usuario"),a("th",{scope:"col"},"Correo")])],-1),xa=a("td",{colspan:"2"}," Todos los usuarios ",-1),Ma=[xa],Va=["onClick"],Ca={class:"text-medium-emphasis"},$a={key:2},ka=a("td",{colspan:"3"},"No hay datos",-1),Ta=[ka],Fa={style:{"font-size":"15px"}},Sa={class:"pl-6 pr-6 d-flex flex-wrap gap-4 w-100"},Ia={class:"date-picker-wrapper"},Ua={class:"select",style:{width:"250px","margin-top":"-22px"}},Na={__name:"ChartMetadatos",setup(E){const B=c(""),V=ke.exports.extendMoment(Te);V.locale("es",[Fe]);const y=c(""),D=c("");c([]);const $=c(null),w=c(!1),I=c(""),Y=c(null),L=c(!1),C=c([]),T=window.innerWidth<=768;c(V().format("DD/MM/YYYY HH:mm:ss").toString()),c(JSON.parse(localStorage.getItem("userData")));const W=async(r=!1)=>{let i=V().subtract(7,"days").format("DD-MM-YYYY").toString(),x=V().format("DD-MM-YYYY").toString();y.value=i,D.value=x,B.value=i+" a "+x};async function Q(){await fetch(`https://servicio-de-actividad.vercel.app/metadato/usuario/all/${y.value}/to/${D.value}`).then(r=>r.json()).then(r=>{r.resp&&($.value=r.data,Y.value=null)}).catch(r=>r)}async function A(r){await fetch(`https://servicio-de-actividad.vercel.app/meta/navegation/group/${r}?fechai=${y.value}&fechaf=${D.value}`).then(i=>i.json()).then(i=>{C.value=i.data}).catch(i=>i)}const le=ce(()=>{if(I.value){const r=I.value.toLowerCase();return $.value.filter(i=>{const x=`${i.user.last_name} ${i.user.first_name}`.toLowerCase(),R=i.user.email.toLowerCase();return x.includes(r)||R.includes(r)})}else return $.value});async function de(r){try{if(r.length>1){let i=V(r[0]).format("YYYY-MM-DD"),x=V(r[1]).format("YYYY-MM-DD");y.value=i,D.value=x,L.value=!0,await A(0),L.value=!1,await Q()}}catch(i){console.error(i)}}async function G(r){w.value=!1;var i=0;r?(i=r.userId,Y.value=(r.user.last_name+" "+r.user.first_name).length>25?(r.user.last_name+" "+r.user.first_name).substring(0,25)+"...":r.user.last_name+" "+r.user.first_name):Y.value="Todos los usuarios",L.value=!0,await A(i),L.value=!1}Se(async()=>{W(!0)});const se=r=>{const i=`rgba(${me(r.colors["on-surface"])},${r.variables["medium-emphasis-opacity"]})`,x=`rgba(${me(r.colors["on-surface"])},${r.variables["disabled-opacity"]})`,R=`rgba(${me(String(r.variables["border-color"]))},${r.variables["border-opacity"]})`,f=`rgba(${me(r.colors["on-surface"])},${r.variables["high-emphasis-opacity"]})`;return{themeSecondaryTextColor:i,themeDisabledTextColor:x,themeBorderColor:R,themePrimaryTextColor:f}},X=sa(),{themeBorderColor:O,themeDisabledTextColor:oe}=se(X.current.value),ne=ce(()=>{let r=Array.from(C.value);const i={name:"Nivel de inter\xE9s",data:[]},x=[];for(let f in r){let U=parseInt(r[f].count);i.data.push(U),x.push(r[f]._id)}const R={chart:{parentHeightOffset:0,toolbar:{show:!1},height:i.data.length>0&&i.data.length<6?400:500},dataLabels:{enabled:!0},colors:["#00cfe8"],plotOptions:{bar:{borderRadius:0,barHeight:"30%",horizontal:i.data.length>0&&i.data.length<4||i.data.length>10||T,startingShape:"rounded"}},grid:{borderColor:O,xaxis:{lines:{show:!0}},padding:{top:-10}},yaxis:{labels:{style:{colors:oe}}},xaxis:{axisBorder:{show:!1},axisTicks:{color:O},categories:x,labels:{style:{colors:oe}}},minHeight:300};return{series:[i],options:R,intereses:x}});return(r,i)=>{const x=na,R=ia;return g(),M(te,null,[t(xe,{modelValue:p(L),"onUpdate:modelValue":i[0]||(i[0]=f=>fe(L)?L.value=f:null),width:"300"},{default:s(()=>[t(j,{class:"pt-3 text-center"},{default:s(()=>[t(Ie,{indeterminate:"",color:"primary"})]),_:1})]),_:1},8,["modelValue"]),t(xe,{modelValue:p(w),"onUpdate:modelValue":i[4]||(i[4]=f=>fe(w)?w.value=f:null),width:"700"},{default:s(()=>[t(x,{onClick:i[1]||(i[1]=f=>w.value=!p(w))}),t(ae,{title:"Usuarios entre: "+p(y)+" hasta "+p(D)},{default:s(()=>[t(j,null,{default:s(()=>[t(Ue,{type:"text",modelValue:p(I),"onUpdate:modelValue":i[2]||(i[2]=f=>fe(I)?I.value=f:null),label:"Buscar por nombre",placeholder:"Buscar usuarios"},null,8,["modelValue"]),Da,t(_e,{style:{width:"100%"},class:"text-no-wrap tableNavegacion mb-5",hover:"true"},{default:s(()=>[wa,a("tbody",null,[p($).length>0?(g(),M("tr",{key:0,class:"clickable",onClick:i[3]||(i[3]=f=>G(null))},Ma)):K("",!0),p($).length>0?(g(!0),M(te,{key:1},ue(p(le),f=>(g(),M("tr",{key:f.userId,class:"clickable",onClick:U=>G(f)},[a("td",null,d((f.user.last_name+" "+f.user.first_name).length>25?(f.user.last_name+" "+f.user.first_name).substring(0,25)+"...":f.user.last_name+" "+f.user.first_name),1),a("td",Ca,d(f.user.email),1)],8,Va))),128)):(g(),M("tr",$a,Ta))])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),t(ae,null,{default:s(()=>[t(ge,{class:"d-flex flex-wrap justify-space-between gap-4 w-100"},{default:s(()=>[t(ee,{class:"d-flex flex-wrap justify-space-between gap-4 w-100"},{default:s(()=>[m(" Filtros metadatos "),a("small",Fa,"Datos desde "+d(p(y))+" hasta "+d(p(D)),1)]),_:1}),t(J,null,{default:s(()=>[m(" Puede visualizar los metadatos m\xE1s utilizados por usuario y por fecha ")]),_:1}),t(J),t(Ne)]),_:1}),a("div",Sa,[a("div",Ia,[t(R,{style:{width:"280px"},label:"Rango de fecha",onOnChange:de,modelValue:p(B),"onUpdate:modelValue":i[5]||(i[5]=f=>fe(B)?B.value=f:null),"prepend-inner-icon":"tabler-calendar",density:"compact",config:{position:"auto right",mode:"range",altFormat:"F j, Y",dateFormat:"d-m-Y",maxDate:new Date,reactive:!0}},null,8,["modelValue","config"])]),a("div",Ua,[a("small",null,d(p(Y)?"Usuario seleccionado":"Seleccionar usuario"),1),t(P,{color:p(Y)?"success":"primary",width:"300px",variant:"outlined",onClick:i[6]||(i[6]=f=>w.value=!p(w))},{default:s(()=>[m(d(p(Y)?`${p(Y)}`:"Seleccionar usuario"),1)]),_:1},8,["color"])])]),t(j,null,{default:s(()=>[t(p(oa),{type:"bar",options:p(ne).options,series:p(ne).series},null,8,["options","series"])]),_:1})]),_:1})],64)}}};const z=E=>(_a("data-v-3ef86df7"),E=E(),ga(),E),Ha={title:"Metadatos, navegaci\xF3n de usuarios"},Pa=z(()=>a("br",null,null,-1)),Ra={class:"d-flex"},za={class:"descripcion"},ja={class:"bg-ecuavisa py-2"},Ba={class:"date-picker-wrapper",style:{width:"250px"}},La={style:{width:"15rem"}},Oa=z(()=>a("thead",null,[a("tr",null,[a("th",{scope:"col"},"T\xCDTULO DE P\xC1GINA"),a("th",{scope:"col"},"VISITAS")])],-1)),Aa=["onClick"],Ea={class:"text-medium-emphasis"},Qa={class:"d-flex align-center justify-space-between botonescurrentPage"},qa={class:"tab-titles"},Ja={class:"tab-content"},Wa=z(()=>a("br",null,null,-1)),Ga={key:0,class:"tab-item"},Xa={style:{display:"flex","flex-wrap":"wrap"}},Za={style:{width:"max-content"}},Ka={style:{"margin-left":"auto","margin-bottom":"0.80rem"}},et={style:{}},at=z(()=>a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Nombre"),a("th",{scope:"col"},"Fecha"),a("th",{scope:"col"},"Visitas"),a("th",{scope:"col"},"Hora")])],-1)),tt=["onClick"],lt={class:"text-high-emphasis"},st={class:"text-medium-emphasis"},ot={class:"text-medium-emphasis"},nt={class:"text-medium-emphasis"},it={class:"d-flex align-center justify-space-between botonescurrentPage"},rt={key:1,class:"tab-item"},ut={style:{display:"flex","flex-wrap":"wrap"}},ct={style:{width:"max-content"}},dt={style:{}},vt=z(()=>a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Nombre"),a("th",{scope:"col"},"Fecha"),a("th",{scope:"col"},"Hora")])],-1)),ft=["href"],mt={class:"url-temas",style:{"margin-left":"-12px"}},pt={class:"text-medium-emphasis"},ht={class:"text-medium-emphasis"},_t={key:1},gt=z(()=>a("td",{colspan:"3"},"No hay datos",-1)),Yt=[gt],bt={class:"d-flex align-center justify-space-between botonescurrentPage"},yt={class:"d-flex justify-space-between align-center flex-wrap"},Dt={class:"text-base font-weight-semibold me-1"},wt=z(()=>a("b",null,"Tipo: ",-1)),xt={class:"mb-1"},Mt={style:{display:"flex",gap:"20px"}},Vt=["href"],Ct={class:"text-primary font-weight-semibold text-sm"},$t=["href"],kt=z(()=>a("h6",{class:"text-primary font-weight-semibold text-sm"}," Ir a la secci\xF3n ",-1)),Tt=z(()=>a("br",null,null,-1)),Ft=z(()=>a("br",null,null,-1)),St={style:{"text-align":"center"}},It=z(()=>a("div",{id:"chart"},null,-1)),Ut={data(){return{selectedTabMeta:0}},methods:{selectTabMeta(E){this.selectedTabMeta=E}}},Nt=Object.assign(Ut,{__name:"index",setup(E){const B=c("tab-meta-data"),V=ke.exports.extendMoment(Te);V.locale("es",[Fe]);const y=8,D=c(1),$=c(1),w=c(1),I=c([]),Y=c(!1),L=c(""),C=c(""),T=c(""),W=c([]),Q=c([]);c(!1);const A=c(""),le=c(!1),de=c([]),G=c(""),se=c([]),X=c([]),O=c(!1),oe=c(null),ne=c(null),r=c(!1),i=c(""),x=c([]);c(V().format("DD/MM/YYYY HH:mm:ss").toString()),c(JSON.parse(localStorage.getItem("userData")));const R=Ye(),f=c({i:R.i,f:R.f,title:R.title}),U=c({message:"Datos guardados",type:"success",model:!1}),ie=c("Hoy"),He=ua();function Pe(n,l){const e={};for(const o of n){const v=o._id;e[v]?e[v].navegaciones+=o.navegaciones:e[v]={...o}}for(const o of l){const v=o._id;e[v]?e[v].navegaciones+=o.navegaciones:e[v]={...o}}return Object.values(e)}async function Me(n,l,e="asc"){if(e!=="asc"&&e!=="desc")throw new Error('Invalid order. Use "asc" for ascending or "desc" for descending.');const u=[...n];return u.sort((o,v)=>e==="asc"?o[l]<v[l]?-1:1:o[l]>v[l]?-1:1),u}async function Ve(n="",l=""){try{var e=[];let u=1,o=700;for(;;){const b=await(await fetch("https://servicio-de-actividad.vercel.app/meta/all/?"+new URLSearchParams({fechai:n,fechaf:l,limit:o,page:u}))).json();if(b.data.length===0)break;const h=b.data.filter(_=>_.vocname!=="ecv_author"&&_.vocname!="usuarios_ecuavisa");e=Pe(e,h),x.value=await Me(Object.values(e),"navegaciones","desc"),I.value=await Me(Object.values(e),"navegaciones","desc"),u+=1}}catch{U.value={message:"No se pudo recuperar los datos, por favor intente nuevamente.",type:"error",timeout:4e3,model:!0}}}const Re=()=>{L.value=C.value+" a "+T.value};Se(async()=>{Re();let n=Ye(ie.value);f.value={i:n.i,f:n.f,title:n.title},D.value=1;let l=n.i.format("YYYY-MM-DD"),e=n.i.format("YYYY-MM-DD");C.value=l,T.value=e,Y.value=!0,await Ve(l,e),Y.value=!1});const ze=()=>{if(i.value!==""){D.value=1;const n=i.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),l=x.value.filter(e=>e._id.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(n));I.value=l}},je=ce(()=>{const n=(D.value-1)*y,l=n+y;return I.value.slice(n,l)}),Be=()=>{D.value*y<I.value.length&&D.value++},Le=()=>{D.value>1&&D.value--},Oe=()=>{D.value=1,i.value="",le.value=!1,O.value=!1,I.value=x.value},Ae=ce(()=>{const n=(w.value-1)*y,l=n+y;return Q.value.slice(n,l)}),Ee=()=>{w.value*y<Q.value.length&&w.value++},Qe=()=>{w.value>1&&w.value--};async function qe(n){await fetch(`https://servicio-de-actividad.vercel.app/temas/navegation/${n}?fechai=${C.value}&fechaf=${T.value}`).then(l=>l.json()).then(l=>{var e=l.data[0].navigationRecord,u=[],o=["DD/MM/YYYY","DD/M/YYYY","M/DD/YYYY","YYYY-MM-DD","DD-MM-YYYY","M/D/YYYY","D/M/YYYY"],v=["DD/MM/YYYY HH:mm:ss","DD/MM/YYYY H:mm:ss","DD/MM/YYYY H:mm:ss a","DD/MM/YYYY HH:mm:ss a"];for(var b in e){const N=e[b];var h=V(N.fecha,o,!0).format("DD/MM/YYYY"),_=N.hora.split(":");if(_[2].indexOf(" ")>=0){let Z=_[2].split(" ");_[2]=Z[0]}let k=_[0]+":"+_[1]+":"+_[2],H=h+" "+k,S=V(H,v,!0).format();var F={id:b*1+1,url:N.url,title:N.title,fecha:h,fechaRaw:N.fecha,fullFecha:S,hora:k};u.push(F)}Q.value=u,Y.value=!1}).catch(l=>(U.value={message:"No se pudo recuperar los datos de navegaci\xF3n, por favor intente nuevamente.",type:"error",timeout:4e3,model:!0},console.error(l)))}async function Je(n){$.value=1,w.value=1,O.value==!0&&(O.value=!1),A.value=n,oe.value=n,Y.value=!0,await fetch(`https://servicio-de-actividad.vercel.app/meta/usuario/${n}?fechai=${C.value}&fechaf=${T.value}`).then(l=>l.json()).then(l=>{let e=Array.from(l.data);de.value=e;const u=[];for(let b of e){let h=b.user;var o=["DD/MM/YYYY","DD/M/YYYY","D/M/YYYY","M/DD/YYYY","YYYY-MM-DD","DD-MM-YYYY","M/D/YYYY"],v=["DD/MM/YYYY HH:mm:ss","DD/MM/YYYY H:mm:ss"];let _=b.lastTimestamp.split(","),F=_[0],N=_[1],k=V(F,o,!0).format("DD/MM/YYYY"),H=N.split(":");if(H[2].indexOf(" ")>=0){let q=H[2].split(" ");H[2]=q[0]}let S=H[0]+":"+H[1]+":"+H[2],Z=k+" "+S.trim(),ve=V(Z,v,!0).format();if(C.value==T.value){if(V(F,"DD-MM-YYYY").format("YYYY-MM-DD")==C.value){let q={userId:b.userId,first_name:h.first_name,last_name:h.last_name,fecha:k,fullFecha:ve,hora:S,visitas:b.visitas};u.push(q)}}else{let q={userId:b.userId,first_name:h.first_name,last_name:h.last_name,fecha:k,fullFecha:ve,hora:S,visitas:b.visitas};u.push(q)}}u.sort((b,h)=>{var _=new Date(b.fullFecha),F=new Date(h.fullFecha);return F-_}),W.value=u,le.value=!0,Y.value=!1}).catch(l=>(Y.value=!1,U.value={message:"No se pudo recuperar los datos de navegaci\xF3n de usuarios, por favor intente nuevamente.",type:"error",timeout:4e3,model:!0},console.error(l))),await qe(n)}const We=ce(()=>{const n=($.value-1)*y,l=n+y;return W.value.slice(n,l)}),Ge=()=>{$.value*y<W.value.length&&$.value++},Xe=()=>{$.value>1&&$.value--};async function Ze(n,l,e){r.value=!1,G.value=l+" "+e,ne.value=n,Y.value=!0;try{const u=document.querySelector("#chart");u&&(u.innerHTML="");const v=await(await fetch(`https://servicio-de-actividad.vercel.app/meta/navegation/group/${n}?fechai=${C.value}&fechaf=${T.value}`)).json();if(v.resp){const b=v.data.map(F=>F.count),h=v.data.map(F=>F._id),_={chart:{toolbar:{show:!1},type:"bar",height:500},series:[{name:"Nivel de inter\xE9s",data:b}],plotOptions:{bar:{borderRadius:1,barHeight:"30%",horizontal:!0,startingShape:"rounded"}},grid:{borderColor:"#eee",xaxis:{lines:{show:!1}},padding:{top:-10}},xaxis:{categories:h}};setTimeout(function(){new Ya(document.querySelector("#chart"),_).render()},700)}}catch(u){U.value={message:"No se pudo recuperar los datos de navegaci\xF3n para usuarios agrupados, por favor intente nuevamente.",type:"error",timeout:4e3,model:!0},console.error(u)}await fetch(`https://servicio-de-actividad.vercel.app/meta/navegation/${n}?fechai=${C.value}&fechaf=${T.value}`).then(u=>u.json()).then(u=>{let o=Array.from(u.data);const v=[];for(let N of o)for(let k of N.navigationRecord){var b=["DD/MM/YYYY","DD/M/YYYY","M/DD/YYYY","YYYY-MM-DD","DD-MM-YYYY","M/D/YYYY","D/M/YYYY"],h=["DD/MM/YYYY HH:mm:ss","DD/MM/YYYY H:mm:ss","DD/MM/YYYY H:mm:ss a","DD/MM/YYYY HH:mm:ss a"];let H=V(k.fecha,b,!0).format("DD/MM/YYYY"),S=k.hora.split(":");if(S[2].indexOf(" ")>=0){let la=S[2].split(" ");S[2]=la[0]}let Z=S[0]+":"+S[1]+":"+S[2],ve=H+" "+Z,q=V(ve,h,!0).format();var _="",F=k.url;F.split("/").length>5||F.includes("metadatos")?_="Nota":_="Secci\xF3n";let ta={first_name:N.first_name,last_name:N.last_name,url:k.url,title:k.title,fecha:H,fechaRaw:k.fecha,fullFecha:q,hora:Z,tipo:_};v.push(ta)}v.sort((N,k)=>{var H=new Date(N.fullFecha),S=new Date(k.fullFecha);return S-H}),se.value=v.slice(0,10),X.value=v,O.value=!0,Y.value=!1}).catch(u=>(U.value={message:"No se pudo recuperar los datos de navegaci\xF3n por metadatos, por favor intente nuevamente.",type:"error",timeout:4e3,model:!0},console.error(u)))}function Ke(n){for(var l=typeof n!="object"?JSON.parse(n):n,e="",u=0;u<l.length;u++){var o="";for(var v in l[u])o!=""&&(o+=","),o+=l[u][v];e+=o+`\r
`}return e}function ea(n,l,e){n&&l[0].wylexId!=="wylexId"&&l.unshift(n);var u=JSON.stringify(l),o=Ke(u),v=e+".csv"||"export.csv",b=new Blob([o],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(b,v);else{var h=document.createElement("a");if(h.download!==void 0){var _=URL.createObjectURL(b);h.setAttribute("href",_),h.setAttribute("download",v),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)}}}async function aa(){const n=[];for(let u of de.value){let o=u.user,v={userId:u.userId,first_name:o==null?void 0:o.first_name,last_name:o==null?void 0:o.last_name,avatar:o==null?void 0:o.avatar,country:o==null?void 0:o.country,email:o==null?void 0:o.email,gender:o==null?void 0:o.gender,identification_number:o==null?void 0:o.identification_number,phone_number:o==null?void 0:o.phone_number,provider:o==null?void 0:o.provider,site:o==null?void 0:o.site,lastTimestamp:u.lastTimestamp,visitas:u.visitas};n.push(v)}let l={userId:"userId",first_name:"first_name",last_name:"last_name",avatar:"avatar",country:"country",email:"email",gender:"gender",identification_number:"identification_number",phone_number:"phone_number",provider:"provider",site:"site",lastTimestamp:"lastTimestamp",visitas:"visitas"},e="ultimas_visitas_metadatos"+A.value.replace(/[^A-Z0-9]+/ig,"_");ha("export"),ea(l,n,e)}return ca(async()=>ie.value,async()=>{let n=Ye(ie.value);f.value={i:n.i,f:n.f,title:n.title},D.value=1;let l=n.i.format("YYYY-MM-DD"),e=n.i.format("YYYY-MM-DD");C.value=l,T.value=e,Y.value=!0,await Ve(l,e),Y.value=!1}),(n,l)=>(g(),M("section",null,[t(da,{modelValue:U.value.model,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value.model=e),location:"top end",variant:"flat",timeout:U.value.timeout||2e3,color:U.value.type},{default:s(()=>[m(d(U.value.message),1)]),_:1},8,["modelValue","timeout","color"]),a("div",Ha,[t(va,{modelValue:B.value,"onUpdate:modelValue":l[1]||(l[1]=e=>B.value=e)},{default:s(()=>[t(Ce,{value:"tab-meta-data"},{default:s(()=>[m(" Trazabilidad ")]),_:1}),t(Ce,{value:"account-details",style:{display:"none"}},{default:s(()=>[m(" Temas destacados ")]),_:1})]),_:1},8,["modelValue"]),Pa,t(pa,{modelValue:B.value,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value=e)},{default:s(()=>[t($e,{value:"tab-meta-data"},{default:s(()=>[t(fa,null,{default:s(()=>[t(pe,{lg:"6",cols:"12",sm:"6"},{default:s(()=>[t(xe,{modelValue:Y.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Y.value=e),width:"300"},{default:s(()=>[t(j,{class:"pt-3 text-center"},{default:s(()=>[t(Ie,{indeterminate:"",color:"primary"})]),_:1})]),_:1},8,["modelValue"]),t(ae,null,{default:s(()=>[t(ge,{class:"header_card_item"},{append:s(()=>[a("div",ja,[a("div",Ba,[t(ma,{disabled:Y.value,modelValue:ie.value,"onUpdate:modelValue":l[3]||(l[3]=e=>ie.value=e),items:p(He),variant:"outlined",label:"Fecha","persistent-hint":"","hide-selected":"",hint:""},null,8,["disabled","modelValue","items"])])])]),default:s(()=>[a("div",Ra,[a("div",za,[t(ee,null,{default:s(()=>[m("Metadatos, Un total de "+d(I.value.length)+" registros",1)]),_:1}),t(J,null,{default:s(()=>[m("Mostrando data desde "+d(f.value.i.format("YYYY-MM-DD"))+" hasta "+d(f.value.f.format("YYYY-MM-DD")),1)]),_:1})])])]),_:1}),t(j,{class:"d-flex flex-wrap gap-4"},{default:s(()=>[a("div",La,[t(Ue,{modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),placeholder:"Buscar...",density:"compact"},null,8,["modelValue"])]),t(P,{"prepend-icon":"tabler-search",onClick:ze},{default:s(()=>[m(" Buscar ")]),_:1}),t(P,{onClick:Oe},{default:s(()=>[m(" Reiniciar ")]),_:1})]),_:1}),t(j,null,{default:s(()=>[t(_e,{class:"text-no-wrap tableNavegacion mb-5",hover:"true"},{default:s(()=>[Oa,a("tbody",null,[(g(!0),M(te,null,ue(p(je),e=>(g(),M("tr",{class:he(["clickable",{active:e._id===oe.value}]),onClick:u=>Je(e._id)},[a("td",null,d(e._id),1),a("td",Ea,d(e.navegaciones),1)],10,Aa))),256))])]),_:1}),a("div",Qa,[t(P,{icon:"tabler-arrow-big-left-lines",onClick:Le,disabled:D.value===1},null,8,["disabled"]),m(" P\xE1gina "+d(D.value)+" ",1),t(P,{icon:"tabler-arrow-big-right-lines",onClick:Be,disabled:D.value*y>=I.value.length},null,8,["disabled"])])]),_:1})]),_:1})]),_:1}),t(pe,{lg:"6",cols:"12",sm:"6"},{default:s(()=>[t(be,null,{default:s(()=>[ye(t(ae,null,{default:s(()=>[t(j,null,{default:s(()=>[a("div",qa,[a("div",{onClick:l[5]||(l[5]=e=>n.selectTabMeta(0)),class:he({active:n.selectedTabMeta===0})},"\xDAltimas Visitas",2),a("div",{onClick:l[6]||(l[6]=e=>n.selectTabMeta(1)),class:he({active:n.selectedTabMeta===1})},"Url",2)]),a("div",Ja,[Wa,n.selectedTabMeta===0?(g(),M("div",Ga,[a("div",Xa,[a("div",Za,[t(ee,null,{default:s(()=>[m(" Visitantes en: "),a("b",null,d(A.value),1)]),_:1}),t(J,{style:{"margin-top":"-10px","font-size":"12px"}},{default:s(()=>[m(" Datos desde "+d(C.value)+" hasta "+d(T.value),1)]),_:1})]),a("div",Ka,[t(P,{color:"primary",onClick:aa},{default:s(()=>[m(" Exportar ")]),_:1})])]),a("div",null,[a("div",et,[t(_e,{class:"text-no-wrap tableNavegacion mb-5",hover:"true"},{default:s(()=>[at,a("tbody",null,[(g(!0),M(te,null,ue(p(We),e=>(g(),M("tr",{class:he(["clickable",{active:e.userId===ne.value}]),onClick:u=>Ze(e.userId,e.first_name,e.last_name)},[a("td",lt,d(e.first_name)+" "+d(e.last_name),1),a("td",st,d(e.fecha),1),a("td",ot,d(e.visitas),1),a("td",nt,d(e.hora),1)],10,tt))),256))])]),_:1})]),a("div",it,[t(P,{icon:"tabler-arrow-big-left-lines",onClick:Xe,disabled:$.value===1},null,8,["disabled"]),m(" P\xE1gina "+d($.value)+" ",1),t(P,{icon:"tabler-arrow-big-right-lines",onClick:Ge,disabled:$.value*y>=W.value.length},null,8,["disabled"])])])])):K("",!0),n.selectedTabMeta===1?(g(),M("div",rt,[a("div",ut,[a("div",ct,[t(ee,null,{default:s(()=>[m(" URLs de: "),a("b",null,d(A.value),1)]),_:1}),t(J,{style:{"margin-top":"-10px","font-size":"12px"}},{default:s(()=>[m(" Datos desde "+d(C.value)+" hasta "+d(T.value),1)]),_:1})])]),a("div",null,[a("div",dt,[t(_e,{class:"text-no-wrap tableNavegacion mb-5",hover:"true"},{default:s(()=>[vt,a("tbody",null,[Q.value.length>0?(g(!0),M(te,{key:0},ue(p(Ae),e=>(g(),M("tr",{key:e.id},[a("td",null,[a("a",{style:{},target:"_blank",href:e.url,class:"d-flex align-center"},[t(De,{color:"primary",icon:"tabler-link",size:"18",class:"me-1"}),a("small",mt,d(e.url.replace(/https:\/\/www\.ecuavisa\.com/g,"")),1)],8,ft)]),a("td",pt,d(e.fechaRaw),1),a("td",ht,d(e.hora),1)]))),128)):(g(),M("tr",_t,Yt))])]),_:1})]),a("div",bt,[t(P,{icon:"tabler-arrow-big-left-lines",onClick:Qe,disabled:w.value===1},null,8,["disabled"]),m(" P\xE1gina "+d(w.value)+" ",1),t(P,{icon:"tabler-arrow-big-right-lines",onClick:Ee,disabled:w.value*y>=Q.value.length},null,8,["disabled"])])])])):K("",!0)])]),_:1})]),_:1},512),[[we,le.value]])]),_:1})]),_:1}),t(pe,{lg:"6",cols:"12",sm:"6"},{default:s(()=>[t(be,{id:"actividadusuario"},{default:s(()=>[ye(t(ae,null,{default:s(()=>[t(ge,null,{default:s(()=>[t(ee,null,{default:s(()=>[m(" Actividad del usuario "),a("b",null,d(G.value),1)]),_:1}),t(J,{style:{"margin-top":"-2px","font-size":"12px"}},{default:s(()=>[m(" Datos desde "+d(C.value)+" hasta "+d(T.value),1)]),_:1})]),_:1}),se.value.length>0?(g(),re(j,{key:0},{default:s(()=>[t(ba,{density:"compact",align:"start","truncate-line":"both",class:"v-timeline-density-compact"},{default:s(()=>[(g(!0),M(te,null,ue(r.value?X.value:se.value,e=>(g(),re(ya,{"dot-color":e.title===A.value?"success":"primary",size:"x-small"},{default:s(()=>[a("div",yt,[a("h4",Dt,d(e.title||e.url),1),a("small",null,[wt,m(d(e.tipo),1)])]),a("p",xt,d(e.fecha)+" "+d(e.hora),1),a("div",Mt,[a("a",{target:"_blank",href:e.url,class:"d-flex align-center"},[t(De,{color:"primary",icon:"tabler-link",size:"18",class:"me-1"}),a("h6",Ct,d(e.tipo=="Nota"?"Visitar en la web":"Ir a la secci\xF3n"),1)],8,Vt),e.tipo=="Nota"?(g(),M("a",{key:0,style:{display:"none!important"},target:"_blank",href:e.url.replace(/\/[^\/]*$/,""),class:"d-flex align-center"},[t(De,{color:"primary",icon:"tabler-link",size:"18",class:"me-1"}),kt],8,$t)):K("",!0)]),Tt,t(Ne)]),_:2},1032,["dot-color"]))),256))]),_:1}),Ft,a("div",St,[!r.value&&X.value.length>10?(g(),re(P,{key:0,color:"primary",onClick:l[7]||(l[7]=e=>r.value=!0)},{default:s(()=>[m("Ver m\xE1s")]),_:1})):K("",!0),r.value&&X.value.length>10?(g(),re(P,{key:1,color:"primary",onClick:l[8]||(l[8]=e=>r.value=!1)},{default:s(()=>[m("Ver menos")]),_:1})):K("",!0)])]),_:1})):(g(),re(j,{key:1},{default:s(()=>[m("No existen datos")]),_:1}))]),_:1},512),[[we,O.value]])]),_:1})]),_:1}),t(pe,{lg:"6",cols:"12",sm:"6"},{default:s(()=>[t(be,null,{default:s(()=>[ye(t(ae,null,{default:s(()=>[t(ge,null,{default:s(()=>[t(ee,null,{default:s(()=>[m(" Temas de mayor navegaci\xF3n del usuario: "),a("b",null,d(G.value),1)]),_:1}),t(J,{style:{"margin-top":"-2px","font-size":"12px"}},{default:s(()=>[m(" Datos desde "+d(C.value)+" hasta "+d(T.value),1)]),_:1})]),_:1}),t(j,null,{default:s(()=>[It]),_:1})]),_:1},512),[[we,O.value]])]),_:1})]),_:1})]),_:1})]),_:1}),t($e,{value:"account-details"},{default:s(()=>[t(Na)]),_:1})]),_:1},8,["modelValue"])])]))}}),zt=ra(Nt,[["__scopeId","data-v-3ef86df7"]]);export{zt as default};
