import{r as u,as as Ue,v as je,o as i,x as h,a as e,w as a,q as m,t as V,u as n,f as Te,h as L,a$ as Ee,i as U,b0 as X,e as v,g as M,aR as Y,b as s,p as c,c as C,aQ as R,aW as se,F as A,C as O,N as j,a3 as $,V as H,l as Ne,m as Pe,n as x,aM as De,a2 as oe,bc as ze}from"./index.88d3c7f5.js";/* empty css              */const Fe={class:"d-flex flex-wrap gap-4 mt-10"},Le=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"T\xEDtulo"),s("th",{scope:"col",style:{width:"200px"}},"Descripci\xF3n"),s("th",{scope:"col"},"Endpoint"),s("th",{scope:"col"},"Enviar respuesta"),s("th",{scope:"col"},"Respuestas"),s("th",{scope:"col"},"Acciones")])],-1),$e={class:"text-medium-emphasis"},Ae={class:"text-medium-emphasis",style:{"min-width":"200px"}},Oe={class:"text-medium-emphasis"},Se={class:"text-medium-emphasis"},Re={class:"text-medium-emphasis"},Be={class:"text-medium-emphasis"},Je={class:"d-flex align-center justify-space-between botonescurrentPage"},Ie={class:"respuesta-card mb-4 w-100"},qe={class:"d-flex align-center gap-4 mt-6 ml-4 mb-2"},Me=s("div",null,[s("h4",null,"Id del Usuario:")],-1),He={key:1,class:"ml-3"},Ge=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"Pregunta"),s("th",{scope:"col"},"Respuesta")])],-1),Qe={class:"text-medium-emphasis"},We={class:"text-medium-emphasis"},Ke=s("p",null,[s("h4",null,"Ingrese los Tags")],-1),Xe={class:"d-flex flex-wrap gap-1 items-center mb-2"},Ye=s("p",{class:"my-1"},[s("h5",null,"Tags: ")],-1),Ze={class:"d-flex flex-nowrap gap-2 items-center mb-2"},el=s("div",{class:"d-flex align-content-end flex-wrap"},[s("h4",null,"Preguntas")],-1),ll={cols:"12",class:"w-100 my-4 item-cards"},al=s("div",{class:"d-flex align-content-end flex-wrap"},[s("h4",null,"Opciones")],-1),tl={cols:"12"},il={__name:"index",setup(sl){const B=u([]),G=u(!1),g=u(!1);u(!1),u([]);async function J(){try{G.value=!0;const t=await(await fetch("https://e-learning-cuestionario.vercel.app/cuestionarios/all/get")).json();B.value=t.data,G.value=!1}catch(o){console.error(o.message)}}Ue(async()=>{g.value=!0,await J(),g.value=!1});const I=8,T=u(1),ne=je(()=>{const o=(T.value-1)*I,t=o+I;return B.value.slice(o,t)}),ue=()=>{T.value*I<B.value.length&&T.value++},ie=()=>{T.value>1&&T.value--},E=u(!1),S=u(""),k=u(""),N=u(""),f=u([]),y=u(null),P=u(""),D=u(null),w=u([{pregunta:"",puntaje:null,respuesta:"",opciones:["",""]}]),_=u({message:"Datos guardados",type:"success",model:!1}),z=u("");function re(){f.value.push(z.value),z.value=""}function ce(o){f.value.splice(o,1),z.value=""}function de(){f.value=[],z.value=""}function pe(o){navigator.clipboard.writeText("https://e-learning-cuestionario.vercel.app/cuestionarios/get/"+o),_.value={message:"Enlace copiado en el portapapeles",timeout:1e3,type:"success",model:!0}}function me(o){if(o.length===0)return!1;for(let t=0;t<o.length;t++){const r=o[t];if(!r.pregunta||r.pregunta.trim()===""||r.puntaje===null||!r.respuesta||r.respuesta.trim()===""||!r.opciones||r.opciones.length<2||r.opciones.filter(d=>d&&d.trim()!=="").length<2)return!1}return!0}function ve(){let o={pregunta:"",puntaje:null,respuesta:"",opciones:["",""]};w.value.push(o)}function fe(o){let t="";w.value[o].opciones.push(t)}function ge(o){w.value.splice(o,1)}function _e(o,t){w.value[o].opciones.splice(t,1)}function Q(){k.value="",N.value="",f.value=[],y.value=null,P.value="",D.value=null,w.value=[{pregunta:"",puntaje:null,respuesta:"",opciones:["",""]}],z.value=""}function Z(){Q(),E.value=!1}async function be(){g.value=!0,Q(),S.value="add",E.value=!0,g.value=!1}const ee=u("");async function he(o){g.value=!0,Q(),S.value="edit";const l=(await(await fetch("https://e-learning-cuestionario.vercel.app/cuestionarios/get/"+o)).json()).data;ee.value=l._id,k.value=l.titulo,f.value=l.tags,N.value=l.descripcion,y.value=l.puntosNecesarios,w.value=l.preguntas,P.value=l.fechaLimite,D.value=l.limiteTiempo,g.value=!1,E.value=!0}async function Ve(){let o=w.value,t=k.value;if(!Array.isArray(f.value)&&f.value!=null&&f.value!=""&&(f.value=[f.value]),!me(o)||!t||t==""||!N.value||f.value.length==0||y.value==null||P.value==""||D.value==null)return _.value={message:"Debe llenar todos los campos",type:"error",model:!0},!1;y.value=parseFloat(y.value).toFixed(2);let r=o.map(b=>({...b,puntaje:parseFloat(b.puntaje).toFixed(2)}));var l=new Headers;if(l.append("Content-Type","application/json"),S.value==="add"){let b={titulo:k.value,descripcion:N.value,tags:f.value,puntosNecesarios:y.value,preguntas:r,fechaLimite:P.value,limiteTiempo:D.value};var d=JSON.stringify(b),p={method:"POST",headers:l,body:d,redirect:"follow"};console.log("Enviando ",b);const K=await(await fetch("https://e-learning-cuestionario.vercel.app/cuestionarios/create",p)).json();if(K.resp)_.value={message:"Cuestionario creado correctamente",type:"success",model:!0},await J(),E.value=!1;else return _.value={message:K.mensaje,type:"error",model:!0},console.error(K.error),!1}else if(S.value==="edit"){let b={_id:ee.value,titulo:k.value,descripcion:N.value,tags:f.value,puntosNecesarios:y.value,preguntas:r,fechaLimite:P.value,limiteTiempo:D.value};var d=JSON.stringify(b),p={method:"PUT",headers:l,body:d,redirect:"follow"};const te=await(await fetch("https://e-learning-cuestionario.vercel.app/cuestionarios/update",p)).json();te.resp?(_.value={message:"Cuestionario actualizado correctamente",type:"success",model:!0},await J(),E.value=!1):_.value={message:te.mensaje,type:"error",model:!0}}}const F=u(!1),le=u("");function ye(o){g.value=!0,F.value=!0,le.value=o,g.value=!1}async function Ce(){g.value=!0;var o={method:"DELETE",redirect:"follow"};const r=await(await fetch("https://e-learning-cuestionario.vercel.app/cuestionarios/delete/"+le.value,o)).json();r.resp?_.value={message:"Cuestionario eliminado correctamente",type:"success",model:!0}:_.value={message:r.mensaje,type:"error",model:!0},await J(),F.value=!1,g.value=!1}const q=u([]),xe=u(!1),ke=u(""),ae=u([]);async function we(o,t){if(!o)return null;const l=await(await fetch("https://data.mongodb-api.com/app/backoffice1-usyys/endpoint/id?id="+o)).json();q.value[t].nombre=l.first_name+" "+l.last_name,ae.value.push(t)}return(o,t)=>{const r=ze;return i(),h("section",null,[e(Te,{modelValue:n(_).model,"onUpdate:modelValue":t[0]||(t[0]=l=>n(_).model=l),location:"top end",variant:"flat",timeout:n(_).timeout||2500,color:n(_).type},{default:a(()=>[m(V(n(_).message),1)]),_:1},8,["modelValue","timeout","color"]),e(X,{modelValue:n(g),"onUpdate:modelValue":t[1]||(t[1]=l=>U(g)?g.value=l:null),persistent:"","no-click-animation":"",width:"300"},{default:a(()=>[e(L,{class:"pt-3 text-center"},{default:a(()=>[e(Ee,{indeterminate:"",color:"primary"})]),_:1})]),_:1},8,["modelValue"]),e(H,null,{default:a(()=>[e(v,{cols:"12",sm:"12",lg:"12"},{default:a(()=>[e(M,null,{default:a(()=>[e(Y,{class:"pt-4 pl-6"},{default:a(()=>[m("Listado de cuestionarios")]),_:1}),e(L,{style:{"margin-bottom":"-2rem"}},{default:a(()=>[s("div",Fe,[e(c,{"prepend-icon":"tabler-plus",color:"success",variant:"tonal",class:"ml-auto",onClick:be},{default:a(()=>[m(" Nuevo Cuestionario ")]),_:1})])]),_:1}),n(G)?(i(),C(R,{key:0},{default:a(()=>[m(" Cargando datos... ")]),_:1})):(i(),C(R,{key:1},{default:a(()=>[e(se,{class:"text-no-wrap tableNavegacion mb-5"},{default:a(()=>[Le,s("tbody",null,[(i(!0),h(A,null,O(n(ne),l=>(i(),h("tr",null,[s("td",$e,V(l.titulo),1),s("td",Ae,V(l.descripcion),1),s("td",Oe,[e(c,{variant:"text",icon:"",onClick:d=>pe(l._id)},{default:a(()=>[e(j,{size:"22",icon:"tabler-clipboard"})]),_:2},1032,["onClick"])]),s("td",Se,[e(c,{variant:"text",icon:"",onClick:t[2]||(t[2]=()=>{})},{default:a(()=>[e(j,{size:"22",icon:"tabler-clipboard"})]),_:1})]),s("td",Re,[e(c,{variant:"text",icon:"",onClick:t[3]||(t[3]=()=>{})},{default:a(()=>[e(j,{size:"22",icon:"tabler-eye"})]),_:1})]),s("td",Be,[e(c,{color:"success",variant:"text",icon:"",onClick:d=>he(l._id)},{default:a(()=>[e(j,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(c,{icon:"",color:"error",variant:"text",onClick:d=>ye(l._id)},{default:a(()=>[e(j,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),256))])]),_:1}),s("div",Je,[e(c,{icon:"tabler-arrow-big-left-lines",onClick:ie,disabled:n(T)===1},null,8,["disabled"]),m(" P\xE1gina "+V(n(T))+" ",1),e(c,{icon:"tabler-arrow-big-right-lines",onClick:ue,disabled:n(T)*I>=n(B).length},null,8,["disabled"])])]),_:1}))]),_:1})]),_:1}),n(xe)?(i(),C(v,{key:0,cols:"12",sm:"12",lg:"12"},{default:a(()=>[e(M,null,{default:a(()=>[e(Y,{class:"pt-4 pl-6"},{default:a(()=>[m("Respuestas de "+V(n(ke)),1)]),_:1}),n(q).length>0?(i(),C(R,{key:0},{default:a(()=>[(i(!0),h(A,null,O(n(q),(l,d)=>(i(),h("div",Ie,[s("div",qe,[Me,s("div",null,[s("h4",null,V(l.idUsuario),1)]),s("div",null,[n(ae).includes(d)?$("",!0):(i(),C(c,{key:0,variant:"text",icon:"",onClick:p=>we(l.idUsuario,d)},{default:a(()=>[e(j,{size:"22",icon:"tabler-eye"})]),_:2},1032,["onClick"])),l.nombre?(i(),h("h4",He," Nombre: \xA0\xA0 "+V(l.nombre),1)):$("",!0)])]),e(se,{class:"text-no-wrap tableNavegacion mb-5"},{default:a(()=>[Ge,s("tbody",null,[(i(!0),h(A,null,O(l.respuesta,(p,b)=>(i(),h("tr",null,[s("td",Qe,V(p.pregunta),1),s("td",We,V(p.respuesta),1)]))),256))])]),_:2},1024)]))),256))]),_:1})):n(q).length==0?(i(),C(R,{key:1},{default:a(()=>[m(" No se han encontrado datos ")]),_:1})):$("",!0)]),_:1})]),_:1})):$("",!0)]),_:1}),e(X,{modelValue:n(E),"onUpdate:modelValue":t[10]||(t[10]=l=>U(E)?E.value=l:null),persistent:"","no-click-animation":"","max-width":"800"},{default:a(()=>[e(r,{onClick:Z}),e(M,{class:"pa-sm-14 pa-5"},{default:a(()=>[e(R,{class:"text-center"},{default:a(()=>[e(Y,{class:"text-h5 mb-3"},{default:a(()=>[m(V(n(S)==="add"?"Nuevo cuestionario":"Editar "+n(k)),1)]),_:1})]),_:1}),e(L,null,{default:a(()=>[e(Ne,{class:"mt-6",onSubmit:Pe(Ve,["prevent"])},{default:a(()=>[e(H,{class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(H,null,{default:a(()=>[e(v,{cols:"6"},{default:a(()=>[e(x,{modelValue:n(k),"onUpdate:modelValue":t[4]||(t[4]=l=>U(k)?k.value=l:null),label:"T\xEDtulo",placeholder:"T\xEDtulo del cuestionario"},null,8,["modelValue"])]),_:1}),e(v,{cols:"6"},{default:a(()=>[e(x,{modelValue:n(y),"onUpdate:modelValue":t[5]||(t[5]=l=>U(y)?y.value=l:null),label:"Puntos necesarios",type:"number"},null,8,["modelValue"])]),_:1}),e(v,{cols:"6"},{default:a(()=>[e(x,{modelValue:n(P),"onUpdate:modelValue":t[6]||(t[6]=l=>U(P)?P.value=l:null),label:"Fecha l\xEDmite",type:"date"},null,8,["modelValue"])]),_:1}),e(v,{cols:"6"},{default:a(()=>[e(x,{modelValue:n(D),"onUpdate:modelValue":t[7]||(t[7]=l=>U(D)?D.value=l:null),label:"L\xEDmite de tiempo en segundos",type:"number"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12"},{default:a(()=>[e(x,{modelValue:n(N),"onUpdate:modelValue":t[8]||(t[8]=l=>U(N)?N.value=l:null),label:"Descripci\xF3n",placeholder:"Descripci\xF3n del cuestionario"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12"},{default:a(()=>[Ke,s("div",Xe,[Ye,(i(!0),h(A,null,O(n(f),(l,d)=>(i(),C(De,{key:l,class:"custom-chip",title:"Eliminar tag",color:"success",closable:"","onClick:close":p=>ce(d)},{default:a(()=>[m(V(l),1)]),_:2},1032,["onClick:close"]))),128))]),s("div",Ze,[e(x,{modelValue:n(z),"onUpdate:modelValue":t[9]||(t[9]=l=>U(z)?z.value=l:null),label:"Ingrese un tag"},null,8,["modelValue"]),e(c,{class:"ml-auto",color:"primary","prepend-icon":"tabler-plus",variant:"tonal",onClick:re},{default:a(()=>[m(" A\xF1adir tag ")]),_:1}),e(c,{class:"ml-auto",color:"primary",variant:"tonal",onClick:de},{default:a(()=>[e(j,{icon:"tabler-refresh",size:"22"})]),_:1})])]),_:1}),e(v,{cols:"12",class:"d-flex"},{default:a(()=>[el,e(c,{class:"ml-auto",color:"primary","prepend-icon":"tabler-plus",variant:"tonal",onClick:ve},{default:a(()=>[m(" A\xF1adir pregunta ")]),_:1})]),_:1}),e(oe),(i(!0),h(A,null,O(n(w),(l,d)=>(i(),h("div",ll,[n(w).length>1?(i(),C(c,{key:0,class:"ml-auto boton-eleminar-itemsCards",size:"38",color:"error",onClick:p=>ge(d)},{default:a(()=>[e(j,{icon:"tabler-x",size:"22"})]),_:2},1032,["onClick"])):$("",!0),e(L,null,{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(x,{class:"mt-2",modelValue:l.pregunta,"onUpdate:modelValue":p=>l.pregunta=p,label:"Pregunta",placeholder:"Escriba la pregunta"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{cols:"12"},{default:a(()=>[e(x,{class:"mt-2",modelValue:l.puntaje,"onUpdate:modelValue":p=>l.puntaje=p,label:"Puntaje",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{cols:"12"},{default:a(()=>[e(x,{modelValue:l.respuesta,"onUpdate:modelValue":p=>l.respuesta=p,label:"Respuesta",placeholder:"Escriba la respuesta"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{cols:"12",class:"d-flex"},{default:a(()=>[al,e(c,{class:"ml-auto",color:"primary","prepend-icon":"tabler-plus",variant:"tonal",onClick:p=>fe(d)},{default:a(()=>[m(" A\xF1adir opci\xF3n ")]),_:2},1032,["onClick"])]),_:2},1024),l.opciones.length>0?(i(),C(oe,{key:0})):$("",!0),(i(!0),h(A,null,O(l.opciones,(p,b)=>(i(),h("div",tl,[e(L,{class:"text-center ml-4 my-4"},{default:a(()=>[e(H,null,{default:a(()=>[e(v,{cols:"8"},{default:a(()=>[e(x,{modelValue:l.opciones[b],"onUpdate:modelValue":W=>l.opciones[b]=W,label:"Opci\xF3n "+(b+1),placeholder:"Escriba la opci\xF3n"},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024),l.opciones.length>2?(i(),C(v,{key:0,cols:"4"},{default:a(()=>[e(c,{size:"38",color:"error",onClick:W=>_e(d,b)},{default:a(()=>[e(j,{icon:"tabler-x",size:"22"})]),_:2},1032,["onClick"])]),_:2},1024)):$("",!0)]),_:2},1024)]),_:2},1024)]))),256))]),_:2},1024)]))),256))]),_:1}),e(v,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(c,{type:"submit"},{default:a(()=>[m(" Guardar ")]),_:1}),e(c,{color:"secondary",variant:"tonal",onClick:Z},{default:a(()=>[m(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:n(F),"onUpdate:modelValue":t[13]||(t[13]=l=>U(F)?F.value=l:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(r,{onClick:t[11]||(t[11]=l=>F.value=!n(F))}),e(M,{title:"Eliminar registro"},{default:a(()=>[e(L,null,{default:a(()=>[m(" \xBFDesea eliminar la trivia? ")]),_:1}),e(L,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(c,{color:"secondary",variant:"tonal",onClick:t[12]||(t[12]=l=>F.value=!1)},{default:a(()=>[m(" No, Cerrar ")]),_:1}),e(c,{onClick:Ce},{default:a(()=>[m(" Si, eliminar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{il as default};
