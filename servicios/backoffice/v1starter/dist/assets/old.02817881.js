import{R as I,S as O,U as P,r as e,as as q,o as H,x as W,a,w as o,q as p,t as K,u as s,f as Q,e as i,b,p as C,g as X,h as N,b9 as Y,i as c,ba as Z,aR as ee,b2 as le,V as B,n as v,N as ae}from"./index.88d3c7f5.js";import{V as E}from"./VAutocomplete.bb0d71fb.js";const te={class:"demo-space-x"},oe={class:"d-flex flex-wrap py-4 gap-4 align-items-center",style:{"justify-content":"space-between"}},se={class:"px-4"},ie={__name:"old",setup(ne){I.exports.extendMoment(O).locale("es",[P]);const V=e({message:"Datos guardados",type:"success",model:!1}),w=e("tab-lista");e(!1),e(1);const L=e([]),j=e(1),S=e(1),z=e(1);e(""),e(!1),e(!1),e(!1),e(!1);const _=e([]),R=e([]),g=e([]),y=e([]),A=e([]),T=e([]),f=e("");e("2"),e(0),e([{value:1,minutoModel:null},{value:2,horaModel:null,minutoModel:null},{value:3,diaModel:null,horaModel:null,minutoModel:null},{value:4,diaModel:null,horaModel:null,mesModel:null,minutoModel:null}]),e("12:00"),e(!0),e(!1);const D=e([]);D.value=["2","3","4","5","6"],e([{title:"Lunes",value:"2",modelTime:null},{title:"Martes",value:"3",modelTime:null},{title:"Mi\xE9rcoles",value:"4",modelTime:null},{title:"Jueves",value:"5",modelTime:null},{title:"Viernes",value:"6",modelTime:null},{title:"S\xE1bado",value:"7",modelTime:null},{title:"Domingo",value:"1",modelTime:null}]),e(!1),e("Crear newsletter");const h=e(""),x=e(""),k=e(""),M=e(""),U=e("");e(""),e(""),e([]),q(async()=>{await J(),await $(),await F(),await G()});async function J(n=null,l=10){try{n==null&&(n=j.value);var t=new Headers;t.append("Content-Type","application/json");var u={method:"GET",headers:t,redirect:"follow"},r=await fetch(`https://ads-service.vercel.app/newsletter/all?page=${n}&limit=${l}`,u);const d=await r.json();var m=d.total,l=d.limit;L.value=d.data,z.value=m,S.value=Math.ceil(m/l)}catch(d){return console.error(d.message)}}async function $(){var n=JSON.stringify({grant_type:"client_credentials",client_id:"c79f7382012df0ea4c6fa37afec6374e",client_secret:"164551af334e1ec93e1b3099afd93a88"}),l={method:"POST",headers:{"Content-Type":"application/json"},body:n,redirect:"follow"};const u=await(await fetch("https://api.sendpulse.com/oauth/access_token",l)).json();f.value=u.access_token}async function F(){try{if(!f.value)return!1;var n=new Headers;n.append("Authorization","Bearer "+f.value);var l={method:"GET",headers:n,redirect:"follow"};const r=await(await fetch("https://api.sendpulse.com/addressbooks",l)).json();R.value=r;for(var t in r)_.value.push({title:`${r[t].name}`,value:r[t].id});_.value.sort((m,d)=>m.title.localeCompare(d.title))}catch(u){console.error(u.message)}}async function G(){try{if(!f.value)return!1;var n=new Headers;n.append("Authorization","Bearer "+f.value);var l={method:"GET",headers:n,redirect:"follow"};const r=await(await fetch("https://api.sendpulse.com/templates/?owner=me",l)).json();A.value=r;for(var t in r)y.value.push({title:`${r[t].name}`,value:r[t].real_id});y.value.sort((m,d)=>m.title.localeCompare(d.title))}catch(u){console.error(u.message)}}return e([]),(n,l)=>(H(),W("section",null,[a(Q,{modelValue:s(V).model,"onUpdate:modelValue":l[0]||(l[0]=t=>s(V).model=t),location:"top end",variant:"flat",color:s(V).type},{default:o(()=>[p(K(s(V).message),1)]),_:1},8,["modelValue","color"]),a(B,null,{default:o(()=>[a(i,{class:"mt-0",cols:"12",md:"12",lg:"12"},{default:o(()=>[b("div",te,[a(C,{color:"primary",variant:"text",class:"mb-4",to:{name:"apps-mailing-list"}},{default:o(()=>[p(" Lista de Newsletter ")]),_:1}),a(C,{color:"primary",class:"mb-4",to:{name:"apps-mailing-forzado"}},{default:o(()=>[p(" Enviar Forzado ")]),_:1})]),a(X,{class:"mt-5"},{default:o(()=>[a(N,null,{default:o(()=>[a(Y,{modelValue:s(w),"onUpdate:modelValue":l[9]||(l[9]=t=>c(w)?w.value=t:null)},{default:o(()=>[a(Z,{value:"tab-lista"},{default:o(()=>[b("div",oe,[b("div",null,[a(ee,null,{default:o(()=>[p(" Forzado de Newsletters ")]),_:1}),a(le,null,{default:o(()=>[p(" Esta modulo nos permite enviar boletines de manera manual ")]),_:1})])]),b("div",se,[a(N,{class:"d-flex align-center flex-wrap gap-4 px-0 pb-0 pt-2"},{default:o(()=>[a(B,null,{default:o(()=>[a(i,{cols:"12",sm:"6",md:"6"},{default:o(()=>[a(v,{"prepend-inner-icon":"tabler-clipboard-text",modelValue:s(h),"onUpdate:modelValue":l[1]||(l[1]=t=>c(h)?h.value=t:null),label:"Nombre del Newsletter",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",sm:"6",md:"6"},{default:o(()=>[a(v,{"prepend-inner-icon":"tabler-inbox",modelValue:s(x),"onUpdate:modelValue":l[2]||(l[2]=t=>c(x)?x.value=t:null),label:"Escribir descripci\xF3n corta",placeholder:"Ayuda dar al correo una descripci\xF3n breve",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",sm:"6",md:"12"},{default:o(()=>[a(v,{"prepend-inner-icon":"tabler-mail-check",modelValue:s(k),"onUpdate:modelValue":l[3]||(l[3]=t=>c(k)?k.value=t:null),label:"Escribir el asunto","persistent-hint":"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(v,{"prepend-inner-icon":"tabler-lock",modelValue:s(M),"onUpdate:modelValue":l[4]||(l[4]=t=>c(M)?M.value=t:null),label:"Escribe una contrase\xF1a",type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",sm:"6"},{default:o(()=>[a(v,{"prepend-inner-icon":"tabler-eye",modelValue:s(U),"onUpdate:modelValue":l[5]||(l[5]=t=>c(U)?U.value=t:null),label:"Link de vista previa",type:"Ingrese el link de la vista previa",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",sm:"6"},{default:o(()=>[a(E,{"prepend-inner-icon":"tabler-users",modelValue:s(g),"onUpdate:modelValue":l[6]||(l[6]=t=>c(g)?g.value=t:null),items:s(_),label:"Lista de usuarios"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",sm:"12"},{default:o(()=>[a(E,{"prepend-inner-icon":"tabler-template",modelValue:s(T),"onUpdate:modelValue":l[7]||(l[7]=t=>c(T)?T.value=t:null),items:s(y),label:"Lista de plantillas del sendpulse"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",sm:"6",md:"12"},{default:o(()=>[a(C,{color:"success",class:"mb-4",onClick:l[8]||(l[8]=()=>{})},{default:o(()=>[a(ae,{size:22,icon:"tabler-mail-fast"}),p(" Enviar bolet\xEDn ")]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{ie as default};
