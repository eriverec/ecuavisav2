import{R as U,S as L,U as F,r as m,as as I,v as M,o as f,c as x,w as s,a as l,e as P,g as j,aQ as V,b as e,aR as E,q as g,p as C,u as i,h as N,aW as J,x as k,F as Y,C as z,t as u,a2 as A,V as H}from"./index.88d3c7f5.js";const $={style:{display:"flex","flex-wrap":"wrap"}},q={style:{"margin-right":"auto"}},Q={style:{"margin-left":"auto"}},W=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Id de usuario"),e("th",{scope:"col"},"Nombre"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Tel\xE9fono"),e("th",{scope:"col"},"URL de im\xE1gen")])],-1),G=["href"],K=["src"],X={class:"px-4 py-4 mt-5"},Z={class:"px-2"},te={__name:"gavilanes",setup(ee){const S=U.exports.extendMoment(L);S.locale("es",[F]);const v=m([]),p=m(1),y=m(10),b=m(1),w=m(!0);async function B(){w.value=!0,await fetch("https://phpstack-1011861-3575405.cloudwaysapps.com/servicios/gavilanes/registros.php").then(o=>o.json()).then(o=>{v.value=o,w.value=!1})}I(async()=>{await B()});const T=M(()=>{const o=(p.value-1)*y.value,a=o+y.value;let t=v.value.slice(o,a);return b.value=Math.ceil(v.value.length/y.value),t});function D(o){for(var a=typeof o!="object"?JSON.parse(o):o,t="",c=0;c<a.length;c++){var r="";for(var d in a[c])r!=""&&(r+=","),r+=a[c][d];t+=r+`\r
`}return t}function O(o,a,t){o&&a[0].wylexId!=="wylexId"&&a.unshift(o);var c=JSON.stringify(a),r=D(c),d=t+".csv"||"export.csv",h=new Blob([r],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(h,d);else{var n=document.createElement("a");if(n.download!==void 0){var _=URL.createObjectURL(h);n.setAttribute("href",_),n.setAttribute("download",d),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}}async function R(){let o={nombre:"nombre",id_usuario:"id_usuario",telefono:"telefono",correo:"correo",url_imagen:"url_imagen"},a=[];a=Array.from(v.value);let t="users_concurso_gavilanes",c=S().format("DD/MM/YYYY HH:mm:ss").toString(),r=JSON.parse(localStorage.getItem("userData"));if(r.email!=="admin@demo.com"){var d=new Headers;d.append("Content-Type","application/json");var h=JSON.stringify({usuario:r.email,pagina:"concursos-gavilanes",accion:"export",fecha:c}),n={method:"POST",headers:d,body:h,redirect:"follow"};await fetch("https://servicio-logs.vercel.app/accion",n).then(_=>{}).catch(_=>console.log("error",_))}O(o,a,t)}return(o,a)=>(f(),x(H,null,{default:s(()=>[l(P,{cols:"12"},{default:s(()=>[l(j,null,{default:s(()=>[l(V,{class:"pb-sm-0"},{default:s(()=>[e("div",$,[e("div",q,[l(E,null,{default:s(()=>[g("Usuarios")]),_:1})]),e("div",Q,[l(C,{color:"primary",onClick:R},{default:s(()=>[g(" Exportar ")]),_:1})])])]),_:1}),l(V,{class:"pb-sm-0"},{default:s(()=>[i(w)?(f(),x(N,{key:0},{default:s(()=>[g("Cargando usuarios...")]),_:1})):(f(),x(N,{key:1},{default:s(()=>[l(J,{class:"text-no-wrap tableNavegacion"},{default:s(()=>[W,e("tbody",null,[(f(!0),k(Y,null,z(i(T),t=>(f(),k("tr",null,[e("td",null,u(t.id_usuario),1),e("td",null,u(t.nombre),1),e("td",null,u(t.correo),1),e("td",null,u(t.telefono),1),e("td",null,[e("a",{class:"pt-2 pb-2",style:{display:"block"},href:"https://phpstack-1011861-3575405.cloudwaysapps.com/servicios/gavilanes/"+t.url_imagen,target:"_blank"},[e("img",{src:"https://phpstack-1011861-3575405.cloudwaysapps.com/servicios/gavilanes/"+t.url_imagen,width:"105",class:"img-gavilanes"},null,8,K)],8,G)])]))),256))])]),_:1}),l(A),e("div",X,[l(C,{disabled:i(p)===1,onClick:a[0]||(a[0]=t=>p.value-=1),size:"small",color:"primary"},{default:s(()=>[g(" Anterior ")]),_:1},8,["disabled"]),e("span",Z,u(i(p))+" de "+u(i(b))+" de un total de "+u(i(v).length)+" registros",1),l(C,{disabled:i(p)===i(b),onClick:a[1]||(a[1]=t=>p.value+=1),size:"small",color:"primary"},{default:s(()=>[g(" Siguiente ")]),_:1},8,["disabled"])])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}};export{te as default};
