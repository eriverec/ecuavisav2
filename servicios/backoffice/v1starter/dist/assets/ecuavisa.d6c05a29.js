import{R as U,S as F,U as L,r as v,as as M,v as P,o as f,c as x,w as o,a as l,e as j,g as H,aQ as V,b as e,aR as I,q as h,p as C,u as i,h as N,aW as J,x as R,F as Y,C as E,t as u,a2 as z,V as A}from"./index.88d3c7f5.js";const $={style:{display:"flex","flex-wrap":"wrap"}},q={style:{"margin-right":"auto"}},Q={style:{"margin-left":"auto"}},W=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Departamento"),e("th",{scope:"col"},"Nombre"),e("th",{scope:"col"},"Cedula"),e("th",{scope:"col"},"Tel\xE9fono"),e("th",{scope:"col"},"URL de im\xE1gen")])],-1),G=["href"],K=["src"],X={class:"px-4 py-4 mt-5"},Z={class:"px-2"},te={__name:"ecuavisa",setup(ee){const S=U.exports.extendMoment(F);S.locale("es",[L]);const m=v([]),p=v(1),b=v(10),y=v(1),w=v(!0);async function k(){w.value=!0,await fetch("https://estadisticas.ecuavisa.com/sites/services/global/dataForm.php").then(a=>a.json()).then(a=>{console.log(a),m.value=a,w.value=!1})}M(async()=>{await k()});const B=P(()=>{const a=(p.value-1)*b.value,t=a+b.value;let s=m.value.slice(a,t);return y.value=Math.ceil(m.value.length/b.value),s});function D(a){for(var t=typeof a!="object"?JSON.parse(a):a,s="",c=0;c<t.length;c++){var n="";for(var d in t[c])n!=""&&(n+=","),n+=t[c][d];s+=n+`\r
`}return s}function T(a,t,s){a&&t[0].wylexId!=="wylexId"&&t.unshift(a);var c=JSON.stringify(t),n=D(c),d=s+".csv"||"export.csv",g=new Blob([n],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(g,d);else{var r=document.createElement("a");if(r.download!==void 0){var _=URL.createObjectURL(g);r.setAttribute("href",_),r.setAttribute("download",d),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}async function O(){let a={nombres:"nombres",cedula:"cedula",telefono:"telefono",departamento:"departamento",imagen:"imagen"},t=[];t=Array.from(m.value);let s="users_concurso_ecuavisa",c=S().format("DD/MM/YYYY HH:mm:ss").toString(),n=JSON.parse(localStorage.getItem("userData"));if(n.email!=="admin@demo.com"){var d=new Headers;d.append("Content-Type","application/json");var g=JSON.stringify({usuario:n.email,pagina:"concursos-ecuavisa",accion:"export",fecha:c}),r={method:"POST",headers:d,body:g,redirect:"follow"};await fetch("https://servicio-logs.vercel.app/accion",r).then(_=>{}).catch(_=>console.log("error",_))}T(a,t,s)}return(a,t)=>(f(),x(A,null,{default:o(()=>[l(j,{cols:"12"},{default:o(()=>[l(H,null,{default:o(()=>[l(V,{class:"pb-sm-0"},{default:o(()=>[e("div",$,[e("div",q,[l(I,null,{default:o(()=>[h("Usuarios")]),_:1})]),e("div",Q,[l(C,{color:"primary",onClick:O},{default:o(()=>[h(" Exportar ")]),_:1})])])]),_:1}),l(V,{class:"pb-sm-0"},{default:o(()=>[i(w)?(f(),x(N,{key:0},{default:o(()=>[h("Cargando usuarios...")]),_:1})):(f(),x(N,{key:1},{default:o(()=>[l(J,{class:"text-no-wrap tableNavegacion"},{default:o(()=>[W,e("tbody",null,[(f(!0),R(Y,null,E(i(B),s=>(f(),R("tr",null,[e("td",null,u(s.departamento),1),e("td",null,u(s.nombres),1),e("td",null,u(s.cedula),1),e("td",null,u(s.telefono),1),e("td",null,[e("a",{class:"pt-2 pb-2",style:{display:"block"},href:"https://phpstack-1011861-3575405.cloudwaysapps.com/servicios/concursosRH/"+s.imagen,target:"_blank"},[e("img",{src:"https://phpstack-1011861-3575405.cloudwaysapps.com/servicios/concursosRH/"+s.imagen,width:"105",class:"img-gavilanes"},null,8,K)],8,G)])]))),256))])]),_:1}),l(z),e("div",X,[l(C,{disabled:i(p)===1,onClick:t[0]||(t[0]=s=>p.value-=1),size:"small",color:"primary"},{default:o(()=>[h(" Anterior ")]),_:1},8,["disabled"]),e("span",Z,u(i(p))+" de "+u(i(y))+" de un total de "+u(i(m).length)+" registros",1),l(C,{disabled:i(p)===i(y),onClick:t[1]||(t[1]=s=>p.value+=1),size:"small",color:"primary"},{default:o(()=>[h(" Siguiente ")]),_:1},8,["disabled"])])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}};export{te as default};
