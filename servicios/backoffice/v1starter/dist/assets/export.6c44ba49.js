import{r as b,o as i,x as d,b as v,a3 as h,bb as g}from"./index.88d3c7f5.js";const m=["disabled"],_={key:0},C={__name:"export",setup(w){const r=b(!1),u=async()=>{r.value=!0;let e=[],a=1;const t=100,o="664e32d4fa50c162c4a2e5c8",n="2024-05-23",c="2024-05-28";try{for(;;){const l=(await g.get("https://servicio-elearning.vercel.app/grafico/exportar/usuarios/registrados",{params:{fechai:n,fechaf:c,limit:t,page:a,idCurso:o}})).data.data;if(l.length===0)break;e=e.concat(l),a++}if(e.length===0){alert("No hay datos para exportar.");return}const s=p(e);f(s)}catch(s){console.error("Error al cargar los datos:",s),alert("Hubo un error al cargar los datos. Por favor, intenta de nuevo.")}finally{r.value=!1}},p=e=>{const a=Object.keys(e[0]),t=[];t.push(a.join(","));for(const o of e){const n=a.map(c=>`"${(""+o[c]).replace(/"/g,'\\"')}"`);t.push(n.join(","))}return t.join(`
`)},f=e=>{const a=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(a),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download","data.csv"),o.click(),window.URL.revokeObjectURL(t)};return(e,a)=>(i(),d("div",null,[v("button",{onClick:u,disabled:r.value},"Exportar a CSV",8,m),r.value?(i(),d("p",_,"Cargando datos para la descarga...")):h("",!0)]))}};export{C as default};
