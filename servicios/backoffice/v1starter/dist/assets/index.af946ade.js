import{M as j,R as z,S as E,U as F,r as c,as as U,v as $,o,c as r,w as e,a,e as M,g as Y,aQ as f,aR as N,q as u,u as l,h as p,aW as G,b as t,x as w,F as S,C as T,t as d,a2 as q,p as A,bD as Q,ao as W,ap as J,V as K,bd as O,be as X}from"./index.88d3c7f5.js";import{V as Z,a as ee}from"./VTimelineItem.36b36f8a.js";const ae=m=>(O("data-v-f341e991"),m=m(),X(),m),te=ae(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Nombre"),t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Rol")])],-1)),se=["onClick"],le={class:"px-4 py-4 mt-5"},oe={class:"px-2"},ne={style:{display:"flex","flex-wrap":"wrap"}},ie={style:{"margin-right":"auto"}},de={class:"d-flex justify-space-between align-center flex-wrap"},ce={class:"text-base font-weight-semibold me-1"},re={class:"mb-1"},ue={__name:"index",setup(m){const h=z.exports.extendMoment(E);h.locale("es",[F]);const v=c([]),_=c(1),g=c(10),b=c(1),x=c(!0),y=c([]),k=c(!1),V=c(!0),C=c("");async function B(){x.value=!0,await fetch("https://gestores-flax.vercel.app/all").then(n=>n.json()).then(n=>{v.value=n,x.value=!1})}U(B);const I=$(()=>{const n=(_.value-1)*g.value,i=n+g.value;let s=v.value.slice(n,i);return b.value=Math.ceil(v.value.length/g.value),s});async function R(n){C.value=n,V.value=!0,await fetch("https://servicio-logs.vercel.app/lista?email="+n).then(i=>i.json()).then(i=>{let s=Array.from(i);s.sort((D,H)=>{var L=new Date(h(D.fecha,"DD/MM/YYYY HH:mm:ss").format()),P=new Date(h(H.fecha,"DD/MM/YYYY HH:mm:ss").format());return P-L}),y.value=s.slice(0,30),k.value=!0,V.value=!1})}return(n,i)=>(o(),r(K,null,{default:e(()=>[a(M,{cols:"12"},{default:e(()=>[a(Y,null,{default:e(()=>[a(f,{class:"pb-sm-0"},{default:e(()=>[a(N,null,{default:e(()=>[u("Usuarios backoffice")]),_:1})]),_:1}),a(f,{class:"pb-sm-0"},{default:e(()=>[l(x)?(o(),r(p,{key:0},{default:e(()=>[u("Cargando informaci\xF3n...")]),_:1})):(o(),r(p,{key:1},{default:e(()=>[a(G,{class:"text-no-wrap tableNavegacion",hover:"true"},{default:e(()=>[te,t("tbody",null,[(o(!0),w(S,null,T(l(I),s=>(o(),w("tr",{class:"clickable",onClick:D=>R(s.email)},[t("td",null,d(s.fullName),1),t("td",null,d(s.email),1),t("td",null,d(s.role),1)],8,se))),256))])]),_:1}),a(q),t("div",le,[a(A,{disabled:l(_)===1,onClick:i[0]||(i[0]=s=>_.value-=1),size:"small",color:"primary"},{default:e(()=>[u(" Anterior ")]),_:1},8,["disabled"]),t("span",oe,d(l(_))+" de "+d(l(b))+" de un total de "+d(l(v).length)+" registros",1),a(A,{disabled:l(_)===l(b),onClick:i[1]||(i[1]=s=>_.value+=1),size:"small",color:"primary"},{default:e(()=>[u(" Siguiente ")]),_:1},8,["disabled"])])]),_:1}))]),_:1})]),_:1})]),_:1}),a(M,{cols:"12"},{default:e(()=>[a(Q,null,{default:e(()=>[W(a(Y,null,{default:e(()=>[a(f,{class:"pb-sm-0"},{default:e(()=>[t("div",ne,[t("div",ie,[a(N,null,{default:e(()=>[u("Actividad del usuario "+d(l(C)),1)]),_:1})])])]),_:1}),l(y).length==0?(o(),r(f,{key:0,class:"pb-sm-0"},{default:e(()=>[a(p,null,{default:e(()=>[u("No existe actividad")]),_:1})]),_:1})):(o(),r(f,{key:1,class:"pb-sm-0"},{default:e(()=>[l(V)?(o(),r(p,{key:0},{default:e(()=>[u("Cargando usuarios...")]),_:1})):(o(),r(p,{key:1},{default:e(()=>[a(Z,{density:"compact",align:"start","truncate-line":"both",class:"v-timeline-density-compact"},{default:e(()=>[(o(!0),w(S,null,T(l(y),s=>(o(),r(ee,{"dot-color":"primary",size:"x-small"},{default:e(()=>[t("div",de,[t("h4",ce,d(s.accion||"")+" "+d(s.pagina),1)]),t("p",re,d(s.fecha),1)]),_:2},1024))),256))]),_:1})]),_:1}))]),_:1}))]),_:1},512),[[J,l(k)]])]),_:1})]),_:1})]),_:1}))}},pe=j(ue,[["__scopeId","data-v-f341e991"]]);export{pe as default};
