import{R as j,S as L,U as B,bQ as C,r as D,as as N,v as O,o as l,x as r,u as m,c as w,w as o,a as u,aQ as g,b as t,aR as y,q as x,g as b,F as f,C as h,t as d,p as R,aW as M,b3 as P}from"./index.88d3c7f5.js";const F={class:"d-flex justify-space-between"},I={class:"d-flex justify-space-between"},A={class:"d-flex justify-end"},Q=["href"],S=t("thead",null,[t("tr",null,[t("th",null,"NOMBRE"),t("th",null,"APELLIDO"),t("th",null,"TELEFONO"),t("th",null,"EMAIL"),t("th",null,"Respuestas")])],-1),U={class:"font-weight-thin"},$={class:"font-weight-thin"},q={class:"font-weight-thin"},z={class:"font-weight-thin"},J={__name:"participantes",setup(W){j.exports.extendMoment(L).locale("es",[B]);const k="https://showandevents-service.vercel.app/all?fechai=2023-01-01&fechaf=2024-10-30&idProyecto=2&idTrivia=1",_=C([]),v=D(!0),T=async()=>{const n=(await(await fetch(k)).json()).data.map(a=>{const e=a.data[0].trivia.map(s=>({pregunta:s.pregunta,respuesta:s.respuesta}));return{name:a.data[0].name,lastname:a.data[0].lastname,telefono:a.data[0].telefono,email:a.data[0].email,idTrivia:a.idTrivia,pregunta:e[0].pregunta,answers:e.map(s=>s.respuesta),counts:{}}});_.push(...n),v.value=!1};N(async()=>{await T()});const E=O(()=>{const i=_.reduce((n,a)=>{const e=a.idTrivia;return n[e]||(n[e]=[]),n[e].push(a),n},{}),c={};for(const n in i)c[n]=i[n].reduce((a,e)=>{const s=`${e.name}_${e.lastname}`;return a[s]||(a[s]={name:e.name,lastname:e.lastname,telefono:e.telefono,email:e.email,answers:[],total:0,counts:{}},a[s].pregunta=e.pregunta),a[s].answers.push(...e.answers),a[s].total+=e.answers.length,e.answers.forEach(p=>{a[s].counts[p]?a[s].counts[p]+=1:a[s].counts[p]=1}),a},{}),c[n]=Object.values(c[n]);return c});return(i,c)=>(l(),r(f,null,[m(v)?(l(),w(b,{key:0,class:"mt-6"},{default:o(()=>[u(g,null,{default:o(()=>[t("div",F,[u(y,null,{default:o(()=>[x("Cargando datos...")]),_:1})])]),_:1})]),_:1})):(l(),w(b,{key:1,class:"mt-6"},{default:o(()=>[(l(!0),r(f,null,h(m(E),(n,a)=>(l(),r("div",{key:a},[u(g,{class:"pb-sm-0"},{default:o(()=>[t("div",I,[u(y,null,{default:o(()=>[t("div",null,d(n[0].pregunta),1)]),_:2},1024)]),t("div",null,[t("aside",A,[t("a",{href:"https://showandevents-service.vercel.app/export/excel?idTrivia="+a+"&idProyecto=2"},[u(R,{size:"small",class:"me-3",variant:"text",color:"success","prepend-icon":"tabler-download"},{default:o(()=>[x(" Excel ")]),_:1})],8,Q)]),u(M,{class:"text-no-wrap w-100 px-4"},{default:o(()=>[S,t("tbody",null,[(l(!0),r(f,null,h(n,(e,s)=>(l(),r("tr",{key:s},[t("td",U,d(e.name),1),t("td",$,d(e.lastname),1),t("td",q,d(e.telefono),1),t("td",z,d(e.email),1),t("td",null,[t("ul",null,[(l(!0),r(f,null,h(e.answers,(p,V)=>(l(),r("li",{key:V},d(p)+" "+d(i.count),1))),128))])])]))),128))])]),_:2},1024)])]),_:2},1024)]))),128))]),_:1})),u(P,{multiple:"",class:"mt-6"})],64))}};export{J as default};
