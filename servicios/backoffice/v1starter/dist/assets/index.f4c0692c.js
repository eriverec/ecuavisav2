import{d as Y}from"./vuedraggable.umd.b90335ae.js";import{M as Z,r as g,o as i,x as C,a,w as e,f as aa,c as _,h as S,q as s,V as U,e as f,p,g as D,u as la,b4 as E,b5 as A,t as k,c7 as w,b6 as $,aR as ea,N as I,n as c,a3 as N,a2 as oa,aT as ta,b3 as R,F as B,C as H,aM as ua,aW as da,b as d,bd as sa,be as na}from"./index.88d3c7f5.js";import{V as ra}from"./VTextarea.86fae113.js";const x=y=>(sa("data-v-b600f8ce"),y=y(),na(),y),ia=x(()=>d("h3",null,"Se ha guardado la configuraci\xF3n correctamente",-1)),ca=x(()=>d("h3",{class:"mb-5"},"Configuraci\xF3n de Horarios",-1)),fa=x(()=>d("thead",null,[d("tr",null,[d("th",null,"T\xEDtulo"),d("th",null,"Inicio"),d("th",null,"Fin"),d("th",null,"Acciones")])],-1)),pa={__name:"index",setup(y){const m=g(!1),T=g(!1),n=g([]),z=g(0),V=g(""),F=[{title:"Lunes",value:1},{title:"Martes",value:2},{title:"Mi\xE9rcoles",value:3},{title:"Jueves",value:4},{title:"Viernes",value:5},{title:"S\xE1bado",value:6},{title:"Domingo",value:0}];function L(t){const u=t.horarios.map(l=>l.dia);return F.filter(l=>!u.includes(l.value))}function M(t){var u;return((u=F.find(l=>l.value===t))==null?void 0:u.title)||""}function j(){n.value.push({name:`Reproductor ${n.value.length+1}`,iframe:"",forzado:!1,tituloForzado:"",labelForzado:"",horarios:[]}),z.value=n.value.length-1}function O(t){n.value.splice(t,1),z.value>=n.value.length&&(z.value=n.value.length-1)}function J(t){V.value&&(t.horarios.push({dia:V.value,estadoDia:!0,horas:[]}),V.value="")}function q(t,u){t.horarios.splice(u,1)}function G(t,u){t.horarios[u].horas.push({tituloPrograma:"",inicio:"12:00",fin:"13:00"})}function W(t,u,l){t.horarios[u].horas.splice(l,1)}function K(){}async function Q(){m.value=!0;try{const u=await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/suscripciones/player/config2.php?api=web&key=premiunPlayer1")).json();n.value=u.players||[],n.value.forEach(l=>{l.horarios||(l.horarios=[])})}catch(t){console.error("Error al cargar la configuraci\xF3n:",t)}finally{m.value=!1}}async function X(){m.value=!0;try{const t={players:n.value},l=await(await fetch("https://estadisticas.ecuavisa.com/sites/gestor/Tools/suscripciones/player/config2.php?api=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"premiunPlayer1",estructura:t})})).json();console.log("result",l),l==="Configuraci\xF3n actualizada correctamente"&&(T.value=!0)}catch(t){console.error("Error al guardar la configuraci\xF3n:",t)}finally{m.value=!1}}return Q(),(t,u)=>(i(),C("section",null,[a(aa,{modelValue:T.value,"onUpdate:modelValue":u[0]||(u[0]=l=>T.value=l),color:"success",transition:"scale-transition",location:"top center"},{default:e(()=>[ia]),_:1},8,["modelValue"]),a(D,{class:"mt-5",title:"Configuraci\xF3n de Reproductores"},{default:e(()=>[m.value?(i(),_(S,{key:0},{default:e(()=>[s(" Cargando configuraci\xF3n... ")]),_:1})):(i(),_(S,{key:1,class:"py-4 gap-0 w-100"},{default:e(()=>[a(U,null,{default:e(()=>[a(f,{cols:"12"},{default:e(()=>[a(p,{color:"primary",onClick:j},{default:e(()=>[s(" A\xF1adir Reproductor ")]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),a(R,{class:"mt-5"},{default:e(()=>[a(la(Y),{modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=l=>n.value=l),tag:"div","item-key":"index",onEnd:K},{item:e(({element:l,index:b})=>[(i(),_(E,{key:b,value:b},{default:e(()=>[a(A,null,{default:e(()=>[s(k(l.name||`Reproductor ${b+1}`)+" ",1),a(w,{style:{padding:"0 10px"},modelValue:l.playerActivo,"onUpdate:modelValue":o=>l.playerActivo=o,label:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a($,null,{default:e(()=>[a(D,{flat:""},{default:e(()=>[a(ea,null,{default:e(()=>[s(" Configuraci\xF3n de "+k(l.name||`Reproductor ${b+1}`)+" ",1),a(p,{icon:"",size:"small",color:"error",class:"float-right mb-0",onClick:o=>O(b)},{default:e(()=>[a(I,null,{default:e(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),a(S,null,{default:e(()=>[a(U,null,{default:e(()=>[a(f,{cols:"6"},{default:e(()=>[a(c,{class:"mb-5",modelValue:l.name,"onUpdate:modelValue":o=>l.name=o,label:"Nombre del reproductor"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(f,{cols:"3"},{default:e(()=>[a(c,{class:"mb-5",modelValue:l.subtituloFecha,"onUpdate:modelValue":o=>l.subtituloFecha=o,label:"Subtitulo Fecha"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(f,{cols:"3"},{default:e(()=>[a(c,{class:"mb-5",modelValue:l.subtituloHora,"onUpdate:modelValue":o=>l.subtituloHora=o,label:"Subtitulo Hora"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(ra,{modelValue:l.iframe,"onUpdate:modelValue":o=>l.iframe=o,label:"C\xF3digo iframe",rows:"3"},null,8,["modelValue","onUpdate:modelValue"]),a(w,{modelValue:l.forzado,"onUpdate:modelValue":o=>l.forzado=o,label:"Activar forzado"},null,8,["modelValue","onUpdate:modelValue"]),l.forzado?(i(),_(c,{key:0,modelValue:l.tituloForzado,"onUpdate:modelValue":o=>l.tituloForzado=o,label:"T\xEDtulo forzado"},null,8,["modelValue","onUpdate:modelValue"])):N("",!0),l.forzado?(i(),_(c,{key:1,modelValue:l.labelForzado,"onUpdate:modelValue":o=>l.labelForzado=o,label:"Label forzado"},null,8,["modelValue","onUpdate:modelValue"])):N("",!0),a(oa,{class:"my-4"}),ca,a(U,null,{default:e(()=>[a(f,{cols:"4"},{default:e(()=>[a(ta,{modelValue:V.value,"onUpdate:modelValue":u[1]||(u[1]=o=>V.value=o),items:L(l),label:"D\xEDa de la semana"},null,8,["modelValue","items"])]),_:2},1024),a(f,{cols:"8"},{default:e(()=>[a(p,{color:"primary",onClick:o=>J(l),disabled:!V.value},{default:e(()=>[s(" A\xF1adir d\xEDa ")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024),a(R,null,{default:e(()=>[(i(!0),C(B,null,H(l.horarios,(o,h)=>(i(),_(E,{key:h},{default:e(()=>[a(A,null,{default:e(()=>[s(k(M(o.dia))+" ",1),a(ua,{color:o.estadoDia?"success":"warning",class:"ml-2"},{default:e(()=>[s(k(o.estadoDia?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1024),a($,null,{default:e(()=>[a(w,{modelValue:o.estadoDia,"onUpdate:modelValue":r=>o.estadoDia=r,label:"Activar d\xEDa"},null,8,["modelValue","onUpdate:modelValue"]),a(p,{color:"primary",onClick:r=>G(l,h)},{default:e(()=>[s(" A\xF1adir hora ")]),_:2},1032,["onClick"]),a(p,{color:"error",onClick:r=>q(l,h)},{default:e(()=>[s(" Eliminar d\xEDa ")]),_:2},1032,["onClick"]),a(da,null,{default:e(()=>[fa,d("tbody",null,[(i(!0),C(B,null,H(o.horas,(r,P)=>(i(),C("tr",{key:P},[d("td",null,[a(c,{modelValue:r.tituloPrograma,"onUpdate:modelValue":v=>r.tituloPrograma=v},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[a(c,{modelValue:r.inicio,"onUpdate:modelValue":v=>r.inicio=v,type:"time"},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[a(c,{modelValue:r.fin,"onUpdate:modelValue":v=>r.fin=v,type:"time"},null,8,["modelValue","onUpdate:modelValue"])]),d("td",null,[a(p,{icon:"",small:"",color:"error",onClick:v=>W(l,h,P)},{default:e(()=>[a(I,null,{default:e(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))]),_:1},8,["modelValue"])]),_:1}),a(U,{class:"m-5 d-inline"},{default:e(()=>[a(f,{cols:"12",class:"text-end"},{default:e(()=>[a(p,{color:"success",onClick:X,loading:m.value},{default:e(()=>[s(" Guardar Configuraci\xF3n ")]),_:1},8,["loading"])]),_:1})]),_:1})]))}},_a=Z(pa,[["__scopeId","data-v-b600f8ce"]]);export{_a as default};
