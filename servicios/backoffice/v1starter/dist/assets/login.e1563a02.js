import{R as O,S as T,U as F,r,cy as J,I as U,W as Y,z as E,o as H,c as P,w as o,a,e as c,b as n,d as y,u as t,g as z,h as k,j as G,k as w,t as W,l as Z,m as $,V as x,n as S,i as f,p as K,q as I,bZ as N}from"./index.88d3c7f5.js";import{u as D,m as Q,a as X,b as L}from"./route-block.4e37cd7f.js";import{r as R,e as ee}from"./validators.b5f8ddc5.js";import{V as ae}from"./VCheckbox.50e352e3.js";const te="/assets/auth-v2-login-illustration-bordered-dark.a595a9b7.png",se="/assets/auth-v2-login-illustration-bordered-light.47ee3625.png",oe="/assets/auth-v2-login-illustration-dark.0878e8b9.png",le="/assets/auth-v2-login-illustration-light.d1fd488d.png";const re={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},ne={class:"d-flex align-center justify-center w-100 h-100"},ie={class:"text-h5 font-weight-semibold mb-1"},ue={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},de={style:{"margin-top":"1rem"}},me={__name:"login",setup(ce){const h=O.exports.extendMoment(T);h.locale("es",[F]);const C=D(le,oe,se,te,!0),B=D(X,Q),d=r(!1),m=J(),b=U(),V=Y(),M=r({email:void 0,password:void 0}),v=r(""),_=r(),i=r(""),u=r(""),p=r(!1),A=()=>{if(i.value=="admin@demo.com"&&u.value=="EcuavisaBackoffice"){let s=[{action:"manage",subject:"all"}],e={fullName:"admin",email:"admin@demo.com"};localStorage.setItem("userAbilities",JSON.stringify(s)),V.update(s),localStorage.setItem("userData",JSON.stringify(e)),localStorage.setItem("role","administrador"),b.replace(m.query.to?String(m.query.to):"/")}else N.post("https://gestores-flax.vercel.app/login",{email:i.value,password:u.value}).then(s=>{const e=s.data;let g=h().format("DD/MM/YYYY HH:mm:ss").toString(),l=[{action:"manage",subject:"all"}];localStorage.setItem("userAbilities",JSON.stringify(l)),V.update(l),localStorage.setItem("userData",JSON.stringify(e.data)),localStorage.setItem("role",e.data.role);var q={usuario:e.data.email,pagina:"login",fecha:g};N.post("https://servicio-logs.vercel.app/accion",q),b.replace(m.query.to?String(m.query.to):"/")}).catch(s=>{if(s.response){const{message:e}=s.response.data;v.value=e,console.error(s.response.data)}console.error(s)})},j=()=>{var s;(s=_.value)==null||s.validate().then(({valid:e})=>{e&&A()})};return(s,e)=>{const g=E("RouterLink");return H(),P(x,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[a(c,{lg:"8",class:"d-none d-lg-flex"},{default:o(()=>[n("div",re,[n("div",ne,[a(y,{"max-width":"505",src:t(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),a(y,{src:t(B),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),a(c,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:o(()=>[a(z,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:o(()=>[a(k,null,{default:o(()=>[a(t(G),{nodes:t(w).app.logo,class:"mb-6"},null,8,["nodes"]),n("h5",ie," Bienvenido a "+W(t(w).app.title)+" Analytics! \u{1F44B}\u{1F3FB} ",1)]),_:1}),a(k,null,{default:o(()=>[a(t(Z),{ref_key:"refVForm",ref:_,onSubmit:$(j,["prevent"])},{default:o(()=>[a(x,null,{default:o(()=>[a(c,{cols:"12"},{default:o(()=>[a(S,{modelValue:t(i),"onUpdate:modelValue":e[0]||(e[0]=l=>f(i)?i.value=l:null),label:"Correo",type:"email",rules:[t(R),t(ee)],"error-messages":t(v)},null,8,["modelValue","rules","error-messages"])]),_:1}),a(c,{cols:"12"},{default:o(()=>[a(S,{modelValue:t(u),"onUpdate:modelValue":e[1]||(e[1]=l=>f(u)?u.value=l:null),label:"Password",rules:[t(R)],type:t(d)?"text":"password","error-messages":t(M).password,"append-inner-icon":t(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=l=>d.value=!t(d))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),n("div",ue,[a(ae,{modelValue:t(p),"onUpdate:modelValue":e[3]||(e[3]=l=>f(p)?p.value=l:null),label:"Recordarme"},null,8,["modelValue"])]),a(K,{block:"",type:"submit"},{default:o(()=>[I(" Iniciar sesi\xF3n ")]),_:1}),n("div",de,[n("h5",null,[a(g,{to:{name:"forgot-password"}},{default:o(()=>[I(" \xBFOlvidaste tu contrase\xF1a? ")]),_:1})])])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof L=="function"&&L(me);export{me as default};
