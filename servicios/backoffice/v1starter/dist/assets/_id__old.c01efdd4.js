import{M as $,cy as J,r as u,Q,as as W,o as x,x as N,a as e,w as a,a$ as G,a_ as K,q as C,t as X,f as Y,V as n,e as o,g as E,aR as D,aM as L,h as q,n as w,aT as R,F as Z,c as I,a3 as z,b as p,c7 as ee,cF as ae,m as le,l as te,N as oe,p as ie,bd as se,be as re}from"./index.88d3c7f5.js";import ue from"./CampaignEditByCriteria.10fe90d9.js";import de from"./CampaignEditByList.92f3494a.js";import{V as ne}from"./VTextarea.86fae113.js";import"./papaparse.min.b6588840.js";import"./VPagination.9412c3b8.js";import"./VAlert.3e8ed100.js";const T=U=>(se("data-v-db83f006"),U=U(),re(),U),ce={class:"position-relative"},me=T(()=>p("label",{for:"nombreCampania"},"Nombre de la campa\xF1a",-1)),pe=T(()=>p("label",{for:"tipocontenido"},"Tipo de contenido",-1)),ve=T(()=>p("label",{for:"descripcionCampania"},"Descripci\xF3n de la campa\xF1a",-1)),fe=T(()=>p("label",{for:"visibilidad"},"Escoge una secci\xF3n",-1)),_e=T(()=>p("label",{for:"posicion"},"Posici\xF3n",-1)),ge={class:"d-flex justify-end mb-4"},be={__name:"[id]_old",setup(U){const B=J(),v=u("criteria"),m=u(null),M=u(!0),f=u(""),k=u(""),d=u(""),_=u(""),c=u([]),g=u(""),b=u(""),V=u(""),y=u(""),F=[{title:"Im\xE1genes locales",value:"imagen"},{title:"C\xF3digo HTML",value:"html"},{title:"C\xF3digos ADS",value:"script"}],j=[{title:"Todo el sitio",value:"all"},{title:"Lo-ultimo",value:"Lo-ultimo"},{title:"Noticias",value:"Noticias"},{title:"Mundo",value:"Mundo"},{title:"Estadio",value:"Estadio"},{title:"Entretenimiento",value:"Entretenimiento"},{title:"Programas",value:"Programas"},{title:"Tendencias",value:"Tendencias"},{title:"Home",value:"Home"}],P=["RDTop1","RDTop2","RDTop3","RDFloating"],r=u({show:!1,text:"",color:"success"}),S=async()=>{var s,l,t;try{const i=await(await fetch(`https://ads-service.vercel.app/campaign/get/edit/${B.params.id}/`)).json();i&&i[0]&&(m.value=i[0],f.value=i[0].campaignTitle||"",k.value=i[0].description||"",d.value=i[0].type||"",_.value=((s=i[0].criterial)==null?void 0:s.visibilitySection)||"all",c.value=i[0].position?i[0].position.split(","):[],i[0].urls&&(g.value=i[0].urls.html||"",b.value=i[0].urls.url||"",V.value=((l=i[0].urls.img)==null?void 0:l.escritorio)||"",y.value=((t=i[0].urls.img)==null?void 0:t.mobile)||""))}catch{r.value={show:!0,text:"Error al cargar la campa\xF1a",color:"error"}}finally{M.value=!1}},H=()=>{var s,l,t,h,i;if(!((s=f.value)!=null&&s.trim()))return r.value={show:!0,text:"El nombre de la campa\xF1a es requerido",color:"error"},!1;if(!d.value)return r.value={show:!0,text:"El tipo de contenido es requerido",color:"error"},!1;if(!_.value)return r.value={show:!0,text:"La visibilidad en el sitio es requerida",color:"error"},!1;if(!c.value.length)return r.value={show:!0,text:"Debe seleccionar al menos una posici\xF3n",color:"error"},!1;if(d.value==="imagen"){if(!((l=b.value)!=null&&l.trim())||!((t=V.value)!=null&&t.trim())||!((h=y.value)!=null&&h.trim()))return r.value={show:!0,text:"Todos los campos de imagen son requeridos",color:"error"},!1}else if((d.value==="html"||d.value==="script")&&!((i=g.value)!=null&&i.trim()))return r.value={show:!0,text:"El c\xF3digo es requerido",color:"error"},!1;return!0},A=async()=>{var l;if(!H())return;const s={campaignTitle:f.value,description:k.value,type:d.value,criterial:{...(l=m.value)==null?void 0:l.criterial,visibilitySection:_.value},position:c.value.join(","),urls:{url:b.value,html:g.value,img:{escritorio:V.value,mobile:y.value}}};try{(await(await fetch(`https://ads-service.vercel.app/campaign/update/${B.params.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()).resp&&(r.value={show:!0,text:"Campa\xF1a actualizada exitosamente",color:"success"},await S())}catch{r.value={show:!0,text:"Error al actualizar la campa\xF1a",color:"error"}}},O=async()=>{var s;(s=document.getElementById("guardacrit"))==null||s.click()};return Q(c,s=>{s.length>1&&(c.value=[s[s.length-1]])}),W(S),(s,l)=>(x(),N("div",ce,[e(K,{"model-value":M.value,class:"align-center justify-center"},{default:a(()=>[e(G,{indeterminate:"",color:"primary"})]),_:1},8,["model-value"]),e(Y,{modelValue:r.value.show,"onUpdate:modelValue":l[0]||(l[0]=t=>r.value.show=t),color:r.value.color,timeout:2e3,location:"top"},{default:a(()=>[C(X(r.value.text),1)]),_:1},8,["modelValue","color"]),e(te,{onSubmit:le(A,["prevent"])},{default:a(()=>[e(n,null,{default:a(()=>[e(o,{cols:"12",md:"6"},{default:a(()=>[e(E,{class:"h-100"},{default:a(()=>[e(D,{class:"pa-4"},{default:a(()=>[e(L,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[C(" Detalles de Campa\xF1a ")]),_:1})]),_:1}),e(q,null,{default:a(()=>[e(n,null,{default:a(()=>[e(o,{cols:"6"},{default:a(()=>[e(n,{"no-gutters":""},{default:a(()=>[e(o,{cols:"12",md:"12"},{default:a(()=>[me]),_:1}),e(o,{cols:"12",md:"12"},{default:a(()=>[e(w,{id:"nombreCampania",modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=t=>f.value=t),placeholder:"Nombre de la campa\xF1a","persistent-placeholder":"",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"6"},{default:a(()=>[e(n,{"no-gutters":""},{default:a(()=>[e(o,{cols:"12",md:"12"},{default:a(()=>[pe]),_:1}),e(o,{cols:"12",md:"12"},{default:a(()=>[e(R,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=t=>d.value=t),items:F,"item-title":"title","item-value":"value",required:"",clearable:"",label:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:a(()=>[e(n,{"no-gutters":""},{default:a(()=>[e(o,{cols:"12",md:"12"},{default:a(()=>[ve]),_:1}),e(o,{cols:"12",md:"12"},{default:a(()=>[e(w,{id:"descripcionCampania",modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=t=>k.value=t),placeholder:"Ingrese una descripci\xF3n para la campa\xF1a","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",md:"6"},{default:a(()=>[e(E,{class:"h-100"},{default:a(()=>[e(D,{class:"pa-4"},{default:a(()=>[e(L,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[C(" Configuraci\xF3n de Contenido ")]),_:1})]),_:1}),e(q,null,{default:a(()=>[e(n,{class:"pb-5"},{default:a(()=>[d.value==="imagen"?(x(),N(Z,{key:0},[e(o,{cols:"12"},{default:a(()=>[e(w,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=t=>b.value=t),label:"Link del ads",required:"",placeholder:"URL del anuncio"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:a(()=>[e(w,{modelValue:V.value,"onUpdate:modelValue":l[5]||(l[5]=t=>V.value=t),label:"URL imagen de escritorio",required:"",placeholder:"URL de la imagen para escritorio"},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:a(()=>[e(w,{modelValue:y.value,"onUpdate:modelValue":l[6]||(l[6]=t=>y.value=t),label:"URL imagen de m\xF3vil",required:"",placeholder:"URL de la imagen para m\xF3vil"},null,8,["modelValue"])]),_:1})],64)):d.value==="html"||d.value==="script"?(x(),I(o,{key:1,cols:"12"},{default:a(()=>[e(ne,{modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=t=>g.value=t),label:d.value==="html"?"C\xF3digo HTML":"C\xF3digo ADS",required:"",rows:"6",placeholder:"Ingrese el c\xF3digo"},null,8,["modelValue","label"])]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:a(()=>[e(E,null,{default:a(()=>[e(D,{class:"pa-4"},{default:a(()=>[e(L,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[C(" Visibilidad en la web ")]),_:1})]),_:1}),e(q,null,{default:a(()=>[e(n,null,{default:a(()=>[e(o,{cols:"6"},{default:a(()=>[e(n,{"no-gutters":""},{default:a(()=>[e(o,{cols:"12",md:"12"},{default:a(()=>[fe]),_:1}),e(o,{cols:"12",md:"12"},{default:a(()=>[e(R,{modelValue:_.value,"onUpdate:modelValue":l[8]||(l[8]=t=>_.value=t),items:j,"item-title":"title","item-value":"value",required:"",clearable:"",label:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"6"},{default:a(()=>[e(n,{"no-gutters":""},{default:a(()=>[e(o,{cols:"12",md:"12"},{default:a(()=>[_e]),_:1}),e(o,{cols:"12",md:"12"},{default:a(()=>[e(R,{modelValue:c.value,"onUpdate:modelValue":l[9]||(l[9]=t=>c.value=t),items:P,chips:"",multiple:"",clearable:"",label:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:a(()=>[e(E,null,{default:a(()=>[e(D,{class:"pa-4"},{default:a(()=>[e(L,{color:"primary",label:"",size:"large",class:"px-4 py-2 text-uppercase"},{default:a(()=>[C(" Target / Usuarios ")]),_:1})]),_:1}),e(q,null,{default:a(()=>[p("div",ge,[e(ee,{modelValue:v.value,"onUpdate:modelValue":l[10]||(l[10]=t=>v.value=t),"true-value":"criteria","false-value":"list",label:v.value==="criteria"?"Por criterios":"Lista personalizada",color:"primary"},null,8,["modelValue","label"])]),e(ae,null,{default:a(()=>[v.value==="criteria"&&m.value?(x(),I(ue,{key:0,"campaign-data":m.value,onUpdate:S},null,8,["campaign-data"])):v.value==="list"&&m.value?(x(),I(de,{key:1,"campaign-data":m.value,onUpdate:S},null,8,["campaign-data"])):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(ie,{type:"submit",class:"save-button",color:"success",icon:"mdi-check",size:"large",style:{position:"fixed",bottom:"2rem",right:"2rem"},onClick:O},{default:a(()=>[e(oe,{icon:"tabler-device-floppy"})]),_:1})]))}},Ue=$(be,[["__scopeId","data-v-db83f006"]]);export{Ue as default};
