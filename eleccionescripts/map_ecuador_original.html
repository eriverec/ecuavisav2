<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AmCharts JS Example</title>
  <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet" type="text/css">

 <link rel="stylesheet" href="mapaEc.css">
 <!-- <link rel="stylesheet" href="https://ecuavisadev.netlify.app/eleccionescripts/mapaEc.css"> -->
</head>
<body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/maps/modules/map.js"></script>
<script src="https://code.highcharts.com/maps/modules/data.js"></script>
<script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
<script src="https://code.highcharts.com/maps/modules/offline-exporting.js"></script>
<script src="https://code.highcharts.com/maps/modules/accessibility.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://ecuavisadev.netlify.app/eleccionescripts/ecuador.js"></script>
   
<link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" type="text/css" />

<div id="dataFotos"></div>
<div id="dataPorcentaje"></div>

<div id="container">
    <div class="loading">
        <i class="icon-spinner icon-spin icon-large"></i>
        Cargando datos...
    </div>
</div>
<!-- <script src="https://ecuavisadev.netlify.app/eleccionescripts/mapaEc.js"></script> -->

<script src="mapaEc.js"></script>

<script>
    // URL de la API
    const apiUrl = 'https://api-configuracion.vercel.app/web/data-sv';

    // Obtener referencia al elemento div
    const dataPorcentajeDiv = document.getElementById('dataPorcentaje');
    const dataPorcentajeFotos = document.getElementById('dataFotos');


    // Realizar una solicitud GET a la API
    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        // Acceder a los datos de porcentaje
        const porcentajeData = data.porcentaje;

        // Crear una cadena para almacenar los elementos de porcentaje formateados
        let porcentajeHTML = '';
        let porcentajeHTMLFoto = '';


        // Iterar a través de los datos de porcentaje
        porcentajeData.forEach(item => {
          // Formatear el porcentaje a dos decimales
          const porcentajeFormateado = item.value.toFixed(2);
          const imgFoto = item.img;
          const imgName = item.name;
          const imgPartido = item.partido;

          // Establecer una clase CSS en función del valor del porcentaje
          const claseCSS = item.value > 50 ? 'high' : 'low';

          // Crear el elemento de porcentaje
          const porcentajeElement = `<div class="porcentaje-item ${claseCSS}" style="width: ${porcentajeFormateado}%">
           ${porcentajeFormateado}%</div>`;

          const porcentajeElementFoto = `
          <div class="itemsFoto"><img src="${imgFoto}" width="180px" alt="Ecuavisa"/>
            <div class="block-text">
              <span class="fotoName"> ${imgName} </span>
              <span class="fotoPartido"> ${imgPartido} </span>
            </div>
          </div> `;

          // Agregar el elemento de porcentaje al HTML
          porcentajeHTML += porcentajeElement;
          porcentajeHTMLFoto += porcentajeElementFoto;

        });

        // Asignar el HTML al elemento div
        dataPorcentajeDiv.innerHTML = porcentajeHTML;
        dataPorcentajeFotos.innerHTML = porcentajeHTMLFoto;

      })
      .catch(error => {
        console.error('Error al obtener los datos:', error);
      });


  </script>



</body>
</html>